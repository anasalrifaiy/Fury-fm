/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={50:(e,t,n)=>{var r=n(994);Object.defineProperty(t,"__esModule",{value:!0}),t.resetPassword=t.registerUser=t.onAuthStateChange=t.logoutUser=t.loginUser=t.getCurrentUser=void 0;var i,s,o,a,u=r(n(293)),l=n(52),c=n(62);t.registerUser=(i=(0,u.default)(function*(e,t,n){try{var r=yield(0,l.createUserWithEmailAndPassword)(c.auth,e,t);return yield(0,l.updateProfile)(r.user,{displayName:n}),{success:!0,user:r.user}}catch(e){return{success:!1,error:e.message}}}),function(e,t,n){return i.apply(this,arguments)}),t.loginUser=(s=(0,u.default)(function*(e,t){try{return{success:!0,user:(yield(0,l.signInWithEmailAndPassword)(c.auth,e,t)).user}}catch(e){return{success:!1,error:e.message}}}),function(e,t){return s.apply(this,arguments)}),t.logoutUser=(o=(0,u.default)(function*(){try{return yield(0,l.signOut)(c.auth),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(){return o.apply(this,arguments)}),t.onAuthStateChange=function(e){return(0,l.onAuthStateChanged)(c.auth,e)},t.getCurrentUser=function(){return c.auth.currentUser},t.resetPassword=(a=(0,u.default)(function*(e){try{return yield(0,l.sendPasswordResetEmail)(c.auth,e),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(e){return a.apply(this,arguments)})},52:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(970);Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},62:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.db=t.auth=void 0;var r=n(577),i=n(52),s=n(815),o=(0,r.initializeApp)({apiKey:"AIzaSyAefdSczobIyVbMXCaTnfYcKSrbb50x1tY",authDomain:"fury-fm.firebaseapp.com",databaseURL:"https://fury-fm-default-rtdb.europe-west1.firebasedatabase.app",projectId:"fury-fm",storageBucket:"fury-fm.firebasestorage.app",messagingSenderId:"140944928919",appId:"1:140944928919:web:4409ddc0f411f6aa9b39d2",measurementId:"G-3MHL5JJTVF"});t.auth=(0,i.getAuth)(o),t.db=(0,s.getFirestore)(o),t.default=o},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var u=e[a],l=r.base?u[0]+r.base:u[0],c=s[l]||0,h="".concat(l," ").concat(c);s[l]=c+1;var d=n(h),f={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var m=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}o.push(h)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var u=r(e,i),l=0;l<s.length;l++){var c=n(s[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=u}}},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},122:(e,t,n)=>{var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},125:(e,t,n)=>{var r=n(994);Object.defineProperty(t,"__esModule",{value:!0}),t.updateUserProfile=t.updateMatchResult=t.sendFriendRequest=t.saveUserSquad=t.listenToMatches=t.listenToFriendRequests=t.getUserSquad=t.getUserProfile=t.getUserMatches=t.getUserFriends=t.getFriendRequests=t.createUserProfile=t.createMatch=t.acceptFriendRequest=void 0;var i,s,o,a,u,l,c,h,d,f,m,p,g=r(n(715)),y=r(n(293)),b=n(815),v=n(62);t.createUserProfile=(i=(0,y.default)(function*(e,t){try{return yield(0,b.setDoc)((0,b.doc)(v.db,"users",e),Object.assign({},t,{createdAt:(0,b.serverTimestamp)(),updatedAt:(0,b.serverTimestamp)()})),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(e,t){return i.apply(this,arguments)}),t.getUserProfile=(s=(0,y.default)(function*(e){try{var t=yield(0,b.getDoc)((0,b.doc)(v.db,"users",e));return t.exists()?{success:!0,data:t.data()}:{success:!1,error:"User not found"}}catch(e){return{success:!1,error:e.message}}}),function(e){return s.apply(this,arguments)}),t.updateUserProfile=(o=(0,y.default)(function*(e,t){try{return yield(0,b.updateDoc)((0,b.doc)(v.db,"users",e),Object.assign({},t,{updatedAt:(0,b.serverTimestamp)()})),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(e,t){return o.apply(this,arguments)}),t.saveUserSquad=(a=(0,y.default)(function*(e,t){try{return yield(0,b.setDoc)((0,b.doc)(v.db,"squads",e),{squad:t,updatedAt:(0,b.serverTimestamp)()}),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(e,t){return a.apply(this,arguments)}),t.getUserSquad=(u=(0,y.default)(function*(e){try{var t=yield(0,b.getDoc)((0,b.doc)(v.db,"squads",e));return t.exists()?{success:!0,data:t.data().squad}:{success:!1,error:"Squad not found"}}catch(e){return{success:!1,error:e.message}}}),function(e){return u.apply(this,arguments)}),t.sendFriendRequest=(l=(0,y.default)(function*(e,t,n){try{return yield(0,b.addDoc)((0,b.collection)(v.db,"friendRequests"),{from:e,to:t,fromName:n,status:"pending",createdAt:(0,b.serverTimestamp)()}),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(e,t,n){return l.apply(this,arguments)}),t.getFriendRequests=(c=(0,y.default)(function*(e){try{var t=(0,b.query)((0,b.collection)(v.db,"friendRequests"),(0,b.where)("to","==",e),(0,b.where)("status","==","pending")),n=yield(0,b.getDocs)(t),r=[];return n.forEach(function(e){r.push(Object.assign({id:e.id},e.data()))}),{success:!0,data:r}}catch(e){return{success:!1,error:e.message}}}),function(e){return c.apply(this,arguments)}),t.acceptFriendRequest=(h=(0,y.default)(function*(e,t,n){try{return yield(0,b.updateDoc)((0,b.doc)(v.db,"friendRequests",e),{status:"accepted",updatedAt:(0,b.serverTimestamp)()}),yield(0,b.addDoc)((0,b.collection)(v.db,"friends"),{user1:t,user2:n,createdAt:(0,b.serverTimestamp)()}),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(e,t,n){return h.apply(this,arguments)}),t.getUserFriends=(d=(0,y.default)(function*(e){try{var t=(0,b.query)((0,b.collection)(v.db,"friends"),(0,b.where)("user1","==",e)),n=(0,b.query)((0,b.collection)(v.db,"friends"),(0,b.where)("user2","==",e)),r=yield Promise.all([(0,b.getDocs)(t),(0,b.getDocs)(n)]),i=(0,g.default)(r,2),s=i[0],o=i[1],a=new Set;return s.forEach(function(e){return a.add(e.data().user2)}),o.forEach(function(e){return a.add(e.data().user1)}),{success:!0,data:Array.from(a)}}catch(e){return{success:!1,error:e.message}}}),function(e){return d.apply(this,arguments)}),t.createMatch=(f=(0,y.default)(function*(e,t,n,r){try{var i={player1:e,player2:t,player1Name:n,player2Name:r,status:"pending",createdAt:(0,b.serverTimestamp)()};return{success:!0,matchId:(yield(0,b.addDoc)((0,b.collection)(v.db,"matches"),i)).id}}catch(e){return{success:!1,error:e.message}}}),function(e,t,n,r){return f.apply(this,arguments)}),t.getUserMatches=(m=(0,y.default)(function*(e){try{var t=(0,b.query)((0,b.collection)(v.db,"matches"),(0,b.where)("player1","==",e)),n=(0,b.query)((0,b.collection)(v.db,"matches"),(0,b.where)("player2","==",e)),r=yield Promise.all([(0,b.getDocs)(t),(0,b.getDocs)(n)]),i=(0,g.default)(r,2),s=i[0],o=i[1],a=[];return s.forEach(function(e){return a.push(Object.assign({id:e.id},e.data()))}),o.forEach(function(e){return a.push(Object.assign({id:e.id},e.data()))}),{success:!0,data:a}}catch(e){return{success:!1,error:e.message}}}),function(e){return m.apply(this,arguments)}),t.updateMatchResult=(p=(0,y.default)(function*(e,t){try{return yield(0,b.updateDoc)((0,b.doc)(v.db,"matches",e),Object.assign({},t,{status:"completed",completedAt:(0,b.serverTimestamp)()})),{success:!0}}catch(e){return{success:!1,error:e.message}}}),function(e,t){return p.apply(this,arguments)}),t.listenToFriendRequests=function(e,t){var n=(0,b.query)((0,b.collection)(v.db,"friendRequests"),(0,b.where)("to","==",e),(0,b.where)("status","==","pending"));return(0,b.onSnapshot)(n,function(e){var n=[];e.forEach(function(e){n.push(Object.assign({id:e.id},e.data()))}),t(n)})},t.listenToMatches=function(e,t){var n=(0,b.query)((0,b.collection)(v.db,"matches"),(0,b.where)("player2","==",e),(0,b.where)("status","==","pending"));return(0,b.onSnapshot)(n,function(e){var n=[];e.forEach(function(e){n.push(Object.assign({id:e.id},e.data()))}),t(n)})}},132:(e,t,n)=>{var r=n(901),i=n(291),s=n(122),o=n(869);e.exports=function(e){return r(e)||i(e)||s(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},148:(e,t,n)=>{"use strict";n.r(t),n.d(t,{deleteDB:()=>g,openDB:()=>p,unwrap:()=>m,wrap:()=>f});const r=(e,t)=>t.some(t=>e instanceof t);let i,s;const o=new WeakMap,a=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(m(this),e),f(o.get(this))}:function(...e){return f(t.apply(m(this),e))}:function(e,...n){const r=t.call(m(this),e,...n);return u.set(r,e.sort?e.sort():[e]),f(r)}:(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});a.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e);var t}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(f(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),c.set(t,e),t}(e);if(l.has(e))return l.get(e);const t=d(e);return t!==e&&(l.set(e,t),c.set(t,e)),t}const m=e=>c.get(e);function p(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=f(o);return r&&o.addEventListener("upgradeneeded",e=>{r(f(o.result),e.oldVersion,e.newVersion,f(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function g(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),f(n).then(()=>{})}const y=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],v=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return v.set(t,s),s}var w;w=h,h={...w,get:(e,t,n)=>_(e,t)||w.get(e,t,n),has:(e,t)=>!!_(e,t)||w.has(e,t)}},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},159:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},194:(e,t,n)=>{"use strict";e.exports=n(731)},199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(319),i=n(844),s=n(336),o=n(148);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",l="0.14.3",c=new i.Logger("@firebase/app"),h="@firebase/app-compat",d="@firebase/analytics-compat",f="@firebase/analytics",m="@firebase/app-check-compat",p="@firebase/app-check",g="@firebase/auth",y="@firebase/auth-compat",b="@firebase/database",v="@firebase/data-connect",_="@firebase/database-compat",w="@firebase/functions",E="@firebase/functions-compat",I="@firebase/installations",N="@firebase/installations-compat",S="@firebase/messaging",T="@firebase/messaging-compat",k="@firebase/performance",C="@firebase/performance-compat",x="@firebase/remote-config",A="@firebase/remote-config-compat",P="@firebase/storage",R="@firebase/storage-compat",D="@firebase/firestore",O="@firebase/ai",M="@firebase/firestore-compat",L="firebase",F="[DEFAULT]",U={[u]:"fire-core",[h]:"fire-core-compat",[f]:"fire-analytics",[d]:"fire-analytics-compat",[p]:"fire-app-check",[m]:"fire-app-check-compat",[g]:"fire-auth",[y]:"fire-auth-compat",[b]:"fire-rtdb",[v]:"fire-data-connect",[_]:"fire-rtdb-compat",[w]:"fire-fn",[E]:"fire-fn-compat",[I]:"fire-iid",[N]:"fire-iid-compat",[S]:"fire-fcm",[T]:"fire-fcm-compat",[k]:"fire-perf",[C]:"fire-perf-compat",[x]:"fire-rc",[A]:"fire-rc-compat",[P]:"fire-gcs",[R]:"fire-gcs-compat",[D]:"fire-fst",[M]:"fire-fst-compat",[O]:"fire-vertex","fire-js":"fire-js",[L]:"fire-js-all"},V=new Map,z=new Map,B=new Map;function j(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function q(e){const t=e.name;if(B.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;B.set(t,e);for(const t of V.values())j(t,e);for(const t of z.values())j(t,e);return!0}function $(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function W(e){return void 0!==e.options}function G(e){return!W(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}const H=new s.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class K{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw H.create("app-deleted",{appName:this._name})}}function Q(e,t){const n=s.base64Decode(e.split(".")[1]);null!==n?void 0!==JSON.parse(n).exp?1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`):console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`)}class J extends K{constructor(e,t,n,r){const i=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};void 0!==e.apiKey?super(e,s,r):super(e.options,s,r),this._serverConfig={automaticDataCollectionEnabled:i,...t},this._serverConfig.authIdToken&&Q(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Q(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Z(u,l,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){X(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw H.create("server-app-deleted")}}function Y(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i={name:F,automaticDataCollectionEnabled:!0,...t},o=i.name;if("string"!=typeof o||!o)throw H.create("bad-app-name",{appName:String(o)});if(n||(n=s.getDefaultAppConfig()),!n)throw H.create("no-options");const a=V.get(o);if(a){if(s.deepEqual(n,a.options)&&s.deepEqual(i,a.config))return a;throw H.create("duplicate-app",{appName:o})}const u=new r.ComponentContainer(o);for(const e of B.values())u.addComponent(e);const l=new K(n,i,u);return V.set(o,l),l}async function X(e){let t=!1;const n=e.name;V.has(n)?(t=!0,V.delete(n)):z.has(n)&&e.decRefCount()<=0&&(z.delete(n),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Z(e,t,n){let i=U[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}q(new r.Component(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=o.openDB("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(e){console.warn(e)}}}).catch(e=>{throw H.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(e){if(e instanceof s.FirebaseError)c.warn(e.message);else{const t=H.create("idb-set",{originalErrorMessage:e?.message});c.warn(t.message)}}}function ie(e){return`${e.name}!${e.options.appId}`}class se{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ae(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=oe();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){c.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=oe(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ue(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ue(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=s.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return c.warn(e),""}}}function oe(){return(new Date).toISOString().substring(0,10)}class ae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!s.isIndexedDBAvailable()&&s.validateIndexedDBOpenable().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(e){if(e instanceof s.FirebaseError)c.warn(e.message);else{const t=H.create("idb-get",{originalErrorMessage:e?.message});c.warn(t.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return re(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return re(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function ue(e){return s.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}q(new r.Component("platform-logger",e=>new a(e),"PRIVATE")),q(new r.Component("heartbeat",e=>new se(e),"PRIVATE")),Z(u,l,"node"),Z(u,l,"cjs2020"),Z("fire-js",""),Object.defineProperty(t,"FirebaseError",{enumerable:!0,get:function(){return s.FirebaseError}}),t.SDK_VERSION="12.3.0",t._DEFAULT_ENTRY_NAME=F,t._addComponent=j,t._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},t._apps=V,t._clearComponents=function(){B.clear()},t._components=B,t._getProvider=$,t._isFirebaseApp=W,t._isFirebaseServerApp=function(e){return null!=e&&void 0!==e.settings},t._isFirebaseServerAppSettings=G,t._registerComponent=q,t._removeServiceInstance=function(e,t,n=F){$(e,t).clearInstance(n)},t._serverApps=z,t.deleteApp=X,t.getApp=function(e=F){const t=V.get(e);if(!t&&e===F&&s.getDefaultAppConfig())return Y();if(!t)throw H.create("no-app",{appName:e});return t},t.getApps=function(){return Array.from(V.values())},t.initializeApp=Y,t.initializeServerApp=function(e,t={}){if(s.isBrowser()&&!s.isWebWorker())throw H.create("invalid-server-app-environment");let n,i=t||{};if(e&&(W(e)?n=e.options:G(e)?i=e:n=e),void 0===i.automaticDataCollectionEnabled&&(i.automaticDataCollectionEnabled=!0),n||(n=s.getDefaultAppConfig()),!n)throw H.create("no-options");const o={...i,...n};if(void 0!==o.releaseOnDeref&&delete o.releaseOnDeref,void 0!==i.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw H.create("finalization-registry-not-supported",{});const a=""+(u=JSON.stringify(o),[...u].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0));var u;const l=z.get(a);if(l)return l.incRefCount(i.releaseOnDeref),l;const c=new r.ComponentContainer(a);for(const e of B.values())c.addComponent(e);const h=new J(n,i,a,c);return z.set(a,h),h},t.onLog=function(e,t){if(null!==e&&"function"!=typeof e)throw H.create("invalid-log-argument");i.setUserLogHandler(e,t)},t.registerVersion=Z,t.setLogLevel=function(e){i.setLogLevel(e)}},241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(199),i=n(319),s=n(844),o=n(336),a=n(860),u=n(832);const l="@firebase/firestore",c="4.9.2";class h{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}h.UNAUTHENTICATED=new h(null),h.GOOGLE_CREDENTIALS=new h("google-credentials-uid"),h.FIRST_PARTY=new h("first-party-uid"),h.MOCK_USER=new h("mock-user");let d="12.3.0";const f=new s.Logger("@firebase/firestore");function m(){return f.logLevel}function p(e,...t){if(f.logLevel<=s.LogLevel.DEBUG){const n=t.map(b);f.debug(`Firestore (${d}): ${e}`,...n)}}function g(e,...t){if(f.logLevel<=s.LogLevel.ERROR){const n=t.map(b);f.error(`Firestore (${d}): ${e}`,...n)}}function y(e,...t){if(f.logLevel<=s.LogLevel.WARN){const n=t.map(b);f.warn(`Firestore (${d}): ${e}`,...n)}}function b(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function v(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,_(e,r,n)}function _(e,t,n){let r=`FIRESTORE (${d}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw g(r),new Error(r)}function w(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||_(t,i,r)}function E(e,t){return e}const I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends o.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class S{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class T{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(h.UNAUTHENTICATED))}shutdown(){}}class C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class x{constructor(e){this.t=e,this.currentUser=h.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){w(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new S;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new S,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{p("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(p("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new S)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(p("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(w("string"==typeof t.accessToken,31837,{l:t}),new T(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return w(null===e||"string"==typeof e,2055,{h:e}),new h(e)}}class A{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=h.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class P{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new A(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(h.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,r._isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){w(void 0===this.o,3512);const n=e=>{null!=e.error&&p("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,p("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{p("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):p("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new R(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(w("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new R(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function O(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class M{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=O(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function L(e,t){return e<t?-1:e>t?1:0}function F(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return z(n)===z(i)?L(n,i):z(n)?1:-1}return L(e.length,t.length)}const U=55296,V=57343;function z(e){const t=e.charCodeAt(0);return t>=U&&t<=V}function B(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function j(e){return e+"\0"}const q="__name__";class ${constructor(e,t,n){void 0===t?t=0:t>e.length&&v(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&v(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=$.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return L(e.length,t.length)}static compareSegments(e,t){const n=$.isNumericId(e),r=$.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?$.extractNumericId(e).compare($.extractNumericId(t)):F(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return a.Integer.fromString(e.substring(4,e.length-2))}}class W extends ${construct(e,t,n){return new W(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new N(I.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new W(t)}static emptyPath(){return new W([])}}const G=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class H extends ${construct(e,t,n){return new H(e,t,n)}static isValidIdentifier(e){return G.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),H.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===q}static keyField(){return new H([q])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new N(I.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new N(I.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new N(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new N(I.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new H(t)}static emptyPath(){return new H([])}}class K{constructor(e){this.path=e}static fromPath(e){return new K(W.fromString(e))}static fromName(e){return new K(W.fromString(e).popFirst(5))}static empty(){return new K(W.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===W.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return W.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new W(e.slice()))}}function Q(e,t,n){if(!n)throw new N(I.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function J(e,t,n,r){if(!0===t&&!0===r)throw new N(I.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Y(e){if(!K.isDocumentKey(e))throw new N(I.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function X(e){if(K.isDocumentKey(e))throw new N(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Z(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ee(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":v(12329,{type:typeof e})}function te(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new N(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ee(e);throw new N(I.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function ne(e,t){if(t<=0)throw new N(I.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function re(e,t){const n={typeString:e};return t&&(n.value=t),n}function ie(e,t){if(!Z(e))throw new N(I.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new N(I.INVALID_ARGUMENT,n);return!0}const se=-62135596800,oe=1e6;class ae{static now(){return ae.fromMillis(Date.now())}static fromDate(e){return ae.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*oe);return new ae(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new N(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new N(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<se)throw new N(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oe}_compareTo(e){return this.seconds===e.seconds?L(this.nanoseconds,e.nanoseconds):L(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ie(e,ae._jsonSchema))return new ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-se;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ae._jsonSchemaVersion="firestore/timestamp/1.0",ae._jsonSchema={type:re("string",ae._jsonSchemaVersion),seconds:re("number"),nanoseconds:re("number")};class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new ae(0,0))}static max(){return new ue(new ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const le=-1;class ce{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function he(e){return e.fields.find(e=>2===e.kind)}function de(e){return e.fields.filter(e=>2!==e.kind)}function fe(e,t){let n=L(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=pe(e.fields[r],t.fields[r]),0!==n)return n;return L(e.fields.length,t.fields.length)}ce.UNKNOWN_ID=-1;class me{constructor(e,t){this.fieldPath=e,this.kind=t}}function pe(e,t){const n=H.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:L(e.kind,t.kind)}class ge{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ge(0,ve.min())}}function ye(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(1e9===r?new ae(n+1,0):new ae(n,r));return new ve(i,K.empty(),t)}function be(e){return new ve(e.readTime,e.key,le)}class ve{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ve(ue.min(),K.empty(),le)}static max(){return new ve(ue.max(),K.empty(),le)}}function _e(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=K.comparator(e.documentKey,t.documentKey),0!==n?n:L(e.largestBatchId,t.largestBatchId))}const we="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ee{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ie(e){if(e.code!==I.FAILED_PRECONDITION||e.message!==we)throw e;p("LocalStore","Unexpectedly lost primary lease")}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&v(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(e){return Ne.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,n)=>{t(e)})}static reject(e){return new Ne((t,n)=>{n(e)})}static waitFor(e){return new Ne((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ne.resolve(!1);for(const n of e)t=t.next(e=>e?Ne.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ne((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const u=a;t(e[u]).next(e=>{s[u]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Ne((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}const Se="SimpleDb";class Te{static open(e,t,n,r){try{return new Te(t,e.transaction(r,n))}catch(e){throw new Ae(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new S,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ae(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=Me(t.target.error);this.S.reject(new Ae(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(p(Se,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Re(t)}}class ke{static delete(e){return p(Se,"Removing database:",e),De(o.getGlobal().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!o.isIndexedDBAvailable())return!1;if(ke.F())return!0;const e=o.getUA(),t=ke.M(e),n=0<t&&t<10,r=Ce(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){return"undefined"!=typeof process&&"YES"===process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,12.2===ke.M(o.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(p(Se,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ae(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new N(I.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new N(I.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ae(e,r))},r.onupgradeneeded=e=>{p(Se,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next(()=>{p(Se,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.L(e);const t=Te.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),Ne.reject(e))).toPromise();return s.catch(()=>{}),await t.D,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(p(Se,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ce(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class xe{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return De(this.U.delete())}}class Ae extends N{constructor(e,t){super(I.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pe(e){return"IndexedDbTransactionError"===e.name}class Re{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(p(Se,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(p(Se,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),De(n)}add(e){return p(Se,"ADD",this.store.name,e,e),De(this.store.add(e))}get(e){return De(this.store.get(e)).next(t=>(void 0===t&&(t=null),p(Se,"GET",this.store.name,e,t),t))}delete(e){return p(Se,"DELETE",this.store.name,e),De(this.store.delete(e))}count(){return p(Se,"COUNT",this.store.name),De(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Ne((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.H(e,(e,n)=>{t.push(n)}).next(()=>t)}}Y(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ne((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Z(e,t){p(Se,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,(e,t,n)=>n.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}te(e){const t=this.cursor({});return new Ne((n,r)=>{t.onerror=e=>{const t=Me(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}H(e,t){const n=[];return new Ne((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new xe(i),o=t(i.primaryKey,i.value,s);if(o instanceof Ne){const e=o.catch(e=>(s.done(),Ne.reject(e)));n.push(e)}s.isDone?r():null===s.G?i.continue():i.continue(s.G)}}).next(()=>Ne.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function De(e){return new Ne((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Me(e.target.error);n(t)}})}let Oe=!1;function Me(e){const t=ke.M(o.getUA());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new N("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oe||(Oe=!0,setTimeout(()=>{throw e},0)),e}}return e}const Le="IndexBackfiller";class Fe{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){p(Le,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.ne.ie();p(Le,`Documents written: ${e}`)}catch(e){Pe(e)?p(Le,"Ignoring IndexedDB error during index backfill: ",e):await Ie(e)}await this.re(6e4)})}}class Ue{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let r=t,i=!0;return Ne.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return p(Le,`Processing collection: ${t}`),this.oe(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this._e(r,n)).next(n=>(p(Le,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}_e(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=be(t);_e(r,n)>0&&(n=r)}),new ve(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ve{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ve.ce=-1;const ze=-1;function Be(e){return null==e}function je(e){return 0===e&&1/e==-1/0}function qe(e){return"number"==typeof e&&Number.isInteger(e)&&!je(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const $e="";function We(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=He(t)),t=Ge(e.get(n),t);return He(t)}function Ge(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case $e:n+="";break;default:n+=r}}return n}function He(e){return e+$e+""}function Ke(e){const t=e.length;if(w(t>=2,64408,{path:e}),2===t)return w(e.charAt(0)===$e&&""===e.charAt(1),56145,{path:e}),W.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf($e,s);switch((t<0||t>n)&&v(50515,{path:e}),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:v(61167,{path:e})}s=t+2}return new W(r)}const Qe="remoteDocuments",Je="owner",Ye="owner",Xe="mutationQueues",Ze="mutations",et="batchId",tt="userMutationsIndex",nt=["userId","batchId"];function rt(e,t){return[e,We(t)]}function it(e,t,n){return[e,We(t),n]}const st={},ot="documentMutations",at="remoteDocumentsV14",ut=["prefixPath","collectionGroup","readTime","documentId"],lt="documentKeyIndex",ct=["prefixPath","collectionGroup","documentId"],ht="collectionGroupIndex",dt=["collectionGroup","readTime","prefixPath","documentId"],ft="remoteDocumentGlobal",mt="remoteDocumentGlobalKey",pt="targets",gt="queryTargetsIndex",yt=["canonicalId","targetId"],bt="targetDocuments",vt=["targetId","path"],_t="documentTargetsIndex",wt=["path","targetId"],Et="targetGlobalKey",It="targetGlobal",Nt="collectionParents",St=["collectionId","parent"],Tt="clientMetadata",kt="bundles",Ct="namedQueries",xt="indexConfiguration",At="collectionGroupIndex",Pt="indexState",Rt=["indexId","uid"],Dt="sequenceNumberIndex",Ot=["uid","sequenceNumber"],Mt="indexEntries",Lt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ft="documentKeyIndex",Ut=["indexId","uid","orderedDocumentKey"],Vt="documentOverlays",zt=["userId","collectionPath","documentId"],Bt="collectionPathOverlayIndex",jt=["userId","collectionPath","largestBatchId"],qt="collectionGroupOverlayIndex",$t=["userId","collectionGroup","largestBatchId"],Wt="globals",Gt=[Xe,Ze,ot,Qe,pt,Je,It,bt,Tt,ft,Nt,kt,Ct],Ht=[...Gt,Vt],Kt=[Xe,Ze,ot,at,pt,Je,It,bt,Tt,ft,Nt,kt,Ct,Vt],Qt=Kt,Jt=[...Qt,xt,Pt,Mt],Yt=Jt,Xt=[...Jt,Wt],Zt=Xt;class en extends Ee{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(e,t){const n=E(e);return ke.O(n.le,t)}function nn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sn(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function on(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class an{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new an(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new un(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new un(this.root,e,this.comparator,!1)}getReverseIterator(){return new un(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new un(this.root,e,this.comparator,!0)}}class un{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ln.RED,this.left=null!=r?r:ln.EMPTY,this.right=null!=i?i:ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ln(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ln.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw v(43730,{key:this.key,value:this.value});if(this.right.isRed())throw v(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw v(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1,ln.EMPTY=new class{constructor(){this.size=0}get key(){throw v(57766)}get value(){throw v(16141)}get color(){throw v(16727)}get left(){throw v(29726)}get right(){throw v(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hn(this.data.getIterator())}getIteratorFrom(e){return new hn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof cn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class hn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dn(e){return e.hasNext()?e.getNext():void 0}class fn{constructor(e){this.fields=e,e.sort(H.comparator)}static empty(){return new fn([])}unionWith(e){let t=new cn(H.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return B(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class mn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new mn("Invalid base64 string: "+e):e}}(e);return new pn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return L(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const gn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yn(e){if(w(!!e,39018),"string"==typeof e){let t=0;const n=gn.exec(e);if(w(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bn(e.seconds),nanos:bn(e.nanos)}}function bn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function vn(e){return"string"==typeof e?pn.fromBase64String(e):pn.fromUint8Array(e)}const _n="server_timestamp",wn="__type__",En="__previous_value__",In="__local_write_time__";function Nn(e){const t=(e?.mapValue?.fields||{})[wn]?.stringValue;return t===_n}function Sn(e){const t=e.mapValue.fields[En];return Nn(t)?Sn(t):t}function Tn(e){const t=yn(e.mapValue.fields[In].timestampValue);return new ae(t.seconds,t.nanos)}class kn{constructor(e,t,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=u,this.isUsingEmulator=l}}const Cn="(default)";class xn{constructor(e,t){this.projectId=e,this.database=t||Cn}static empty(){return new xn("","")}get isDefaultDatabase(){return this.database===Cn}isEqual(e){return e instanceof xn&&e.projectId===this.projectId&&e.database===this.database}}const An="__type__",Pn="__max__",Rn={mapValue:{fields:{__type__:{stringValue:Pn}}}},Dn="__vector__",On="value",Mn={nullValue:"NULL_VALUE"};function Ln(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nn(e)?4:Zn(e)?9007199254740991:Yn(e)?10:11:v(28295,{value:e})}function Fn(e,t){if(e===t)return!0;const n=Ln(e);if(n!==Ln(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Tn(e).isEqual(Tn(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=yn(e.timestampValue),r=yn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return vn(e.bytesValue).isEqual(vn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return bn(e.geoPointValue.latitude)===bn(t.geoPointValue.latitude)&&bn(e.geoPointValue.longitude)===bn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return bn(e.integerValue)===bn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=bn(e.doubleValue),r=bn(t.doubleValue);return n===r?je(n)===je(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return B(e.arrayValue.values||[],t.arrayValue.values||[],Fn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(nn(n)!==nn(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Fn(n[e],r[e])))return!1;return!0}(e,t);default:return v(52216,{left:e})}}function Un(e,t){return void 0!==(e.values||[]).find(e=>Fn(e,t))}function Vn(e,t){if(e===t)return 0;const n=Ln(e),r=Ln(t);if(n!==r)return L(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return L(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=bn(e.integerValue||e.doubleValue),r=bn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zn(e.timestampValue,t.timestampValue);case 4:return zn(Tn(e),Tn(t));case 5:return F(e.stringValue,t.stringValue);case 6:return function(e,t){const n=vn(e),r=vn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=L(n[e],r[e]);if(0!==t)return t}return L(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=L(bn(e.latitude),bn(t.latitude));return 0!==n?n:L(bn(e.longitude),bn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Bn(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},i=n[On]?.arrayValue,s=r[On]?.arrayValue,o=L(i?.values?.length||0,s?.values?.length||0);return 0!==o?o:Bn(i,s)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Rn.mapValue&&t===Rn.mapValue)return 0;if(e===Rn.mapValue)return 1;if(t===Rn.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=F(r[e],s[e]);if(0!==t)return t;const o=Vn(n[r[e]],i[s[e]]);if(0!==o)return o}return L(r.length,s.length)}(e.mapValue,t.mapValue);default:throw v(23264,{he:n})}}function zn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return L(e,t);const n=yn(e),r=yn(t),i=L(n.seconds,r.seconds);return 0!==i?i:L(n.nanos,r.nanos)}function Bn(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Vn(n[e],r[e]);if(t)return t}return L(n.length,r.length)}function jn(e){return qn(e)}function qn(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=yn(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return vn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return K.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=qn(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${qn(e.fields[i])}`;return n+"}"}(e.mapValue):v(61005,{value:e})}function $n(e){switch(Ln(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Sn(e);return t?16+$n(t):16;case 5:return 2*e.stringValue.length;case 6:return vn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+$n(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return rn(e.fields,(e,n)=>{t+=e.length+$n(n)}),t}(e.mapValue);default:throw v(13486,{value:e})}}function Wn(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Gn(e){return!!e&&"integerValue"in e}function Hn(e){return!!e&&"arrayValue"in e}function Kn(e){return!!e&&"nullValue"in e}function Qn(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jn(e){return!!e&&"mapValue"in e}function Yn(e){const t=(e?.mapValue?.fields||{})[An]?.stringValue;return t===Dn}function Xn(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return rn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Xn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Xn(e.arrayValue.values[n]);return t}return{...e}}function Zn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Pn}const er={mapValue:{fields:{[An]:{stringValue:Dn},[On]:{arrayValue:{}}}}};function tr(e){return"nullValue"in e?Mn:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Wn(xn.empty(),K.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Yn(e)?er:{mapValue:{}}:v(35942,{value:e})}function nr(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Wn(xn.empty(),K.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?er:"mapValue"in e?Yn(e)?{mapValue:{}}:Rn:v(61959,{value:e})}function rr(e,t){const n=Vn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ir(e,t){const n=Vn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xn(t)}setAll(e){let t=H.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Xn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Jn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jn(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){rn(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new sr(Xn(this.value))}}function or(e){const t=[];return rn(e.fields,(e,n)=>{const r=new H([e]);if(Jn(n)){const e=or(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new fn(t)}class ar{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ar(e,0,ue.min(),ue.min(),ue.min(),sr.empty(),0)}static newFoundDocument(e,t,n,r){return new ar(e,1,t,ue.min(),n,r,0)}static newNoDocument(e,t){return new ar(e,2,t,ue.min(),ue.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,ue.min(),ue.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ur{constructor(e,t){this.position=e,this.inclusive=t}}function lr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?K.comparator(K.fromName(o.referenceValue),n.key):Vn(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function cr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Fn(e.position[n],t.position[n]))return!1;return!0}class hr{constructor(e,t="asc"){this.field=e,this.dir=t}}function dr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class fr{}class mr extends fr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Nr(e,t,n):"array-contains"===t?new Cr(e,n):"in"===t?new xr(e,n):"not-in"===t?new Ar(e,n):"array-contains-any"===t?new Pr(e,n):new mr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Sr(e,n):new Tr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Vn(t,this.value)):null!==t&&Ln(this.value)===Ln(t)&&this.matchesComparison(Vn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends fr{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pr(e,t)}matches(e){return gr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gr(e){return"and"===e.op}function yr(e){return"or"===e.op}function br(e){return vr(e)&&gr(e)}function vr(e){for(const t of e.filters)if(t instanceof pr)return!1;return!0}function _r(e){if(e instanceof mr)return e.field.canonicalString()+e.op.toString()+jn(e.value);if(br(e))return e.filters.map(e=>_r(e)).join(",");{const t=e.filters.map(e=>_r(e)).join(",");return`${e.op}(${t})`}}function wr(e,t){return e instanceof mr?function(e,t){return t instanceof mr&&e.op===t.op&&e.field.isEqual(t.field)&&Fn(e.value,t.value)}(e,t):e instanceof pr?function(e,t){return t instanceof pr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&wr(n,t.filters[r]),!0)}(e,t):void v(19439)}function Er(e,t){const n=e.filters.concat(t);return pr.create(n,e.op)}function Ir(e){return e instanceof mr?function(e){return`${e.field.canonicalString()} ${e.op} ${jn(e.value)}`}(e):e instanceof pr?function(e){return e.op.toString()+" {"+e.getFilters().map(Ir).join(" ,")+"}"}(e):"Filter"}class Nr extends mr{constructor(e,t,n){super(e,t,n),this.key=K.fromName(n.referenceValue)}matches(e){const t=K.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sr extends mr{constructor(e,t){super(e,"in",t),this.keys=kr(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Tr extends mr{constructor(e,t){super(e,"not-in",t),this.keys=kr(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kr(e,t){return(t.arrayValue?.values||[]).map(e=>K.fromName(e.referenceValue))}class Cr extends mr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hn(t)&&Un(t.arrayValue,this.value)}}class xr extends mr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Un(this.value.arrayValue,t)}}class Ar extends mr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Un(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Un(this.value.arrayValue,t)}}class Pr extends mr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hn(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Un(this.value.arrayValue,e))}}class Rr{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function Dr(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Rr(e,t,n,r,i,s,o)}function Or(e){const t=E(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>_r(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Be(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>jn(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>jn(e)).join(",")),t.Te=e}return t.Te}function Mr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cr(e.startAt,t.startAt)&&cr(e.endAt,t.endAt)}function Lr(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Fr(e,t){return e.filters.filter(e=>e instanceof mr&&e.field.isEqual(t))}function Ur(e,t,n){let r=Mn,i=!0;for(const n of Fr(e,t)){let e=Mn,t=!0;switch(n.op){case"<":case"<=":e=tr(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=Mn}rr({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];rr({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Vr(e,t,n){let r=Rn,i=!0;for(const n of Fr(e,t)){let e=Rn,t=!0;switch(n.op){case">=":case">":e=nr(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=Rn}ir({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ir({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class zr{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Br(e,t,n,r,i,s,o,a){return new zr(e,t,n,r,i,s,o,a)}function jr(e){return new zr(e)}function qr(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $r(e){return null!==e.collectionGroup}function Wr(e){const t=E(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new cn(H.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new hr(r,n))}),e.has(H.keyField().canonicalString())||t.Ie.push(new hr(H.keyField(),n))}return t.Ie}function Gr(e){const t=E(e);return t.Ee||(t.Ee=Kr(t,Wr(e))),t.Ee}function Hr(e){const t=E(e);return t.de||(t.de=Kr(t,e.explicitOrderBy)),t.de}function Kr(e,t){if("F"===e.limitType)return Dr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new hr(e.field,t)});const n=e.endAt?new ur(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ur(e.startAt.position,e.startAt.inclusive):null;return Dr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Qr(e,t){const n=e.filters.concat([t]);return new zr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Jr(e,t,n){return new zr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yr(e,t){return Mr(Gr(e),Gr(t))&&e.limitType===t.limitType}function Xr(e){return`${Or(Gr(e))}|lt:${e.limitType}`}function Zr(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Ir(e)).join(", ")}]`),Be(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>jn(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>jn(e)).join(",")),`Target(${t})`}(Gr(e))}; limitType=${e.limitType})`}function ei(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):K.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Wr(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=lr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wr(e),t)||e.endAt&&!function(e,t,n){const r=lr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wr(e),t))}(e,t)}function ti(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ni(e){return(t,n)=>{let r=!1;for(const i of Wr(e)){const e=ri(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ri(e,t,n){const r=e.field.isKeyField()?K.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vn(r,i):v(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v(19790,{direction:e.dir})}}class ii{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rn(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return on(this.inner)}size(){return this.innerSize}}const si=new an(K.comparator);function oi(){return si}const ai=new an(K.comparator);function ui(...e){let t=ai;for(const n of e)t=t.insert(n.key,n);return t}function li(e){let t=ai;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ci(){return di()}function hi(){return di()}function di(){return new ii(e=>e.toString(),(e,t)=>e.isEqual(t))}const fi=new an(K.comparator),mi=new cn(K.comparator);function pi(...e){let t=mi;for(const n of e)t=t.add(n);return t}const gi=new cn(L);function yi(){return gi}function bi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:je(t)?"-0":t}}function vi(e){return{integerValue:""+e}}function _i(e,t){return qe(t)?vi(t):bi(e,t)}class wi{constructor(){this._=void 0}}function Ei(e,t,n){return e instanceof Si?function(e,t){const n={fields:{[wn]:{stringValue:_n},[In]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nn(t)&&(t=Sn(t)),t&&(n.fields[En]=t),{mapValue:n}}(n,t):e instanceof Ti?ki(e,t):e instanceof Ci?xi(e,t):function(e,t){const n=Ni(e,t),r=Pi(n)+Pi(e.Ae);return Gn(n)&&Gn(e.Ae)?vi(r):bi(e.serializer,r)}(e,t)}function Ii(e,t,n){return e instanceof Ti?ki(e,t):e instanceof Ci?xi(e,t):n}function Ni(e,t){return e instanceof Ai?function(e){return Gn(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Si extends wi{}class Ti extends wi{constructor(e){super(),this.elements=e}}function ki(e,t){const n=Ri(t);for(const t of e.elements)n.some(e=>Fn(e,t))||n.push(t);return{arrayValue:{values:n}}}class Ci extends wi{constructor(e){super(),this.elements=e}}function xi(e,t){let n=Ri(t);for(const t of e.elements)n=n.filter(e=>!Fn(e,t));return{arrayValue:{values:n}}}class Ai extends wi{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Pi(e){return bn(e.integerValue||e.doubleValue)}function Ri(e){return Hn(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Di{constructor(e,t){this.field=e,this.transform=t}}class Oi{constructor(e,t){this.version=e,this.transformResults=t}}class Mi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Li(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Fi{}function Ui(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ki(e.key,Mi.none()):new qi(e.key,e.data,Mi.none());{const n=e.data,r=sr.empty();let i=new cn(H.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new $i(e.key,r,new fn(i.toArray()),Mi.none())}}function Vi(e,t,n){e instanceof qi?function(e,t,n){const r=e.value.clone(),i=Gi(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $i?function(e,t,n){if(!Li(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Gi(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wi(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zi(e,t,n,r){return e instanceof qi?function(e,t,n,r){if(!Li(e.precondition,t))return n;const i=e.value.clone(),s=Hi(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $i?function(e,t,n,r){if(!Li(e.precondition,t))return n;const i=Hi(e.fieldTransforms,r,t),s=t.data;return s.setAll(Wi(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Li(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bi(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ni(r.transform,e||null);null!=i&&(null===n&&(n=sr.empty()),n.set(r.field,i))}return n||null}function ji(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&B(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ti&&t instanceof Ti||e instanceof Ci&&t instanceof Ci?B(e.elements,t.elements,Fn):e instanceof Ai&&t instanceof Ai?Fn(e.Ae,t.Ae):e instanceof Si&&t instanceof Si}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class qi extends Fi{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $i extends Fi{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wi(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Gi(e,t,n){const r=new Map;w(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ii(o,a,n[i]))}return r}function Hi(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ei(e,s,t))}return r}class Ki extends Fi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qi extends Fi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ji{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Vi(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=zi(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=zi(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hi();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ui(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ue.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pi())}isEqual(e){return this.batchId===e.batchId&&B(this.mutations,e.mutations,(e,t)=>ji(e,t))&&B(this.baseMutations,e.baseMutations,(e,t)=>ji(e,t))}}class Yi{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){w(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=fi;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Yi(e,t,n,r)}}class Xi{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zi{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class es{constructor(e,t){this.count=e,this.unchangedNames=t}}var ts,ns;function rs(e){switch(e){case I.OK:return v(64938);case I.CANCELLED:case I.UNKNOWN:case I.DEADLINE_EXCEEDED:case I.RESOURCE_EXHAUSTED:case I.INTERNAL:case I.UNAVAILABLE:case I.UNAUTHENTICATED:return!1;case I.INVALID_ARGUMENT:case I.NOT_FOUND:case I.ALREADY_EXISTS:case I.PERMISSION_DENIED:case I.FAILED_PRECONDITION:case I.ABORTED:case I.OUT_OF_RANGE:case I.UNIMPLEMENTED:case I.DATA_LOSS:return!0;default:return v(15467,{code:e})}}function is(e){if(void 0===e)return g("GRPC error has no .code"),I.UNKNOWN;switch(e){case ts.OK:return I.OK;case ts.CANCELLED:return I.CANCELLED;case ts.UNKNOWN:return I.UNKNOWN;case ts.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case ts.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case ts.INTERNAL:return I.INTERNAL;case ts.UNAVAILABLE:return I.UNAVAILABLE;case ts.UNAUTHENTICATED:return I.UNAUTHENTICATED;case ts.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case ts.NOT_FOUND:return I.NOT_FOUND;case ts.ALREADY_EXISTS:return I.ALREADY_EXISTS;case ts.PERMISSION_DENIED:return I.PERMISSION_DENIED;case ts.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case ts.ABORTED:return I.ABORTED;case ts.OUT_OF_RANGE:return I.OUT_OF_RANGE;case ts.UNIMPLEMENTED:return I.UNIMPLEMENTED;case ts.DATA_LOSS:return I.DATA_LOSS;default:return v(39323,{code:e})}}(ns=ts||(ts={}))[ns.OK=0]="OK",ns[ns.CANCELLED=1]="CANCELLED",ns[ns.UNKNOWN=2]="UNKNOWN",ns[ns.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ns[ns.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ns[ns.NOT_FOUND=5]="NOT_FOUND",ns[ns.ALREADY_EXISTS=6]="ALREADY_EXISTS",ns[ns.PERMISSION_DENIED=7]="PERMISSION_DENIED",ns[ns.UNAUTHENTICATED=16]="UNAUTHENTICATED",ns[ns.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ns[ns.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ns[ns.ABORTED=10]="ABORTED",ns[ns.OUT_OF_RANGE=11]="OUT_OF_RANGE",ns[ns.UNIMPLEMENTED=12]="UNIMPLEMENTED",ns[ns.INTERNAL=13]="INTERNAL",ns[ns.UNAVAILABLE=14]="UNAVAILABLE",ns[ns.DATA_LOSS=15]="DATA_LOSS";let ss=null;function os(){return new TextEncoder}const as=new a.Integer([4294967295,4294967295],0);function us(e){const t=os().encode(e),n=new a.Md5;return n.update(t),new Uint8Array(n.digest())}function ls(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new a.Integer([n,r],0),new a.Integer([i,s],0)]}class cs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hs(`Invalid padding: ${t}`);if(n<0)throw new hs(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new hs(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new hs(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=a.Integer.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(a.Integer.fromNumber(n)));return 1===r.compare(as)&&(r=new a.Integer([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=us(e),[n,r]=ls(t);for(let e=0;e<this.hashCount;e++){const t=this.ye(n,r,e);if(!this.we(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new cs(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=us(e),[n,r]=ls(t);for(let e=0;e<this.hashCount;e++){const t=this.ye(n,r,e);this.Se(t)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ds{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ds(ue.min(),r,new an(L),oi(),pi())}}class fs{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fs(n,t,pi(),pi(),pi())}}class ms{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ps{constructor(e,t){this.targetId=e,this.Ce=t}}class gs{constructor(e,t,n=pn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ys{constructor(){this.ve=0,this.Fe=_s(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pi(),t=pi(),n=pi();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v(38017,{changeType:i})}}),new fs(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=_s()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,w(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bs{constructor(e){this.Ge=e,this.ze=new Map,this.je=oi(),this.Je=vs(),this.He=vs(),this.Ye=new an(L)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:v(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Lr(i))if(0===n){const e=new K(i.path);this.et(t,e,ar.newNoDocument(e,ue.min()))}else w(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}ss?.lt(function(e,t,n,r,i){const s={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(s.bloomFilter={applied:0===i,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),s}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=vn(n).toUint8Array()}catch(e){if(e instanceof mn)return y("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new cs(s,r,i)}catch(e){return y(e instanceof hs?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Lr(i.target)){const t=new K(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ar.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=pi();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ds(e,t,this.Ye,this.je,n);return this.je=oi(),this.Je=vs(),this.He=vs(),this.Ye=new an(L),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ys,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new cn(L),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new cn(L),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||p("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ys),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function vs(){return new an(K.comparator)}function _s(){return new an(K.comparator)}const ws={asc:"ASCENDING",desc:"DESCENDING"},Es={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Is={and:"AND",or:"OR"};class Ns{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ss(e,t){return e.useProto3Json||Be(t)?t:{value:t}}function Ts(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ks(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Cs(e,t){return Ts(e,t.toTimestamp())}function xs(e){return w(!!e,49232),ue.fromTimestamp(function(e){const t=yn(e);return new ae(t.seconds,t.nanos)}(e))}function As(e,t){return Ps(e,t).canonicalString()}function Ps(e,t){const n=function(e){return new W(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Rs(e){const t=W.fromString(e);return w(to(t),10190,{key:t.toString()}),t}function Ds(e,t){return As(e.databaseId,t.path)}function Os(e,t){const n=Rs(t);if(n.get(1)!==e.databaseId.projectId)throw new N(I.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new N(I.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(Us(n))}function Ms(e,t){return As(e.databaseId,t)}function Ls(e){const t=Rs(e);return 4===t.length?W.emptyPath():Us(t)}function Fs(e){return new W(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Us(e){return w(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Vs(e,t,n){return{name:Ds(e,t),fields:n.value.mapValue.fields}}function zs(e,t,n){const r=Os(e,t.name),i=xs(t.updateTime),s=t.createTime?xs(t.createTime):ue.min(),o=new sr({mapValue:{fields:t.fields}}),a=ar.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Bs(e,t){let n;if(t instanceof qi)n={update:Vs(e,t.key,t.value)};else if(t instanceof Ki)n={delete:Ds(e,t.key)};else if(t instanceof $i)n={update:Vs(e,t.key,t.data),updateMask:eo(t.fieldMask)};else{if(!(t instanceof Qi))return v(16599,{Vt:t.type});n={verify:Ds(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Si)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ti)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ci)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ai)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw v(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v(27497)}(e,t.precondition)),n}function js(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Mi.updateTime(xs(e.updateTime)):void 0!==e.exists?Mi.exists(e.exists):Mi.none()}(t.currentDocument):Mi.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)w("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new Si;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ti(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ci(e)}else"increment"in t?n=new Ai(e,t.increment):v(16584,{proto:t});const r=H.fromServerFormat(t.fieldPath);return new Di(r,n)}(e,t)):[];if(t.update){t.update.name;const i=Os(e,t.update.name),s=new sr({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new fn(t.map(e=>H.fromServerFormat(e)))}(t.updateMask);return new $i(i,s,e,n,r)}return new qi(i,s,n,r)}if(t.delete){const r=Os(e,t.delete);return new Ki(r,n)}if(t.verify){const r=Os(e,t.verify);return new Qi(r,n)}return v(1463,{proto:t})}function qs(e,t){return{documents:[Ms(e,t.path)]}}function $s(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ms(e,i);const s=function(e){if(0!==e.length)return Zs(pr.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ys(e.field),direction:Ks(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ss(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Ws(e,t,n,r){const{ft:i,parent:s}=$s(e,t),o={},a=[];let u=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+u++;o[t]=e.alias,"count"===e.aggregateType?a.push({alias:t,count:{}}):"avg"===e.aggregateType?a.push({alias:t,avg:{field:Ys(e.fieldPath)}}):"sum"===e.aggregateType&&a.push({alias:t,sum:{field:Ys(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function Gs(e){let t=Ls(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){w(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Hs(e);return t instanceof pr&&br(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new hr(Xs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Be(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new ur(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new ur(n,t)}(n.endAt)),Br(t,i,o,s,a,"F",u,l)}function Hs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xs(e.unaryFilter.field);return mr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Xs(e.unaryFilter.field);return mr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xs(e.unaryFilter.field);return mr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Xs(e.unaryFilter.field);return mr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return v(61313);default:return v(60726)}}(e):void 0!==e.fieldFilter?function(e){return mr.create(Xs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return v(58110);default:return v(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return pr.create(e.compositeFilter.filters.map(e=>Hs(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return v(1026)}}(e.compositeFilter.op))}(e):v(30097,{filter:e})}function Ks(e){return ws[e]}function Qs(e){return Es[e]}function Js(e){return Is[e]}function Ys(e){return{fieldPath:e.canonicalString()}}function Xs(e){return H.fromServerFormat(e.fieldPath)}function Zs(e){return e instanceof mr?function(e){if("=="===e.op){if(Qn(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NAN"}};if(Kn(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qn(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NOT_NAN"}};if(Kn(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(e.field),op:Qs(e.op),value:e.value}}}(e):e instanceof pr?function(e){const t=e.getFilters().map(e=>Zs(e));return 1===t.length?t[0]:{compositeFilter:{op:Js(e.op),filters:t}}}(e):v(54877,{filter:e})}function eo(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function to(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class no{constructor(e,t,n,r,i=ue.min(),s=ue.min(),o=pn.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ro{constructor(e){this.yt=e}}function io(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:so(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ds(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ts(e,t.version.toTimestamp()),createTime:Ts(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:oo(t.version)};else{if(!t.isUnknownDocument())return v(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:oo(t.version)}}return r}function so(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function oo(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ao(e){const t=new ae(e.seconds,e.nanoseconds);return ue.fromTimestamp(t)}function uo(e,t){const n=(t.baseMutations||[]).map(t=>js(e.yt,t));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map(t=>js(e.yt,t)),i=ae.fromMillis(t.localWriteTimeMs);return new Ji(t.batchId,i,n,r)}function lo(e){const t=ao(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ao(e.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return w(1===t,1966,{count:t}),Gr(jr(Ls(e.documents[0])))}(e.query):function(e){return Gr(Gs(e))}(e.query),new no(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,pn.fromBase64String(e.resumeToken))}function co(e,t){const n=oo(t.snapshotVersion),r=oo(t.lastLimboFreeSnapshotVersion);let i;i=Lr(t.target)?qs(e.yt,t.target):$s(e.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Or(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ho(e){const t=Gs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Jr(t,t.limit,"L"):t}function fo(e,t){return new Xi(t.largestBatchId,js(e.yt,t.overlayMutation))}function mo(e,t){const n=t.path.lastSegment();return[e,We(t.path.popLast()),n]}function po(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:oo(r.readTime),documentKey:We(r.documentKey.path),largestBatchId:r.largestBatchId}}class go{getBundleMetadata(e,t){return yo(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:ao(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return yo(e).put(function(e){return{bundleId:e.id,createTime:oo(xs(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return bo(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:ho(e.bundledQuery),readTime:ao(e.readTime)}}(e)})}saveNamedQuery(e,t){return bo(e).put(function(e){return{name:e.name,readTime:oo(xs(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function yo(e){return tn(e,kt)}function bo(e){return tn(e,Ct)}class vo{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new vo(e,n)}getOverlay(e,t){return _o(e).get(mo(this.userId,t)).next(e=>e?fo(this.serializer,e):null)}getOverlays(e,t){const n=ci();return Ne.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new Xi(t,i);r.push(this.St(e,s))}),Ne.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(We(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(_o(e).Z(Bt,r))}),Ne.waitFor(i)}getOverlaysForCollection(e,t,n){const r=ci(),i=We(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _o(e).J(Bt,s).next(e=>{for(const t of e){const e=fo(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=ci();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _o(e).ee({index:qt,range:o},(e,t,n)=>{const o=fo(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}St(e,t){return _o(e).put(function(e,t,n){const[r,i,s]=mo(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Bs(e.yt,n.mutation)}}(this.serializer,this.userId,t))}}function _o(e){return tn(e,Vt)}class wo{bt(e){return tn(e,Wt)}getSessionToken(e){return this.bt(e).get("sessionToken").next(e=>{const t=e?.value;return t?pn.fromUint8Array(t):pn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Eo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bn(e.integerValue));else if("doubleValue"in e){const n=bn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),je(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=yn(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(vn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Zn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Yn(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):v(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=On,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(bn(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),K.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Eo.Kt=new Eo;const Io=255;function No(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function So(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=No(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class To{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{const e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){const t=this.en(e),n=So(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}nn(e){const t=this.en(e),n=So(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}rn(){this.sn(Io),this.sn(255)}_n(){this.an(Io),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Gt(e){const t=255&e;0===t?(this.sn(0),this.sn(255)):t===Io?(this.sn(Io),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;0===t?(this.an(0),this.an(255)):t===Io?(this.an(Io),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class ko{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Co{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class xo{constructor(){this.cn=new To,this.ln=new ko(this.cn),this.hn=new Co(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return 0===e?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ao{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Ao(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Do(this.En),directionalValue:Do(this.dn),orderedDocumentKey:Do(t),documentKey:n.path.toArray()}}Vn(e,t,n){const r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Po(e,t){let n=e.Tn-t.Tn;return 0!==n?n:(n=Ro(e.En,t.En),0!==n?n:(n=Ro(e.dn,t.dn),0!==n?n:K.comparator(e.In,t.In)))}function Ro(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function Do(e){return o.isSafariOrWebkit()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Oo(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class Mo{constructor(e){this.mn=new cn((e,t)=>H.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(w(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=he(e);if(void 0!==t&&!this.wn(t))return!1;const n=de(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.wn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){const e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.Sn(e,t)||!this.bn(this.fn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.fn.length||!this.bn(this.fn[s++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new cn(H.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new me(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new me(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new me(n.field,"asc"===n.dir?0:1)));return new ce(ce.UNKNOWN_ID,this.collectionId,t,ge.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Lo(e){if(w(e instanceof mr||e instanceof pr,20012),e instanceof mr){if(e instanceof xr){const t=e.value.arrayValue?.values?.map(t=>mr.create(e.field,"==",t))||[];return pr.create(t,"or")}return e}const t=e.filters.map(e=>Lo(e));return pr.create(t,e.op)}function Fo(e){if(0===e.getFilters().length)return[];const t=Bo(Lo(e));return w(zo(t),7391),Uo(t)||Vo(t)?[t]:t.getFilters()}function Uo(e){return e instanceof mr}function Vo(e){return e instanceof pr&&br(e)}function zo(e){return Uo(e)||Vo(e)||function(e){if(e instanceof pr&&yr(e)){for(const t of e.getFilters())if(!Uo(t)&&!Vo(t))return!1;return!0}return!1}(e)}function Bo(e){if(w(e instanceof mr||e instanceof pr,34018),e instanceof mr)return e;if(1===e.filters.length)return Bo(e.filters[0]);const t=e.filters.map(e=>Bo(e));let n=pr.create(t,e.op);return n=$o(n),zo(n)?n:(w(n instanceof pr,64498),w(gr(n),40251),w(n.filters.length>1,57927),n.filters.reduce((e,t)=>jo(e,t)))}function jo(e,t){let n;return w(e instanceof mr||e instanceof pr,38388),w(t instanceof mr||t instanceof pr,25473),n=e instanceof mr?t instanceof mr?function(e,t){return pr.create([e,t],"and")}(e,t):qo(e,t):t instanceof mr?qo(t,e):function(e,t){if(w(e.filters.length>0&&t.filters.length>0,48005),gr(e)&&gr(t))return Er(e,t.getFilters());const n=yr(e)?e:t,r=yr(e)?t:e,i=n.filters.map(e=>jo(e,r));return pr.create(i,"or")}(e,t),$o(n)}function qo(e,t){if(gr(t))return Er(t,e.getFilters());{const n=t.filters.map(t=>jo(e,t));return pr.create(n,"or")}}function $o(e){if(w(e instanceof mr||e instanceof pr,11850),e instanceof mr)return e;const t=e.getFilters();if(1===t.length)return $o(t[0]);if(vr(e))return e;const n=t.map(e=>$o(e)),r=[];return n.forEach(t=>{t instanceof mr?r.push(t):t instanceof pr&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:pr.create(r,e.op)}class Wo{constructor(){this.Cn=new Go}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(ve.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(ve.min())}updateCollectionGroup(e,t,n){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class Go{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new cn(W.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new cn(W.comparator)).toArray()}}const Ho="IndexedDbIndexManager",Ko=new Uint8Array(0);class Qo{constructor(e,t){this.databaseId=t,this.vn=new Go,this.Fn=new ii(e=>Or(e),(e,t)=>Mr(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:n,parent:We(r)};return Jo(e).put(i)}return Ne.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[j(t),""],!1,!0);return Jo(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ke(r.parent))}return n})}addFieldIndex(e,t){const n=Xo(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Zo(e);return i.next(e=>{n.put(po(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=Xo(e),r=Zo(e),i=Yo(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Xo(e),n=Yo(e),r=Zo(e);return t.Z().next(()=>n.Z()).next(()=>r.Z())}createTargetIndexes(e,t){return Ne.forEach(this.Mn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Mo(t).Dn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=Yo(e);let r=!0;const i=new Map;return Ne.forEach(this.Mn(t),t=>this.xn(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=pi();const r=[];return Ne.forEach(i,(i,s)=>{p(Ho,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}(i)} to execute ${Or(t)}`);const o=function(e,t){const n=he(t);if(void 0===n)return null;for(const t of Fr(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of de(t))for(const t of Fr(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of de(t)){const t=0===i.kind?Ur(e,i.fieldPath,e.startAt):Vr(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ur(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of de(t)){const t=0===i.kind?Vr(e,i.fieldPath,e.endAt):Ur(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ur(n,r)}(s,i),c=this.On(i,s,u),h=this.On(i,s,l),d=this.Nn(i,s,a),f=this.Bn(i.indexId,o,c,u.inclusive,h,l.inclusive,d);return Ne.forEach(f,i=>n.Y(i,t.limit).next(t=>{t.forEach(t=>{const n=K.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Ne.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(t=0===e.filters.length?[e]:Fo(pr.create(e.filters,"and")).map(t=>Dr(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),u=a/(null!=t?t.length:1),l=[];for(let c=0;c<a;++c){const a=t?this.Ln(t[c/u]):Ko,h=this.kn(e,a,n[c%u],r),d=this.qn(e,a,i[c%u],s),f=o.map(t=>this.kn(e,a,t,!0));l.push(...this.createRange(h,d,f))}return l}kn(e,t,n,r){const i=new Ao(e,K.empty(),t,n);return r?i:i.An()}qn(e,t,n,r){const i=new Ao(e,K.empty(),t,n);return r?i.An():i}xn(e,t){const n=new Mo(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Mn(t);return Ne.forEach(r,t=>this.xn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new cn(H.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Qn(e,t){const n=new xo;for(const r of de(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Pn(r.kind);Eo.Kt.Dt(e,i)}return n.un()}Ln(e){const t=new xo;return Eo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new xo;return Eo.Kt.Dt(Wn(this.databaseId,t),n.Pn(function(e){const t=de(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(null===n)return[];let r=[];r.push(new xo);let i=0;for(const s of de(e)){const e=n[i++];for(const n of r)if(this.Un(t,s.fieldPath)&&Hn(e))r=this.Kn(r,s,e);else{const t=n.Pn(s.kind);Eo.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new xo;r.seed(n.un()),Eo.Kt.Dt(e,r.Pn(t.kind)),i.push(r)}return i}Un(e,t){return!!e.filters.find(e=>e instanceof mr&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Xo(e),r=Zo(e);return(t?n.J(At,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return Ne.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new ge(t.sequenceNumber,new ve(ao(t.readTime),new K(Ke(t.documentKey)),t.largestBatchId)):ge.empty(),r=e.fields.map(([e,t])=>new me(H.fromServerFormat(e),t));return new ce(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:L(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Xo(e),i=Zo(e);return this.Gn(e).next(e=>r.J(At,IDBKeyRange.bound(t,t)).next(t=>Ne.forEach(t,t=>i.put(po(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Ne.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?Ne.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),Ne.forEach(i,n=>this.zn(e,t,n).next(t=>{const i=this.jn(r,n);return t.isEqual(i)?Ne.resolve():this.Jn(e,r,n,t,i)}))))})}Hn(e,t,n,r){return Yo(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return Yo(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const r=Yo(e);let i=new cn(Po);return r.ee({index:Ft,range:IDBKeyRange.only([n.indexId,this.uid,Do(this.$n(n,t))])},(e,r)=>{i=i.add(new Ao(n.indexId,t,Oo(r.arrayValue),Oo(r.directionalValue)))}).next(()=>i)}jn(e,t){let n=new cn(Po);const r=this.Qn(t,e);if(null==r)return n;const i=he(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Hn(s))for(const i of s.arrayValue.values||[])n=n.add(new Ao(t.indexId,e.key,this.Ln(i),r))}else n=n.add(new Ao(t.indexId,e.key,Ko,r));return n}Jn(e,t,n,r,i){p(Ho,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=dn(s),u=dn(o);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=dn(o)):t?(i(a),a=dn(s)):(a=dn(s),u=dn(o))}}(r,i,Po,r=>{s.push(this.Hn(e,t,n,r))},r=>{s.push(this.Yn(e,t,n,r))}),Ne.waitFor(s)}Gn(e){let t=1;return Zo(e).ee({index:Dt,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Po(e,t)).filter((e,t,n)=>!t||0!==Po(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=Po(i,e),s=Po(i,t);if(0===n)r[0]=e.An();else if(n>0&&s<0)r.push(i),r.push(i.An());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.Zn(r[e],r[e+1]))return[];const t=r[e].Vn(this.uid,Ko,K.empty()),n=r[e+1].Vn(this.uid,Ko,K.empty());i.push(IDBKeyRange.bound(t,n))}return i}Zn(e,t){return Po(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ea)}getMinOffset(e,t){return Ne.mapArray(this.Mn(t),t=>this.xn(e,t).next(e=>e||v(44426))).next(ea)}}function Jo(e){return tn(e,Nt)}function Yo(e){return tn(e,Mt)}function Xo(e){return tn(e,xt)}function Zo(e){return tn(e,Pt)}function ea(e){w(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;_e(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ve(t.readTime,t.documentKey,n)}const ta={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},na=41943040;class ra{static withCacheSize(e){return new ra(e,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function ia(e,t,n){const r=e.store(Ze),i=e.store(ot),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.ee({range:o},(e,t,n)=>(a++,n.delete()));s.push(u.next(()=>{w(1===a,47070,{batchId:n.batchId})}));const l=[];for(const e of n.mutations){const r=it(t,e.key.path,n.batchId);s.push(i.delete(r)),l.push(e.key)}return Ne.waitFor(s).next(()=>l)}function sa(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v(14731);t=e.noDocument}return JSON.stringify(t).length}ra.DEFAULT_COLLECTION_PERCENTILE=10,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ra.DEFAULT=new ra(na,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ra.DISABLED=new ra(-1,0,0);class oa{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(e,t,n,r){w(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new oa(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).ee({index:tt,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=la(e),s=ua(e);return s.add({}).next(o=>{w("number"==typeof o,49019);const a=new Ji(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>Bs(e.yt,t)),i=n.mutations.map(t=>Bs(e.yt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let c=new cn((e,t)=>L(e.canonicalString(),t.canonicalString()));for(const e of r){const t=it(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),l.push(s.put(u)),l.push(i.put(t,st))}return c.forEach(t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Xn[o]=a.keys()}),Ne.waitFor(l).next(()=>a)})}lookupMutationBatch(e,t){return ua(e).get(t).next(e=>e?(w(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),uo(this.serializer,e)):null)}er(e,t){return this.Xn[t]?Ne.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Xn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ua(e).ee({index:tt,range:r},(e,t,r)=>{t.userId===this.userId&&(w(t.batchId>=n,47524,{tr:n}),i=uo(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=ze;return ua(e).ee({index:tt,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ze],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).J(tt,t).next(e=>e.map(e=>uo(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rt(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return la(e).ee({range:r},(n,r,s)=>{const[o,a,u]=n,l=Ke(a);if(o===this.userId&&t.path.isEqual(l))return ua(e).get(u).next(e=>{if(!e)throw v(61480,{nr:n,batchId:u});w(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:u}),i.push(uo(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new cn(L);const r=[];return t.forEach(t=>{const i=rt(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=la(e).ee({range:s},(e,r,i)=>{const[s,o,a]=e,u=Ke(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),Ne.waitFor(r).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=rt(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new cn(L);return la(e).ee({range:s},(e,t,i)=>{const[s,a,u]=e,l=Ke(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(u)):i.done()}).next(()=>this.rr(e,o))}rr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(ua(e).get(t).next(e=>{if(null===e)throw v(35274,{batchId:t});w(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(uo(this.serializer,e))}))}),Ne.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ia(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),Ne.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ne.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return la(e).ee({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Ke(e[1]);r.push(t)}else n.done()}).next(()=>{w(0===r.length,56720,{sr:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return aa(e,this.userId,t)}_r(e){return ca(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:ze,lastStreamToken:""})}}function aa(e,t,n){const r=rt(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return la(e).ee({range:s,X:!0},(e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function ua(e){return tn(e,Ze)}function la(e){return tn(e,ot)}function ca(e){return tn(e,Xe)}class ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ha(0)}static cr(){return new ha(-1)}}class da{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new ha(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(e=>ue.fromTimestamp(new ae(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fa(e).delete(t.targetId)).next(()=>this.lr(e)).next(t=>(w(t.targetCount>0,8065),t.targetCount-=1,this.hr(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return fa(e).ee((s,o)=>{const a=lo(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>Ne.waitFor(i)).next(()=>r)}forEachTarget(e,t){return fa(e).ee((e,n)=>{const r=lo(n);t(r)})}lr(e){return ma(e).get(Et).next(e=>(w(null!==e,2888),e))}hr(e,t){return ma(e).put(Et,t)}Pr(e,t){return fa(e).put(co(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Or(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return fa(e).ee({range:r,index:gt},(e,n,r)=>{const s=lo(n);Mr(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=pa(e);return t.forEach(t=>{const s=We(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),Ne.waitFor(r)}removeMatchingKeys(e,t,n){const r=pa(e);return Ne.forEach(t,t=>{const i=We(t.path);return Ne.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=pa(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=pa(e);let i=pi();return r.ee({range:n,X:!0},(e,t,n)=>{const r=Ke(e[1]),s=new K(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=We(t.path),r=IDBKeyRange.bound([n],[j(n)],!1,!0);let i=0;return pa(e).ee({index:_t,X:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}At(e,t){return fa(e).get(t).next(e=>e?lo(e):null)}}function fa(e){return tn(e,pt)}function ma(e){return tn(e,It)}function pa(e){return tn(e,bt)}const ga="LruGarbageCollector",ya=1048576;function ba([e,t],[n,r]){const i=L(e,n);return 0===i?L(t,r):i}class va{constructor(e){this.Ir=e,this.buffer=new cn(ba),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ba(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _a{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){p(ga,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pe(e)?p(ga,"Ignoring IndexedDB error during garbage collection: ",e):await Ie(e)}await this.Vr(3e5)})}}class wa{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ne.resolve(Ve.ce);const n=new va(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(ta)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ta):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),m()<=s.LogLevel.DEBUG&&p("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(u-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-u)+"ms\n"+`Total Duration: ${l-c}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Ea(e,t){return new wa(e,t)}class Ia{constructor(e,t){this.db=e,this.garbageCollector=Ea(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(e,n)=>t(n))}addReference(e,t,n){return Na(e,n)}removeReference(e,t,n){return Na(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Na(e,t)}br(e,t){return function(e,t){let n=!1;return ca(e).te(r=>aa(e,r,t).next(e=>(e&&(n=!0),Ne.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(s,o)=>{if(o<=t){const t=this.br(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,ue.min()),pa(e).delete(function(e){return[0,We(e.path)]}(s))))});r.push(t)}}).next(()=>Ne.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Na(e,t)}Sr(e,t){const n=pa(e);let r,i=Ve.ce;return n.ee({index:_t},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Ve.ce&&t(new K(Ke(r)),i),i=o,r=s):i=Ve.ce}).next(()=>{i!==Ve.ce&&t(new K(Ke(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Na(e,t){return pa(e).put(function(e,t){return{targetId:0,path:We(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Sa{constructor(){this.changes=new ii(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ne.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ta{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Aa(e).put(n)}removeEntry(e,t,n){return Aa(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],so(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=ar.newInvalidDocument(t);return Aa(e).ee({index:lt,range:IDBKeyRange.only(Pa(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:ar.newInvalidDocument(t)};return Aa(e).ee({index:lt,range:IDBKeyRange.only(Pa(t))},(e,r)=>{n={document:this.Cr(t,r),size:sa(r)}}).next(()=>n)}getEntries(e,t){let n=oi();return this.Fr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Mr(e,t){let n=oi(),r=new an(K.comparator);return this.Fr(e,t,(e,t)=>{const i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,sa(t))}).next(()=>({documents:n,Or:r}))}Fr(e,t,n){if(t.isEmpty())return Ne.resolve();let r=new cn(Da);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(Pa(r.first()),Pa(r.last())),s=r.getIterator();let o=s.getNext();return Aa(e).ee({index:lt,range:i},(e,t,r)=>{const i=K.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Da(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.j(Pa(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),so(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Aa(e).J(IDBKeyRange.bound(o,a,!0)).next(e=>{i?.incrementDocumentReadCount(e.length);let n=oi();for(const i of e){const e=this.Cr(K.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ei(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=oi();const s=Ra(t,n),o=Ra(t,ve.max());return Aa(e).ee({index:ht,range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.Cr(K.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Ca(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return xa(e).get(mt).next(e=>(w(!!e,20021),e))}Dr(e,t){return xa(e).put(mt,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=zs(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=K.fromSegments(t.noDocument.path),r=ao(t.noDocument.readTime);n=ar.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return v(56709);{const e=K.fromSegments(t.unknownDocument.path),r=ao(t.unknownDocument.version);n=ar.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ae(e[0],e[1]);return ue.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ue.min()))return e}return ar.newInvalidDocument(e)}}function ka(e){return new Ta(e)}class Ca extends Sa{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ii(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new cn((e,t)=>L(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=io(this.Nr.serializer,s);r=r.add(i.path.popLast());const u=sa(a);n+=u-o.size,t.push(this.Nr.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=io(this.Nr.serializer,s.convertToNoDocument(ue.min()));t.push(this.Nr.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Nr.updateMetadata(e,n)),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:e,Or:t})=>(t.forEach((t,n)=>{this.Br.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function xa(e){return tn(e,ft)}function Aa(e){return tn(e,at)}function Pa(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ra(e,t){const n=t.documentKey.path.toArray();return[e,so(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Da(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=L(n[e],r[e]),i)return i;return i=L(n.length,r.length),i||(i=L(n[n.length-2],r[r.length-2]),i||L(n[n.length-1],r[r.length-1]))}class Oa{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ma{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&zi(n.mutation,e,fn.empty(),ae.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,pi()).next(()=>t))}getLocalViewOfDocuments(e,t,n=pi()){const r=ci();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ui();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ci();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,pi()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=oi();const s=di(),o=di();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof $i)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),zi(o.mutation,t,o.mutation.getFieldMask(),ae.now())):s.set(t.key,fn.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new Oa(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=di();let r=new an((e,t)=>e-t),i=pi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||fn.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||pi()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,u=r.value,l=hi();u.forEach(e=>{if(!i.has(e)){const r=Ui(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Ne.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$r(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ne.resolve(ci());let o=le,a=i;return s.next(t=>Ne.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ne.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,pi())).next(e=>({batchId:o,changes:li(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(e=>{let t=ui();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ui();return this.indexManager.getCollectionParents(e,i).next(o=>Ne.forEach(o,o=>{const a=function(e,t){return new zr(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ar.newInvalidDocument(r)))});let n=ui();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&zi(s.mutation,r,fn.empty(),ae.now()),ei(t,r)&&(n=n.insert(e,r))}),n})}}class La{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:xs(e.createTime)}}(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:ho(e.bundledQuery),readTime:xs(e.readTime)}}(t)),Ne.resolve()}}class Fa{constructor(){this.overlays=new an(K.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ci();return Ne.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ne.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,t,n){const r=ci(),i=t.length+1,s=new K(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ne.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new an((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ci(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ci(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ne.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xi(t,n));let i=this.qr.get(t);void 0===i&&(i=pi(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Ua{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}class Va{constructor(){this.Qr=new cn(za.$r),this.Ur=new cn(za.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new za(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new za(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new K(new W([])),n=new za(t,e),r=new za(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new K(new W([])),n=new za(t,e),r=new za(t,e+1);let i=pi();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new za(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class za{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return K.comparator(e.key,t.key)||L(e.Yr,t.Yr)}static Kr(e,t){return L(e.Yr,t.Yr)||K.comparator(e.key,t.key)}}class Ba{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new cn(za.$r)}checkEmpty(e){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ji(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.Zr=this.Zr.add(new za(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Ne.resolve(s)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?ze:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new za(t,0),r=new za(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new cn(L);return t.forEach(e=>{const t=new za(e,0),r=new za(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;K.isDocumentKey(i)||(i=i.child(""));const s=new za(new K(i),0);let o=new cn(L);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),Ne.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){w(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(t.mutations,r=>{const i=new za(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new za(t,0),r=this.Zr.firstAfterOrEqual(n);return Ne.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ja{constructor(e){this.ri=e,this.docs=new an(K.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ne.resolve(n?n.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let n=oi();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ar.newInvalidDocument(e))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=oi();const s=t.path,o=new K(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||_e(be(o),n)<=0||(r.has(o.key)||ei(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ne.resolve(i)}getAllFromCollectionGroup(e,t,n,r){v(9500)}ii(e,t){return Ne.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new qa(this)}getSize(e){return Ne.resolve(this.size)}}class qa extends Sa{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class $a{constructor(e){this.persistence=e,this.si=new ii(e=>Or(e),Mr),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Va,this.targetCount=0,this.ai=ha.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ha(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ne.waitFor(i).next(()=>r)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ne.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ne.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ne.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ne.resolve(n)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}class Wa{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ve(0),this.li=!1,this.li=!0,this.hi=new Ua,this.referenceDelegate=e(this),this.Pi=new $a(this),this.indexManager=new Wo,this.remoteDocumentCache=function(e){return new ja(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new ro(t),this.Ii=new La(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fa,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Ba(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){p("MemoryPersistence","Starting transaction:",e);const r=new Ga(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Ga extends Ee{constructor(e){super(),this.currentSequenceNumber=e}}class Ha{constructor(e){this.persistence=e,this.Ri=new Va,this.Vi=null}static mi(e){return new Ha(e)}get fi(){if(this.Vi)return this.Vi;throw v(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const r=K.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ue.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ka{constructor(e,t){this.persistence=e,this.pi=new ii(e=>We(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Ea(this,t)}static mi(e,t){return new Ka(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ne.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ne.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ue.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$n(e.data.value)),t}br(e,t,n){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ne.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Qa{constructor(e){this.serializer=e}k(e,t,n,r){const i=new Te("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Je)}(e),function(e){e.createObjectStore(Xe,{keyPath:"userId"}),e.createObjectStore(Ze,{keyPath:et,autoIncrement:!0}).createIndex(tt,nt,{unique:!0}),e.createObjectStore(ot)}(e),Ja(e),function(e){e.createObjectStore(Qe)}(e));let s=Ne.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(bt),e.deleteObjectStore(pt),e.deleteObjectStore(It)}(e),Ja(e)),s=s.next(()=>function(e){const t=e.store(It),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return t.put(Et,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(Ze).J().next(n=>{e.deleteObjectStore(Ze),e.createObjectStore(Ze,{keyPath:et,autoIncrement:!0}).createIndex(tt,nt,{unique:!0});const r=t.store(Ze),i=n.map(e=>r.put(e));return Ne.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(Tt,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.yi(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(ft)}(e),this.wi(i)))),n<7&&r>=7&&(s=s.next(()=>this.Si(i))),n<8&&r>=8&&(s=s.next(()=>this.bi(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Di(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(kt,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(Ct,{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore(Vt,{keyPath:zt});t.createIndex(Bt,jt,{unique:!1}),t.createIndex(qt,$t,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore(at,{keyPath:ut});t.createIndex(lt,ct),t.createIndex(ht,dt)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(Qe))),n<14&&r>=14&&(s=s.next(()=>this.Fi(e,i))),n<15&&r>=15&&(s=s.next(()=>function(e){e.createObjectStore(xt,{keyPath:"indexId",autoIncrement:!0}).createIndex(At,"collectionGroup",{unique:!1}),e.createObjectStore(Pt,{keyPath:Rt}).createIndex(Dt,Ot,{unique:!1}),e.createObjectStore(Mt,{keyPath:Lt}).createIndex(Ft,Ut,{unique:!1})}(e))),n<16&&r>=16&&(s=s.next(()=>{t.objectStore(Pt).clear()}).next(()=>{t.objectStore(Mt).clear()})),n<17&&r>=17&&(s=s.next(()=>{!function(e){e.createObjectStore(Wt,{keyPath:"name"})}(e)})),n<18&&r>=18&&o.isSafariOrWebkit()&&(s=s.next(()=>{t.objectStore(Pt).clear()}).next(()=>{t.objectStore(Mt).clear()})),s}wi(e){let t=0;return e.store(Qe).ee((e,n)=>{t+=sa(n)}).next(()=>{const n={byteSize:t};return e.store(ft).put(mt,n)})}yi(e){const t=e.store(Xe),n=e.store(Ze);return t.J().next(t=>Ne.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,ze],[t.userId,t.lastAcknowledgedBatchId]);return n.J(tt,r).next(n=>Ne.forEach(n,n=>{w(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=uo(this.serializer,n);return ia(e,t.userId,r).next(()=>{})}))}))}Si(e){const t=e.store(bt),n=e.store(Qe);return e.store(It).get(Et).next(e=>{const r=[];return n.ee((n,i)=>{const s=new W(n),o=function(e){return[0,We(e)]}(s);r.push(t.get(o).next(n=>n?Ne.resolve():(n=>t.put({targetId:0,path:We(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>Ne.waitFor(r))})}bi(e,t){e.createObjectStore(Nt,{keyPath:St});const n=t.store(Nt),r=new Go,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:We(r)})}};return t.store(Qe).ee({X:!0},(e,t)=>{const n=new W(e);return i(n.popLast())}).next(()=>t.store(ot).ee({X:!0},([e,t,n],r)=>{const s=Ke(t);return i(s.popLast())}))}Di(e){const t=e.store(pt);return t.ee((e,n)=>{const r=lo(n),i=co(this.serializer,r);return t.put(i)})}Ci(e,t){const n=t.store(Qe),r=[];return n.ee((e,n)=>{const i=t.store(at),s=function(e){return e.document?new K(W.fromString(e.document.name).popFirst(5)):e.noDocument?K.fromSegments(e.noDocument.path):e.unknownDocument?K.fromSegments(e.unknownDocument.path):v(36783)}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))}).next(()=>Ne.waitFor(r))}Fi(e,t){const n=t.store(Ze),r=ka(this.serializer),i=new Wa(Ha.mi,this.serializer.yt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{let t=n.get(e.userId)??pi();uo(this.serializer,e).keys().forEach(e=>t=t.add(e)),n.set(e.userId,t)}),Ne.forEach(n,(e,n)=>{const s=new h(n),o=vo.wt(this.serializer,s),a=i.getIndexManager(s),u=oa.wt(s,this.serializer,a,i.referenceDelegate);return new Ma(r,u,o,a).recalculateAndSaveOverlaysForDocumentKeys(new en(t,Ve.ce),e).next()})})}}function Ja(e){e.createObjectStore(bt,{keyPath:vt}).createIndex(_t,wt,{unique:!0}),e.createObjectStore(pt,{keyPath:"targetId"}).createIndex(gt,yt,{unique:!0}),e.createObjectStore(It)}const Ya="IndexedDbPersistence",Xa=18e5,Za=5e3,eu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tu="main";class nu{constructor(e,t,n,r,i,s,o,a,u,l,c=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=i,this.window=s,this.document=o,this.xi=u,this.Oi=l,this.Ni=c,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=e=>Promise.resolve(),!nu.v())throw new N(I.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ia(this,r),this.$i=t+tu,this.serializer=new ro(a),this.Ui=new ke(this.$i,this.Ni,new Qa(this.serializer)),this.hi=new wo,this.Pi=new da(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ka(this.serializer),this.Ii=new go,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===l&&g(Ya,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new N(I.FAILED_PRECONDITION,eu);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ve(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>iu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Pe(e))return p(Ya,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return p(Ya,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return ru(e).get(Ye).next(e=>Ne.resolve(this.es(e)))}ts(e){return iu(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Xa)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=tn(e,Tt);return t.J().next(e=>{const n=this.ss(e,Xa),r=e.filter(e=>-1===n.indexOf(e));return Ne.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Ne.resolve(!0):ru(e).get(Ye).next(t=>{if(null!==t&&this.rs(t.leaseTimestampMs,Za)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new N(I.FAILED_PRECONDITION,eu);return!1}}return!(!this.networkEnabled||!this.inForeground)||iu(e).J().next(e=>void 0===this.ss(e,Za).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&p(Ya,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Je,Tt],e=>{const t=new en(e,Ve.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>iu(e).J().next(e=>this.ss(e,Xa).map(e=>e.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return oa.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qo(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return vo.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){p(Ya,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 18===e?Zt:17===e?Xt:16===e?Yt:15===e?Jt:14===e?Qt:13===e?Kt:12===e?Ht:11===e?Gt:void v(60245)}(this.Ni);let s;return this.Ui.runTransaction(e,r,i,r=>(s=new en(r,this.ci?this.ci.next():Ve.ce),"readwrite-primary"===t?this.Hi(s).next(e=>!!e||this.Yi(s)).next(t=>{if(!t)throw g(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new N(I.FAILED_PRECONDITION,we);return n(s)}).next(e=>this.Xi(s).next(()=>e)):this.Is(s).next(()=>n(s)))).then(e=>(s.raiseOnCommittedEvent(),e))}Is(e){return ru(e).get(Ye).next(e=>{if(null!==e&&this.rs(e.leaseTimestampMs,Za)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new N(I.FAILED_PRECONDITION,eu)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ru(e).put(Ye,t)}static v(){return ke.v()}Zi(e){const t=ru(e);return t.get(Ye).next(e=>this.es(e)?(p(Ya,"Releasing primary lease."),t.delete(Ye)):Ne.resolve())}rs(e,t){const n=Date.now();return!(e<n-t||e>n&&(g(`Detected an update time that is in the future: ${e} > ${n}`),1))}Gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground="visible"===this.document.visibilityState)}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){"function"==typeof this.window?.addEventListener&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;o.isSafari()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=null!==this.Ki?.getItem(this._s(e));return p(Ya,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(e){return g(Ya,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch(e){}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ru(e){return tn(e,Je)}function iu(e){return tn(e,Tt)}function su(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class ou{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=pi(),r=pi();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new ou(e,t.fromCache,n,r)}}class au{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uu{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=o.isSafari()?8:Ce(o.getUA())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new au;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(m()<=s.LogLevel.DEBUG&&p("QueryEngine","SDK will not create cache indexes for query:",Zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(m()<=s.LogLevel.DEBUG&&p("QueryEngine","Query:",Zr(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(m()<=s.LogLevel.DEBUG&&p("QueryEngine","The SDK decides to create cache indexes for query:",Zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):Ne.resolve())}ys(e,t){if(qr(t))return Ne.resolve(null);let n=Gr(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Jr(t,null,"F"),n=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=pi(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Jr(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return qr(t)||r.isEqual(ue.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?Ne.resolve(null):(m()<=s.LogLevel.DEBUG&&p("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zr(t)),this.vs(e,o,t,ye(r,le)).next(e=>e))})}Ds(e,t){let n=new cn(ni(e));return t.forEach((t,r)=>{ei(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return m()<=s.LogLevel.DEBUG&&p("QueryEngine","Using full collection scan to execute query:",Zr(t)),this.ps.getDocumentsMatchingQuery(e,t,ve.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const lu="LocalStore";class cu{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new an(L),this.xs=new ii(e=>Or(e),Mr),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ma(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function hu(e,t,n,r){return new cu(e,t,n,r)}async function du(e,t){const n=E(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=pi();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function fu(e){const t=E(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function mu(e,t,n){let r=pi(),i=pi();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=oi();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ue.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):p(lu,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function pu(e,t){const n=E(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=ze),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function gu(e,t){const n=E(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Ne.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new no(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function yu(e,t,n){const r=E(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Pe(e))throw e;p(lu,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function bu(e,t,n){const r=E(e);let i=ue.min(),s=pi();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=E(e),i=r.xs.get(n);return void 0!==i?Ne.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Gr(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ue.min(),n?s:pi())).next(e=>(wu(r,ti(t),e),{documents:e,Qs:s})))}function vu(e,t){const n=E(e),r=E(n.Pi),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.At(e,t).next(e=>e?e.target:null))}function _u(e,t){const n=E(e),r=n.Os.get(t)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Ns.getAllFromCollectionGroup(e,t,ye(r,le),Number.MAX_SAFE_INTEGER)).then(e=>(wu(n,t,e),e))}function wu(e,t,n){let r=e.Os.get(t)||ue.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}async function Eu(e,t,n=pi()){const r=await gu(e,Gr(ho(t.bundledQuery))),i=E(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=xs(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(e,t);const o=r.withResumeToken(pn.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(o.targetId,o),i.Pi.updateTargetData(e,o).next(()=>i.Pi.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.Pi.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(e,t))})}const Iu="firestore_clients";function Nu(e,t){return`${Iu}_${e}_${t}`}const Su="firestore_mutations";function Tu(e,t,n){let r=`${Su}_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const ku="firestore_targets";function Cu(e,t){return`${ku}_${e}_${t}`}const xu="SharedClientState";class Au{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new N(r.error.code,r.error.message))),s?new Au(e,t,r.state,i):(g(xu,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pu{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new N(n.error.code,n.error.message))),i?new Pu(e,n.state,r):(g(xu,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ru{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=yi();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=qe(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new Ru(e,i):(g(xu,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Du{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Du(t.clientId,t.onlineState):(g(xu,`Failed to parse online state: ${e}`),null)}}class Ou{constructor(){this.activeTargetIds=yi()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mu{constructor(e,t,n,r,i){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new an(L),this.started=!1,this.Xs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Nu(this.persistenceKey,this.Js),this.no=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Ou),this.ro=new RegExp(`^${Iu}_${s}_([^_]*)$`),this.io=new RegExp(`^${Su}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ku}_${s}_(\\d+)$`),this.oo=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this._o=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const t of e){if(t===this.Js)continue;const e=this.getItem(Nu(this.persistenceKey,t));if(e){const n=Ru.Ws(t,e);n&&(this.Zs=this.Zs.insert(n.clientId,n))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const e=this.uo(t);e&&this.co(e)}for(const e of this.Xs)this.Ys(e);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(Cu(this.persistenceKey,e));if(t){const r=Pu.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cu(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Po(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return p(xu,"READ",e,t),t}setItem(e,t){p(xu,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){p(xu,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(p(xu,"EVENT",t.key,t.newValue),t.key===this.eo)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.ro.test(t.key)){if(null==t.newValue){const e=this.Ro(t.key);return this.Vo(e,null)}{const e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(null!==t.newValue){const e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(null!==t.newValue){const e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(null!==t.newValue){const e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){const e=function(e){let t=Ve.ce;if(null!=e)try{const n=JSON.parse(e);w("number"==typeof n,30636,{So:e}),t=n}catch(e){g(xu,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ve.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){const e=this.bo(t.newValue);await Promise.all(e.map(e=>this.syncEngine.Do(e)))}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const r=new Au(this.currentUser,e,t,n),i=Tu(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){const t=Tu(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const r=Cu(this.persistenceKey,e),i=new Pu(e,t,n);this.setItem(r,i.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return Ru.Ws(n,t)}fo(e,t){const n=this.io.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Au.Ws(new h(i),r,t)}yo(e,t){const n=this.so.exec(e),r=Number(n[1]);return Pu.Ws(r,t)}uo(e){return Du.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);p(xu,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Fo(s,o).then(()=>{this.Zs=n})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=yi();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Lu{constructor(){this.Mo=new Ou,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ou,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fu{Oo(e){}shutdown(){}}const Uu="ConnectivityMonitor";class Vu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){p(Uu,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){p(Uu,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zu=null;function Bu(){return null===zu?zu=268435456+Math.round(2147483648*Math.random()):zu++,"0x"+zu.toString(16)}const ju="RestConnection",qu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $u{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Cn?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=Bu(),a=this.zo(e,t.toUriEncodedString());p(ju,`Sending RPC '${e}' ${s}:`,a,n);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:l}=new URL(a),c=o.isCloudWorkstation(l);return this.Jo(e,a,u,n,c).then(t=>(p(ju,`Received RPC '${e}' ${s}: `,t),t),t=>{throw y(ju,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+d,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=qu[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Wu{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Gu="WebChannelConnection";class Hu extends $u{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Bu();return new Promise((i,o)=>{const a=new u.XhrIo;a.setWithCredentials(!0),a.listenOnce(u.EventType.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case u.ErrorCode.NO_ERROR:const t=a.getResponseJson();p(Gu,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case u.ErrorCode.TIMEOUT:p(Gu,`RPC '${e}' ${s} timed out`),o(new N(I.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:const n=a.getStatus();if(p(Gu,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(I).indexOf(t)>=0?t:I.UNKNOWN}(t.status);o(new N(e,t.message))}else o(new N(I.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new N(I.UNAVAILABLE,"Connection failed."));break;default:v(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{p(Gu,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);p(Gu,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Bu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=u.createWebChannelTransport(),o=u.getStatEventTarget(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");p(Gu,`Creating RPC '${e}' stream ${r}: ${c}`,a);const h=s.createWebChannel(c,a);this.I_(h);let d=!1,f=!1;const m=new Wu({Yo:t=>{f?p(Gu,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(p(Gu,`Opening RPC '${e}' stream ${r} transport.`),h.open(),d=!0),p(Gu,`RPC '${e}' stream ${r} sending:`,t),h.send(t))},Zo:()=>h.close()}),g=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(h,u.WebChannel.EventType.OPEN,()=>{f||(p(Gu,`RPC '${e}' stream ${r} transport opened.`),m.o_())}),g(h,u.WebChannel.EventType.CLOSE,()=>{f||(f=!0,p(Gu,`RPC '${e}' stream ${r} transport closed`),m.a_(),this.E_(h))}),g(h,u.WebChannel.EventType.ERROR,t=>{f||(f=!0,y(Gu,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),m.a_(new N(I.UNAVAILABLE,"The operation could not be completed")))}),g(h,u.WebChannel.EventType.MESSAGE,t=>{if(!f){const n=t.data[0];w(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){p(Gu,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=ts[e];if(void 0!==t)return is(t)}(t),i=s.message;void 0===n&&(n=I.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),f=!0,m.a_(new N(n,i)),h.close()}else p(Gu,`RPC '${e}' stream ${r} received:`,n),m.u_(n)}}),g(o,u.Event.STAT_EVENT,t=>{t.stat===u.Stat.PROXY?p(Gu,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===u.Stat.NOPROXY&&p(Gu,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Ku(){return"undefined"!=typeof window?window:null}function Qu(){return"undefined"!=typeof document?document:null}function Ju(e){return new Ns(e,!0)}class Yu{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&p("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Xu="PersistentStream";class Zu{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yu(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===I.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===I.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.D_===t&&this.G_(e,n)},t=>{e(()=>{const e=new N(I.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return p(Xu,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(p(Xu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class el extends Zu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(w(void 0===t||"string"==typeof t,58123),pn.fromBase64String(t||"")):(w(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),pn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?I.UNKNOWN:is(e.code);return new N(t,e.message||"")}(o);n=new gs(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Os(e,r.document.name),s=xs(r.document.updateTime),o=r.document.createTime?xs(r.document.createTime):ue.min(),a=new sr({mapValue:{fields:r.document.fields}}),u=ar.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new ms(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Os(e,r.document),s=r.readTime?xs(r.readTime):ue.min(),o=ar.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ms([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Os(e,r.document),s=r.removedTargetIds||[];n=new ms([],s,i,null)}else{if(!("filter"in t))return v(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new es(r,i),o=e.targetId;n=new ps(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ue.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ue.min():t.readTime?xs(t.readTime):ue.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Fs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Lr(r)?{documents:qs(e,r)}:{query:$s(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ks(e,t.resumeToken);const r=Ss(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ue.min())>0){n.readTime=Ts(e,t.snapshotVersion.toTimestamp());const r=Ss(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return v(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Fs(this.serializer),t.removeTarget=e,this.q_(t)}}class tl extends Zu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return w(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,w(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){w(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(w(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?xs(e.updateTime):xs(t);return n.isEqual(ue.min())&&(n=xs(t)),new Oi(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=xs(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Fs(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Bs(this.serializer,e))};this.q_(t)}}class nl{}class rl extends nl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new N(I.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,Ps(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(I.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,Ps(t,n),r,s,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(I.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class il{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(g(t),this.aa=!1):p("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const sl="RemoteStore";class ol{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{pl(this)&&(p(sl,"Restarting streams for network reachability change."),await async function(e){const t=E(e);t.Ea.add(4),await ul(t),t.Ra.set("Unknown"),t.Ea.delete(4),await al(t)}(this))})}),this.Ra=new il(n,r)}}async function al(e){if(pl(e))for(const t of e.da)await t(!0)}async function ul(e){for(const t of e.da)await t(!1)}function ll(e,t){const n=E(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ml(n)?fl(n):Ol(n).O_()&&hl(n,t))}function cl(e,t){const n=E(e),r=Ol(n);n.Ia.delete(t),r.O_()&&dl(n,t),0===n.Ia.size&&(r.O_()?r.L_():pl(n)&&n.Ra.set("Unknown"))}function hl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ue.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ol(e).Y_(t)}function dl(e,t){e.Va.Ue(t),Ol(e).Z_(t)}function fl(e){e.Va=new bs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ol(e).start(),e.Ra.ua()}function ml(e){return pl(e)&&!Ol(e).x_()&&e.Ia.size>0}function pl(e){return 0===E(e).Ea.size}function gl(e){e.Va=void 0}async function yl(e){e.Ra.set("Online")}async function bl(e){e.Ia.forEach((t,n)=>{hl(e,t)})}async function vl(e,t){gl(e),ml(e)?(e.Ra.ha(t),fl(e)):e.Ra.set("Unknown")}async function _l(e,t,n){if(e.Ra.set("Online"),t instanceof gs&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){p(sl,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wl(e,n)}else if(t instanceof ms?e.Va.Ze(t):t instanceof ps?e.Va.st(t):e.Va.tt(t),!n.isEqual(ue.min()))try{const t=await fu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(pn.EMPTY_BYTE_STRING,r.snapshotVersion)),dl(e,t);const i=new no(r.target,t,n,r.sequenceNumber);hl(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){p(sl,"Failed to raise snapshot:",t),await wl(e,t)}}async function wl(e,t,n){if(!Pe(t))throw t;e.Ea.add(1),await ul(e),e.Ra.set("Offline"),n||(n=()=>fu(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{p(sl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await al(e)})}function El(e,t){return t().catch(n=>wl(e,n,t))}async function Il(e){const t=E(e),n=Ml(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ze;for(;Nl(t);)try{const e=await pu(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Sl(t,e)}catch(e){await wl(t,e)}Tl(t)&&kl(t)}function Nl(e){return pl(e)&&e.Ta.length<10}function Sl(e,t){e.Ta.push(t);const n=Ml(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Tl(e){return pl(e)&&!Ml(e).x_()&&e.Ta.length>0}function kl(e){Ml(e).start()}async function Cl(e){Ml(e).ra()}async function xl(e){const t=Ml(e);for(const n of e.Ta)t.ea(n.mutations)}async function Al(e,t,n){const r=e.Ta.shift(),i=Yi.from(r,t,n);await El(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Il(e)}async function Pl(e,t){t&&Ml(e).X_&&await async function(e,t){if(function(e){return rs(e)&&e!==I.ABORTED}(t.code)){const n=e.Ta.shift();Ml(e).B_(),await El(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Il(e)}}(e,t),Tl(e)&&kl(e)}async function Rl(e,t){const n=E(e);n.asyncQueue.verifyOperationInProgress(),p(sl,"RemoteStore received new credentials");const r=pl(n);n.Ea.add(3),await ul(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await al(n)}async function Dl(e,t){const n=E(e);t?(n.Ea.delete(2),await al(n)):t||(n.Ea.add(2),await ul(n),n.Ra.set("Unknown"))}function Ol(e){return e.ma||(e.ma=function(e,t,n){const r=E(e);return r.sa(),new el(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:yl.bind(null,e),t_:bl.bind(null,e),r_:vl.bind(null,e),H_:_l.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ml(e)?fl(e):e.Ra.set("Unknown")):(await e.ma.stop(),gl(e))})),e.ma}function Ml(e){return e.fa||(e.fa=function(e,t,n){const r=E(e);return r.sa(),new tl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Cl.bind(null,e),r_:Pl.bind(null,e),ta:xl.bind(null,e),na:Al.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Il(e)):(await e.fa.stop(),e.Ta.length>0&&(p(sl,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class Ll{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new S,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Ll(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new N(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fl(e,t){if(g("AsyncQueue",`${t}: ${e}`),Pe(e))return new N(I.UNAVAILABLE,`${t}: ${e}`);throw e}class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||K.comparator(t.key,n.key):(e,t)=>K.comparator(e.key,t.key),this.keyedMap=ui(),this.sortedSet=new an(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ul))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ul;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Vl{constructor(){this.ga=new an(K.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):v(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class zl{constructor(e,t,n,r,i,s,o,a,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new zl(e,t,Ul.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Bl{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class jl{constructor(){this.queries=ql(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=E(e),r=n.queries;n.queries=ql(),r.forEach((e,n)=>{for(const e of n.Sa)e.onError(t)})}(this,new N(I.ABORTED,"Firestore shutting down"))}}function ql(){return new ii(e=>Xr(e),Yr)}async function $l(e,t){const n=E(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Bl,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Fl(e,`Initialization of query '${Zr(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Kl(n)}async function Wl(e,t){const n=E(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Gl(e,t){const n=E(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&Kl(n)}function Hl(e,t,n){const r=E(e),i=r.queries.get(t);if(i)for(const e of i.Sa)e.onError(n);r.queries.delete(t)}function Kl(e){e.Ca.forEach(e=>{e.next()})}var Ql,Jl;(Jl=Ql||(Ql={})).Ma="default",Jl.Cache="cache";class Yl{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new zl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ql.Cache}}class Xl{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class Zl{constructor(e){this.serializer=e}$s(e){return Os(this.serializer,e)}Us(e){return e.metadata.exists?zs(this.serializer,e.document,!1):ar.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return xs(e)}}class ec{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=tc(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const n=W.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,n=new Zl(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.$s(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||pi()).add(e);t.set(n,r)}}return t}async ja(e){const t=await async function(e,t,n,r){const i=E(e);let s=pi(),o=oi();for(const e of n){const n=t.$s(e.metadata.name);e.document&&(s=s.add(n));const r=t.Us(e);r.setReadTime(t.Ks(e.metadata.readTime)),o=o.insert(n,r)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),u=await gu(i,function(e){return Gr(jr(W.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>mu(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.Pi.removeMatchingKeysForTargetId(e,u.targetId).next(()=>i.Pi.addMatchingKeys(e,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.ks,t.qs)).next(()=>t.ks)))}(e,new Zl(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const t of this.Ka)await Eu(e,t,n.get(t.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function tc(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class nc{constructor(e){this.key=e}}class rc{constructor(e){this.key=e}}class ic{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pi(),this.mutatedKeys=pi(),this.eu=ni(e),this.tu=new Ul(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Vl,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),c=ei(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.su(l,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.eu(c,a)>0||u&&this.eu(c,u)<0)&&(o=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(a||u)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,u=a!==this.Za;return this.Za=a,0!==s.length||u?{snapshot:new zl(this.query,e.tu,i,s,e.mutatedKeys,0===a,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pi(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new rc(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new nc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=pi();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const sc="SyncEngine";class oc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ac{constructor(e){this.key=e,this.hu=!1}}class uc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ii(e=>Xr(e),Yr),this.Iu=new Map,this.Eu=new Set,this.du=new an(K.comparator),this.Au=new Map,this.Ru=new Va,this.Vu={},this.mu=new Map,this.fu=ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function lc(e,t,n=!0){const r=Uc(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await hc(r,t,n,!0),i}async function cc(e,t){const n=Uc(e);await hc(n,t,!0,!1)}async function hc(e,t,n,r){const i=await gu(e.localStore,Gr(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await dc(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&ll(e.remoteStore,i),a}async function dc(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await bu(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Nc(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await bu(e.localStore,t,!0),o=new ic(t,s.Qs),a=o.ru(s.documents),u=fs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,u);Nc(e,n,l.au);const c=new oc(t,n,o);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function fc(e,t,n){const r=E(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Yr(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await yu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cl(r.remoteStore,i.targetId),Ec(r,i.targetId)}).catch(Ie)):(Ec(r,i.targetId),await yu(r.localStore,i.targetId,!0))}async function mc(e,t){const n=E(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cl(n.remoteStore,r.targetId))}async function pc(e,t){const n=E(e);try{const e=await function(e,t){const n=E(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let l=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(pn.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,l,s)&&o.push(n.Pi.updateTargetData(e,l))});let a=oi(),u=pi();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(mu(e,s,t.documentUpdates).next(e=>{a=e.ks,u=e.qs})),!r.isEqual(ue.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ne.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,u)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(w(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?w(r.hu,14607):e.removedDocuments.size>0&&(w(r.hu,42227),r.hu=!1))}),await kc(n,e,t)}catch(e){await Ie(e)}}function gc(e,t,n){const r=E(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=E(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.Sa)e.va(t)&&(r=!0)}),r&&Kl(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yc(e,t,n){const r=E(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new an(K.comparator);e=e.insert(s,ar.newNoDocument(s,ue.min()));const n=pi().add(s),i=new ds(ue.min(),new Map,new an(L),e,n);await pc(r,i),r.du=r.du.remove(s),r.Au.delete(t),Tc(r)}else await yu(r.localStore,t,!1).then(()=>Ec(r,t,n)).catch(Ie)}async function bc(e,t){const n=E(e),r=t.batch.batchId;try{const e=await function(e,t){const n=E(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ne.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);w(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=pi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);wc(n,r,null),_c(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kc(n,e)}catch(e){await Ie(e)}}async function vc(e,t,n){const r=E(e);try{const e=await function(e,t){const n=E(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(w(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);wc(r,t,n),_c(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await kc(r,e)}catch(n){await Ie(n)}}function _c(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function wc(e,t,n){const r=E(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Ec(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Ic(e,t)})}function Ic(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(cl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Tc(e))}function Nc(e,t,n){for(const r of n)r instanceof nc?(e.Ru.addReference(r.key,t),Sc(e,r)):r instanceof rc?(p(sc,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Ic(e,r.key)):v(19791,{wu:r})}function Sc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(p(sc,"New document in limbo: "+n),e.Eu.add(r),Tc(e))}function Tc(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new K(W.fromString(t)),r=e.fu.next();e.Au.set(r,new ac(n)),e.du=e.du.insert(n,r),ll(e.remoteStore,new no(Gr(jr(n.path)),r,"TargetPurposeLimboResolution",Ve.ce))}}async function kc(e,t,n){const r=E(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=ou.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=E(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ne.forEach(t,t=>Ne.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ne.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Pe(e))throw e;p(lu,"Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,s))}async function Cc(e,t){const n=E(e);if(!n.currentUser.isEqual(t)){p(sc,"User change. New user:",t.toKey());const e=await du(n.localStore,t);n.currentUser=t,function(e){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new N(I.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.mu.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await kc(n,e.Ls)}}function xc(e,t){const n=E(e),r=n.Au.get(t);if(r&&r.hu)return pi().add(r.key);{let e=pi();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function Ac(e,t){const n=E(e),r=await bu(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&Nc(n,t.targetId,i.au),i}async function Pc(e,t){const n=E(e);return _u(n.localStore,t).then(e=>kc(n,e))}async function Rc(e,t,n,r){const i=E(e),s=await function(e,t){const n=E(e),r=E(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.er(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):Ne.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await Il(i.remoteStore):"acknowledged"===n||"rejected"===n?(wc(i,t,r||null),_c(i,t),function(e,t){E(E(e).mutationQueue).ir(t)}(i.localStore,t)):v(6720,"Unknown batchState",{Su:n}),await kc(i,s)):p(sc,"Cannot apply mutation batch with id: "+t)}async function Dc(e,t,n){const r=E(e),i=[],s=[];for(const e of t){let t;const n=r.Iu.get(e);if(n&&0!==n.length){t=await gu(r.localStore,Gr(n[0]));for(const e of n){const t=r.Tu.get(e),n=await Ac(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await vu(r.localStore,e);t=await gu(r.localStore,n),await dc(r,Oc(n),e,!1,t.resumeToken)}i.push(t)}return r.Pu.H_(s),i}function Oc(e){return Br(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Mc(e){return function(e){return E(E(e).persistence).Ts()}(E(e).localStore)}async function Lc(e,t,n,r){const i=E(e);if(i.gu)return void p(sc,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await _u(i.localStore,ti(s[0])),r=ds.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,pn.EMPTY_BYTE_STRING);await kc(i,e,r);break}case"rejected":await yu(i.localStore,t,!0),Ec(i,t,r);break;default:v(64155,n)}}async function Fc(e,t,n){const r=Uc(e);if(r.gu){for(const e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){p(sc,"Adding an already active target "+e);continue}const t=await vu(r.localStore,e),n=await gu(r.localStore,t);await dc(r,Oc(t),n.targetId,!1,n.resumeToken),ll(r.remoteStore,n)}for(const e of n)r.Iu.has(e)&&await yu(r.localStore,e,!1).then(()=>{cl(r.remoteStore,e),Ec(r,e)}).catch(Ie)}}function Uc(e){const t=E(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yc.bind(null,t),t.Pu.H_=Gl.bind(null,t.eventManager),t.Pu.yu=Hl.bind(null,t.eventManager),t}function Vc(e){const t=E(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vc.bind(null,t),t}class zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hu(this.persistence,new uu,e.initialUser,this.serializer)}Cu(e){return new Wa(Ha.mi,this.serializer)}Du(e){return new Lu}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zc.provider={build:()=>new zc};class Bc extends zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){w(this.persistence.referenceDelegate instanceof Ka,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new _a(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?ra.withCacheSize(this.cacheSizeBytes):ra.DEFAULT;return new Wa(e=>Ka.mi(e,t),this.serializer)}}class jc extends zc{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Vc(this.xu.syncEngine),await Il(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return hu(this.persistence,new uu,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new _a(n,e.asyncQueue,t)}Mu(e,t){const n=new Ue(t,this.persistence);return new Fe(e.asyncQueue,n)}Cu(e){const t=su(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ra.withCacheSize(this.cacheSizeBytes):ra.DEFAULT;return new nu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ku(),Qu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Lu}}class qc extends jc{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Mu&&(this.sharedClientState.syncEngine={Co:Rc.bind(null,t),vo:Lc.bind(null,t),Fo:Fc.bind(null,t),Ts:Mc.bind(null,t),Do:Pc.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async e=>{await async function(e,t){const n=E(e);if(Uc(n),Vc(n),!0===t&&!0!==n.gu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Dc(n,e.toArray());n.gu=!0,await Dl(n.remoteStore,!0);for(const e of t)ll(n.remoteStore,e)}else if(!1===t&&!1!==n.gu){const e=[];let t=Promise.resolve();n.Iu.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Ec(n,i),yu(n.localStore,i,!0))),cl(n.remoteStore,i)}),await t,await Dc(n,e),function(e){const t=E(e);t.Au.forEach((e,n)=>{cl(t.remoteStore,n)}),t.Ru.Jr(),t.Au=new Map,t.du=new an(K.comparator)}(n),n.gu=!1,await Dl(n.remoteStore,!1)}}(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Du(e){const t=Ku();if(!Mu.v(t))throw new N(I.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=su(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mu(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class $c{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>gc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cc.bind(null,this.syncEngine),await Dl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jl}createDatastore(e){const t=Ju(e.databaseInfo.databaseId),n=function(e){return new Hu(e)}(e.databaseInfo);return function(e,t,n,r){return new rl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ol(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>gc(this.syncEngine,e,0),Vu.v()?new Vu:new Fu)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new uc(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=E(e);p(sl,"RemoteStore shutting down."),t.Ea.add(5),await ul(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}function Wc(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}$c.provider={build:()=>new $c};class Gc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):g("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Hc{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new S,this.buffer=new Uint8Array,this.Lu=new TextDecoder("utf-8"),this.ku().then(e=>{e&&e.$a()?this.metadata.resolve(e.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(e?.Qa)}`))},e=>this.metadata.reject(e))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(null===e)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.Qu(`length string (${t}) is not valid number`);const r=await this.$u(n);return new Xl(JSON.parse(r),e.length+n)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(0===this.buffer.length)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Kc{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let n=this.bu();if(!n||!n.$a())throw new Error(`The first element of the bundle is not a metadata object, it is\n         ${JSON.stringify(n?.Qa)}`);this.metadata=n;do{n=this.bu(),null!==n&&this.elements.push(n)}while(null!==n)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),t=this.$u(e);return new Xl(JSON.parse(t),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new N(I.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if("{"===this.bundleData[t]){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}class Qc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new N(I.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=E(e),r={documents:t.map(e=>Ds(n.serializer,e))},i=await n.Ho("BatchGetDocuments",n.serializer.databaseId,W.emptyPath(),r,t.length),s=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){w(!!t.found,43571),t.found.name,t.found.updateTime;const n=Os(e,t.found.name),r=xs(t.found.updateTime),i=t.found.createTime?xs(t.found.createTime):ue.min(),s=new sr({mapValue:{fields:t.found.fields}});return ar.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){w(!!t.missing,3894),w(!!t.readTime,22933);const n=Os(e,t.missing),r=xs(t.readTime);return ar.newNoDocument(n,r)}(e,t):v(7234,{result:t})}(n.serializer,e);s.set(t.key.toString(),t)});const o=[];return t.forEach(e=>{const t=s.get(e.toString());w(!!t,55234,{key:e}),o.push(t)}),o}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ki(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=K.fromPath(t);this.mutations.push(new Qi(n,this.precondition(n)))}),await async function(e,t){const n=E(e),r={writes:t.map(e=>Bs(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,W.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw v(50498,{Gu:e.constructor.name});t=ue.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new N(I.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ue.min())?Mi.exists(!1):Mi.updateTime(t):Mi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ue.min()))throw new N(I.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mi.updateTime(t)}return Mi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jc{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new Yu(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Qc(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!Be(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===e?.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rs(t)}return!1}}const Yc="FirestoreClient";class Xc{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=h.UNAUTHENTICATED,this.clientId=M.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{p(Yc,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(p(Yc,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new S;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Zc(e,t){e.asyncQueue.verifyOperationInProgress(),p(Yc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await du(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function eh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await th(e);p(Yc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Rl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Rl(t.remoteStore,n)),e._onlineComponents=t}async function th(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){p(Yc,"Using user provided OfflineComponentProvider");try{await Zc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===I.FAILED_PRECONDITION||e.code===I.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;y("Error using user provided cache. Falling back to memory cache: "+n),await Zc(e,new zc)}}else p(Yc,"Using default OfflineComponentProvider"),await Zc(e,new Bc(void 0));return e._offlineComponents}async function nh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(p(Yc,"Using user provided OnlineComponentProvider"),await eh(e,e._uninitializedComponentsProvider._online)):(p(Yc,"Using default OnlineComponentProvider"),await eh(e,new $c))),e._onlineComponents}function rh(e){return th(e).then(e=>e.persistence)}function ih(e){return th(e).then(e=>e.localStore)}function sh(e){return nh(e).then(e=>e.remoteStore)}function oh(e){return nh(e).then(e=>e.syncEngine)}function ah(e){return nh(e).then(e=>e.datastore)}async function uh(e){const t=await nh(e),n=t.eventManager;return n.onListen=lc.bind(null,t.syncEngine),n.onUnlisten=fc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mc.bind(null,t.syncEngine),n}function lh(e,t,n={}){const r=new S;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Gc({next:a=>{s.Nu(),t.enqueueAndForget(()=>Wl(e,o));const u=a.docs.has(n);!u&&a.fromCache?i.reject(new N(I.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new N(I.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Yl(jr(n.path),s,{includeMetadataChanges:!0,qa:!0});return $l(e,o)}(await uh(e),e.asyncQueue,t,n,r)),r.promise}function ch(e,t,n={}){const r=new S;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Gc({next:n=>{s.Nu(),t.enqueueAndForget(()=>Wl(e,o)),n.fromCache&&"server"===r.source?i.reject(new N(I.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Yl(n,s,{includeMetadataChanges:!0,qa:!0});return $l(e,o)}(await uh(e),e.asyncQueue,t,n,r)),r.promise}function hh(e,t){return function(e,t){return new Kc(e,t)}(e,t)}function dh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const fh=new Map,mh="firestore.googleapis.com",ph=!0;class gh{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new N(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mh,this.ssl=ph}else this.host=e.host,this.ssl=e.ssl??ph;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=na;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ya)throw new N(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dh(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new N(I.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new N(I.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new N(I.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new N(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new N(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gh(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new k;switch(e.type){case"firstParty":return new P(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new N(I.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fh.get(e);t&&(p("ComponentProvider","Removing Datastore"),fh.delete(e),t.terminate())}(this),Promise.resolve()}}function bh(e,t,n,r={}){e=te(e,yh);const i=o.isCloudWorkstation(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},u=`${t}:${n}`;i&&(o.pingServer(`https://${u}`),o.updateEmulatorBanner("Firestore",!0)),s.host!==mh&&s.host!==u&&y("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:u,ssl:i,emulatorOptions:r};if(!o.deepEqual(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=h.MOCK_USER;else{t=o.createMockUserToken(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new N(I.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new h(i)}e._authCredentials=new C(new T(t,n))}}class vh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vh(this.firestore,e,this._query)}}class _h{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _h(this.firestore,e,this._key)}toJSON(){return{type:_h._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ie(t,_h._jsonSchema))return new _h(e,n||null,new K(W.fromString(t.referencePath)))}}_h._jsonSchemaVersion="firestore/documentReference/1.0",_h._jsonSchema={type:re("string",_h._jsonSchemaVersion),referencePath:re("string")};class wh extends vh{constructor(e,t,n){super(e,t,jr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _h(this.firestore,null,new K(e))}withConverter(e){return new wh(this.firestore,e,this._path)}}function Eh(e,t,...n){if(e=o.getModularInstance(e),1===arguments.length&&(t=M.newId()),Q("doc","path",t),e instanceof yh){const r=W.fromString(t,...n);return Y(r),new _h(e,null,new K(r))}{if(!(e instanceof _h||e instanceof wh))throw new N(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(W.fromString(t,...n));return Y(r),new _h(e.firestore,e instanceof wh?e.converter:null,new K(r))}}function Ih(e,t){return e=o.getModularInstance(e),t=o.getModularInstance(t),e instanceof vh&&t instanceof vh&&e.firestore===t.firestore&&Yr(e._query,t._query)&&e.converter===t.converter}const Nh="AsyncQueue";class Sh{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yu(this,"async_queue_retry"),this._c=()=>{const e=Qu();e&&p(Nh,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Qu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new S;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pe(e))throw e;p(Nh,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,g("INTERNAL UNHANDLED ERROR: ",Th(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ll.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&v(47125,{Pc:Th(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Th(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function kh(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(e)}class Ch{constructor(){this._progressObserver={},this._taskCompletionResolver=new S,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xh extends yh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Sh,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sh(e),this._firestoreClient=void 0,await e}}}function Ah(e){if(e._terminated)throw new N(I.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ph(e),e._firestoreClient}function Ph(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new kn(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,dh(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Xc(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}function Rh(e,t,n){if((e=te(e,xh))._firestoreClient||e._terminated)throw new N(I.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new N(I.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Ph(e)}function Dh(e,t){const n=Ah(e=te(e,xh)),r=new Ch;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?os().encode(e):e,function(e,t){return new Hc(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wc(e,t);if(e instanceof ArrayBuffer)return Wc(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ju(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=E(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=E(e),r=xs(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ii.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(tc(r));const i=new ec(r,t.serializer);let s=await t.bu();for(;s;){const e=await i.Ga(s);e&&n._updateProgress(e),s=await t.bu()}const o=await i.ja(e.localStore);return await kc(e,o.Ha,void 0),await function(e,t){const n=E(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ii.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ja)}catch(e){return y(sc,`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await oh(e),i,r)})}(n,e._databaseId,t,r),r}function Oh(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=E(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ii.getNamedQuery(e,t))}(await ih(e),t))}(Ah(e=te(e,xh)),t).then(t=>t?new vh(e,null,t.query):null)}class Mh{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Lh{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Fh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fh(pn.fromBase64String(e))}catch(e){throw new N(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Fh(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ie(e,Fh._jsonSchema))return Fh.fromBase64String(e.bytes)}}Fh._jsonSchemaVersion="firestore/bytes/1.0",Fh._jsonSchema={type:re("string",Fh._jsonSchemaVersion),bytes:re("string")};class Uh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new N(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new H(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vh{constructor(e){this._methodName=e}}class zh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new N(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new N(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return L(this._lat,e._lat)||L(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zh._jsonSchemaVersion}}static fromJSON(e){if(ie(e,zh._jsonSchema))return new zh(e.latitude,e.longitude)}}zh._jsonSchemaVersion="firestore/geoPoint/1.0",zh._jsonSchema={type:re("string",zh._jsonSchemaVersion),latitude:re("number"),longitude:re("number")};class Bh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Bh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ie(e,Bh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Bh(e.vectorValues);throw new N(I.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bh._jsonSchemaVersion="firestore/vectorValue/1.0",Bh._jsonSchema={type:re("string",Bh._jsonSchemaVersion),vectorValues:re("object")};const jh=/^__.*__$/;class qh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new qi(e,this.data,t,this.fieldTransforms)}}class $h{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v(40011,{Ac:e})}}class Gh{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Wh(this.Ac)&&jh.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Hh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ju(e)}Cc(e,t,n,r=!1){return new Gh({Ac:e,methodName:t,Dc:n,path:H.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kh(e){const t=e._freezeSettings(),n=Ju(e._databaseId);return new Hh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qh(e,t,n,r,i,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);ud("Data must be an object, but it was:",o,r);const a=od(r,o);let u,l;if(s.merge)u=new fn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ld(t,r,n);if(!o.contains(i))throw new N(I.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);fd(e,i)||e.push(i)}u=new fn(e),l=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,l=o.fieldTransforms;return new qh(new sr(a),u,l)}class Jh extends Vh{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function Yh(e,t,n){return new Gh({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Xh extends Vh{_toFieldTransform(e){return new Di(e.path,new Si)}isEqual(e){return e instanceof Xh}}class Zh extends Vh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Yh(this,e,!0),n=this.vc.map(e=>sd(e,t)),r=new Ti(n);return new Di(e.path,r)}isEqual(e){return e instanceof Zh&&o.deepEqual(this.vc,e.vc)}}class ed extends Vh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Yh(this,e,!0),n=this.vc.map(e=>sd(e,t)),r=new Ci(n);return new Di(e.path,r)}isEqual(e){return e instanceof ed&&o.deepEqual(this.vc,e.vc)}}class td extends Vh{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Ai(e.serializer,_i(e.serializer,this.Fc));return new Di(e.path,t)}isEqual(e){return e instanceof td&&this.Fc===e.Fc}}function nd(e,t,n,r){const i=e.Cc(1,t,n);ud("Data must be an object, but it was:",i,r);const s=[],a=sr.empty();rn(r,(e,r)=>{const u=hd(t,e,n);r=o.getModularInstance(r);const l=i.yc(u);if(r instanceof Jh)s.push(u);else{const e=sd(r,l);null!=e&&(s.push(u),a.set(u,e))}});const u=new fn(s);return new $h(a,u,i.fieldTransforms)}function rd(e,t,n,r,i,s){const a=e.Cc(1,t,n),u=[ld(t,r,n)],l=[i];if(s.length%2!=0)throw new N(I.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)u.push(ld(t,s[e])),l.push(s[e+1]);const c=[],h=sr.empty();for(let e=u.length-1;e>=0;--e)if(!fd(c,u[e])){const t=u[e];let n=l[e];n=o.getModularInstance(n);const r=a.yc(t);if(n instanceof Jh)c.push(t);else{const e=sd(n,r);null!=e&&(c.push(t),h.set(t,e))}}const d=new fn(c);return new $h(h,d,a.fieldTransforms)}function id(e,t,n,r=!1){return sd(n,e.Cc(r?4:3,t))}function sd(e,t){if(ad(e=o.getModularInstance(e)))return ud("Unsupported field value:",t,e),od(e,t);if(e instanceof Vh)return function(e,t){if(!Wh(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=sd(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=o.getModularInstance(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _i(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ae.fromDate(e);return{timestampValue:Ts(t.serializer,n)}}if(e instanceof ae){const n=new ae(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ts(t.serializer,n)}}if(e instanceof zh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fh)return{bytesValue:ks(t.serializer,e._byteString)};if(e instanceof _h){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:As(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Bh)return function(e,t){return{mapValue:{fields:{[An]:{stringValue:Dn},[On]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return bi(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${ee(e)}`)}(e,t)}function od(e,t){const n={};return on(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rn(e,(e,r)=>{const i=sd(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ad(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ae||e instanceof zh||e instanceof Fh||e instanceof _h||e instanceof Vh||e instanceof Bh)}function ud(e,t,n){if(!ad(n)||!Z(n)){const r=ee(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function ld(e,t,n){if((t=o.getModularInstance(t))instanceof Uh)return t._internalPath;if("string"==typeof t)return hd(e,t);throw dd("Field path arguments must be of type string or ",e,!1,void 0,n)}const cd=new RegExp("[~\\*/\\[\\]]");function hd(e,t,n){if(t.search(cd)>=0)throw dd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Uh(...t.split("."))._internalPath}catch(r){throw dd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function dd(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new N(I.INVALID_ARGUMENT,a+e+u)}function fd(e,t){return e.some(e=>e.isEqual(t))}class md{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _h(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pd extends md{data(){return super.data()}}function gd(e,t){return"string"==typeof t?hd(e,t):t instanceof Uh?t._internalPath:t._delegate._internalPath}function yd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new N(I.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bd{}class vd extends bd{}class _d extends vd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new _d(e,t,n)}_apply(e){const t=this._parse(e);return xd(e._query,t),new vh(e.firestore,e.converter,Qr(e._query,t))}_parse(e){const t=Kh(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new N(I.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Cd(o,s);const t=[];for(const n of o)t.push(kd(r,e,n));a={arrayValue:{values:t}}}else a=kd(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Cd(o,s),a=id(n,"where",o,"in"===s||"not-in"===s);return mr.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class wd extends bd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wd(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)xd(n,e),n=Qr(n,e)}(e._query,t),new vh(e.firestore,e.converter,Qr(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ed extends vd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ed(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new N(I.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new N(I.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hr(t,n)}(e._query,this._field,this._direction);return new vh(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new zr(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Id extends vd{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Id(e,t,n)}_apply(e){return new vh(e.firestore,e.converter,Jr(e._query,this._limit,this._limitType))}}class Nd extends vd{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Nd(e,t,n)}_apply(e){const t=Td(e,this.type,this._docOrFields,this._inclusive);return new vh(e.firestore,e.converter,function(e,t){return new zr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Sd extends vd{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sd(e,t,n)}_apply(e){const t=Td(e,this.type,this._docOrFields,this._inclusive);return new vh(e.firestore,e.converter,function(e,t){return new zr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Td(e,t,n,r){if(n[0]=o.getModularInstance(n[0]),n[0]instanceof md)return function(e,t,n,r,i){if(!r)throw new N(I.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of Wr(e))if(n.field.isKeyField())s.push(Wn(t,r.key));else{const e=r.data.field(n.field);if(Nn(e))throw new N(I.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new N(I.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new ur(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Kh(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new N(I.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const u=i[s];if(o[s].field.isKeyField()){if("string"!=typeof u)throw new N(I.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof u}`);if(!$r(e)&&-1!==u.indexOf("/"))throw new N(I.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${u}' contains a slash.`);const n=e.path.child(W.fromString(u));if(!K.isDocumentKey(n))throw new N(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new K(n);a.push(Wn(t,i))}else{const e=id(n,r,u);a.push(e)}}return new ur(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function kd(e,t,n){if("string"==typeof(n=o.getModularInstance(n))){if(""===n)throw new N(I.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$r(t)&&-1!==n.indexOf("/"))throw new N(I.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(W.fromString(n));if(!K.isDocumentKey(r))throw new N(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wn(e,new K(r))}if(n instanceof _h)return Wn(e,n._key);throw new N(I.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ee(n)}.`)}function Cd(e,t){if(!Array.isArray(e)||0===e.length)throw new N(I.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function xd(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new N(I.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new N(I.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Ad(e,t){if(!(t instanceof _d||t instanceof wd))throw new N(I.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Pd{convertValue(e,t="none"){switch(Ln(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw v(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return rn(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[On].arrayValue?.values?.map(e=>bn(e.doubleValue));return new Bh(t)}convertGeoPoint(e){return new zh(bn(e.latitude),bn(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Tn(e));default:return null}}convertTimestamp(e){const t=yn(e);return new ae(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=W.fromString(e);w(to(n),9688,{name:e});const r=new xn(n.get(1),n.get(3)),i=new K(n.popFirst(5));return r.isEqual(t)||g(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Rd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Dd extends Pd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _h(this.firestore,null,t)}}function Od(){return new Mh("count")}const Md="NOT SUPPORTED";class Ld{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fd extends md{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(gd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new N(I.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Fd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fd._jsonSchema={type:re("string",Fd._jsonSchemaVersion),bundleSource:re("string","DocumentSnapshot"),bundleName:re("string"),bundle:re("string")};class Ud extends Fd{data(e={}){return super.data(e)}}class Vd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ld(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ud(this._firestore,this._userDataWriter,n.key,n,new Ld(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new N(I.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Ud(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ld(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Ud(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ld(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:zd(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new N(I.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=M.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v(61501,{type:e})}}Vd._jsonSchemaVersion="firestore/querySnapshot/1.0",Vd._jsonSchema={type:re("string",Vd._jsonSchemaVersion),bundleSource:re("string","QuerySnapshot"),bundleName:re("string"),bundle:re("string")};class Bd extends Pd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _h(this.firestore,null,t)}}function jd(e,...t){e=o.getModularInstance(e);let n={includeMetadataChanges:!1,source:"default"},r=0;"object"!=typeof t[r]||kh(t[r])||(n=t[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(kh(t[r])){const e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let s,a,u;if(e instanceof _h)a=te(e.firestore,xh),u=jr(e._key.path),s={next:n=>{t[r]&&t[r]($d(a,e,n))},error:t[r+1],complete:t[r+2]};else{const n=te(e,vh);a=te(n.firestore,xh),u=n._query;const i=new Bd(a);s={next:e=>{t[r]&&t[r](new Vd(a,i,n,e))},error:t[r+1],complete:t[r+2]},yd(e._query)}return function(e,t,n,r){const i=new Gc(r),s=new Yl(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>$l(await uh(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Wl(await uh(e),s))}}(Ah(a),u,i,s)}function qd(e,t){return function(e,t){const n=new S;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Vc(e);try{const e=await function(e,t){const n=E(e),r=ae.now(),i=t.reduce((e,t)=>e.add(t.key),pi());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=oi(),u=pi();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(u=u.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Bi(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new $i(e.key,t,or(t.value.mapValue),Mi.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:li(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new an(L)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await kc(r,e.changes),await Il(r.remoteStore)}catch(e){const t=Fl(e,"Failed to persist write");n.reject(t)}}(await oh(e),t,n)),n.promise}(Ah(e),t)}function $d(e,t,n){const r=n.docs.get(t._key),i=new Bd(e);return new Fd(e,i,t._key,r,new Ld(n.hasPendingWrites,n.fromCache),t.converter)}function Wd(e,t){const n=te(e.firestore,xh),r=Ah(n),i=sn(t,(e,t)=>new Zi(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new S;return e.asyncQueue.enqueueAndForget(async()=>{try{const i=await ah(e);r.resolve(async function(e,t,n){const r=E(e),{request:i,gt:s,parent:o}=Ws(r.serializer,Hr(t),n);r.connection.$o||delete i.parent;const a=(await r.Ho("RunAggregationQuery",r.serializer.databaseId,o,i,1)).filter(e=>!!e.result);w(1===a.length,64727);const u=a[0].result?.aggregateFields;return Object.keys(u).reduce((e,t)=>(e[s[t]]=u[t],e),{})}(i,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,i).then(t=>function(e,t,n){const r=new Bd(e);return new Lh(t,r,n)}(n,e,t))}class Gd{constructor(e){this.kind="memory",this._onlineComponentProvider=$c.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new Bc(void 0)}}toJSON(){return{kind:this.kind}}}class Hd{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=Xd(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Kd{constructor(){this.kind="memoryEager",this._offlineComponentProvider=zc.provider}toJSON(){return{kind:this.kind}}}class Qd{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Bc(e)}}toJSON(){return{kind:this.kind}}}class Jd{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=$c.provider,this._offlineComponentProvider={build:t=>new jc(t,e?.cacheSizeBytes,this.forceOwnership)}}}class Yd{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=$c.provider,this._offlineComponentProvider={build:t=>new qc(t,e?.cacheSizeBytes)}}}function Xd(e){return new Jd(e?.forceOwnership)}const Zd={maxAttempts:5};class ef{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kh(e)}set(e,t,n){this._verifyNotCommitted();const r=tf(e,this._firestore),i=Rd(r.converter,t,n),s=Qh(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Mi.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=tf(e,this._firestore);let s;return s="string"==typeof(t=o.getModularInstance(t))||t instanceof Uh?rd(this._dataReader,"WriteBatch.update",i._key,t,n,r):nd(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Mi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tf(e,this._firestore);return this._mutations=this._mutations.concat(new Ki(t._key,Mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new N(I.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tf(e,t){if((e=o.getModularInstance(e)).firestore!==t)throw new N(I.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class nf{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kh(e)}get(e){const t=tf(e,this._firestore),n=new Dd(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return v(24041);const r=e[0];if(r.isFoundDocument())return new md(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new md(this._firestore,n,t._key,null,t.converter);throw v(18433,{doc:r})})}set(e,t,n){const r=tf(e,this._firestore),i=Rd(r.converter,t,n),s=Qh(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=tf(e,this._firestore);let s;return s="string"==typeof(t=o.getModularInstance(t))||t instanceof Uh?rd(this._dataReader,"Transaction.update",i._key,t,n,r):nd(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=tf(e,this._firestore);return this._transaction.delete(t._key),this}}class rf extends nf{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tf(e,this._firestore),n=new Bd(this._firestore);return super.get(e).then(e=>new Fd(this._firestore,n,t._key,e._document,new Ld(!1,!1),t.converter))}}function sf(e,t){if("string"!=typeof e[t])throw new N(I.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class of{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function af(e,t){(function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){E(e).Fs.Vs=t}(await ih(e),t))})(Ah(e._firestore),t).then(e=>p(`setting persistent cache index auto creation isEnabled=${t} succeeded`)).catch(e=>y(`setting persistent cache index auto creation isEnabled=${t} failed`,e))}const uf=new WeakMap;class lf{constructor(){this.Mc=new Map}static get instance(){return cf||(cf=new lf,function(e){if(ss)throw new Error("a TestingHooksSpi instance is already set");ss=e}(cf)),cf}lt(e){this.Mc.forEach(t=>t(e))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Mc;return n.set(t,e),()=>n.delete(t)}}let cf=null;!function(e,t=!0){!function(e){d=e}(r.SDK_VERSION),r._registerComponent(new i.Component("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new xh(new x(e.getProvider("auth-internal")),new D(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new N(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xn(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),r.registerVersion(l,c,e),r.registerVersion(l,c,"cjs2020")}(),t.AbstractUserDataWriter=Pd,t.AggregateField=Mh,t.AggregateQuerySnapshot=Lh,t.Bytes=Fh,t.CACHE_SIZE_UNLIMITED=-1,t.CollectionReference=wh,t.DocumentReference=_h,t.DocumentSnapshot=Fd,t.FieldPath=Uh,t.FieldValue=Vh,t.Firestore=xh,t.FirestoreError=N,t.GeoPoint=zh,t.LoadBundleTask=Ch,t.PersistentCacheIndexManager=of,t.Query=vh,t.QueryCompositeFilterConstraint=wd,t.QueryConstraint=vd,t.QueryDocumentSnapshot=Ud,t.QueryEndAtConstraint=Sd,t.QueryFieldFilterConstraint=_d,t.QueryLimitConstraint=Id,t.QueryOrderByConstraint=Ed,t.QuerySnapshot=Vd,t.QueryStartAtConstraint=Nd,t.SnapshotMetadata=Ld,t.Timestamp=ae,t.Transaction=rf,t.VectorValue=Bh,t.WriteBatch=ef,t._AutoId=M,t._ByteString=pn,t._DatabaseId=xn,t._DocumentKey=K,t._EmptyAppCheckTokenProvider=class{getToken(){return Promise.resolve(new R(""))}invalidateToken(){}start(e,t){}shutdown(){}},t._EmptyAuthCredentialsProvider=k,t._FieldPath=H,t._TestingHooks=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return lf.instance.onExistenceFilterMismatch(e)}},t._cast=te,t._debugAssert=function(e,t){e||v(57014,t)},t._internalAggregationQueryToProtoRunAggregationQueryRequest=function(e,t){const n=sn(t,(e,t)=>new Zi(t,e.aggregateType,e._internalFieldPath)),r=Ah(te(e.firestore,xh)),i=r._onlineComponents?.datastore.serializer;return void 0===i?null:Ws(i,Hr(e._query),n,!0).request},t._internalQueryToProtoQueryTarget=function(e){const t=Ah(te(e.firestore,xh)),n=t._onlineComponents?.datastore.serializer;return void 0===n?null:$s(n,Gr(e._query)).ft},t._isBase64Available=function(){return"undefined"!=typeof atob},t._logWarn=y,t._validateIsNotUsedTogether=J,t.addDoc=function(e,t){const n=te(e.firestore,xh),r=Eh(e),i=Rd(e.converter,t);return qd(n,[Qh(Kh(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Mi.exists(!1))]).then(()=>r)},t.aggregateFieldEqual=function(e,t){return e instanceof Mh&&t instanceof Mh&&e.aggregateType===t.aggregateType&&e._internalFieldPath?.canonicalString()===t._internalFieldPath?.canonicalString()},t.aggregateQuerySnapshotEqual=function(e,t){return Ih(e.query,t.query)&&o.deepEqual(e.data(),t.data())},t.and=function(...e){return e.forEach(e=>Ad("and",e)),wd._create("and",e)},t.arrayRemove=function(...e){return new ed("arrayRemove",e)},t.arrayUnion=function(...e){return new Zh("arrayUnion",e)},t.average=function(e){return new Mh("avg",ld("average",e))},t.clearIndexedDbPersistence=function(e){if(e._initialized&&!e._terminated)throw new N(I.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new S;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!ke.v())return Promise.resolve();const t=e+tu;await ke.delete(t)}(su(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise},t.collection=function(e,t,...n){if(e=o.getModularInstance(e),Q("collection","path",t),e instanceof yh){const r=W.fromString(t,...n);return X(r),new wh(e,null,r)}{if(!(e instanceof _h||e instanceof wh))throw new N(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(W.fromString(t,...n));return X(r),new wh(e.firestore,null,r)}},t.collectionGroup=function(e,t){if(e=te(e,yh),Q("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new N(I.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vh(e,null,function(e){return new zr(W.emptyPath(),e)}(t))},t.connectFirestoreEmulator=bh,t.count=Od,t.deleteAllPersistentCacheIndexes=function(e){(function(e){return e.asyncQueue.enqueue(async()=>function(e){const t=E(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>n.deleteAllFieldIndexes(e))}(await ih(e)))})(Ah(e._firestore)).then(e=>p("deleting all persistent cache indexes succeeded")).catch(e=>y("deleting all persistent cache indexes failed",e))},t.deleteDoc=function(e){return qd(te(e.firestore,xh),[new Ki(e._key,Mi.none())])},t.deleteField=function(){return new Jh("deleteField")},t.disableNetwork=function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await rh(e),n=await sh(e);return t.setNetworkEnabled(!1),async function(e){const t=E(e);t.Ea.add(0),await ul(t),t.Ra.set("Offline")}(n)})}(Ah(e=te(e,xh)))},t.disablePersistentCacheIndexAutoCreation=function(e){af(e,!1)},t.doc=Eh,t.documentId=function(){return new Uh(q)},t.documentSnapshotFromJSON=function(e,t,n){if(ie(t,Fd._jsonSchema)){if(t.bundle===Md)throw new N(I.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ju(e._databaseId),i=hh(t.bundle,r),s=i.Wu(),o=new ec(i.getMetadata(),r);for(const e of s)o.Ga(e);const a=o.documents;if(1!==a.length)throw new N(I.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const u=zs(r,a[0].document),l=new K(W.fromString(t.bundleName));return new Fd(e,new Dd(e),l,u,new Ld(!1,!1),n||null)}},t.enableIndexedDbPersistence=function(e,t){y("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return Rh(e,$c.provider,{build:e=>new jc(e,n.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()},t.enableMultiTabIndexedDbPersistence=async function(e){y("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();Rh(e,$c.provider,{build:e=>new qc(e,t.cacheSizeBytes)})},t.enableNetwork=function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await rh(e),n=await sh(e);return t.setNetworkEnabled(!0),function(e){const t=E(e);return t.Ea.delete(0),al(t)}(n)})}(Ah(e=te(e,xh)))},t.enablePersistentCacheIndexAutoCreation=function(e){af(e,!0)},t.endAt=function(...e){return Sd._create("endAt",e,!0)},t.endBefore=function(...e){return Sd._create("endBefore",e,!1)},t.ensureFirestoreConfigured=Ah,t.executeWrite=qd,t.getAggregateFromServer=Wd,t.getCountFromServer=function(e){return Wd(e,{count:Od()})},t.getDoc=function(e){e=te(e,_h);const t=te(e.firestore,xh);return lh(Ah(t),e._key).then(n=>$d(t,e,n))},t.getDocFromCache=function(e){e=te(e,_h);const t=te(e.firestore,xh),n=Ah(t),r=new Bd(t);return function(e,t){const n=new S;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=E(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new N(I.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Fl(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await ih(e),t,n)),n.promise}(n,e._key).then(n=>new Fd(t,r,e._key,n,new Ld(null!==n&&n.hasLocalMutations,!0),e.converter))},t.getDocFromServer=function(e){e=te(e,_h);const t=te(e.firestore,xh);return lh(Ah(t),e._key,{source:"server"}).then(n=>$d(t,e,n))},t.getDocs=function(e){e=te(e,vh);const t=te(e.firestore,xh),n=Ah(t),r=new Bd(t);return yd(e._query),ch(n,e._query).then(n=>new Vd(t,r,e,n))},t.getDocsFromCache=function(e){e=te(e,vh);const t=te(e.firestore,xh),n=Ah(t),r=new Bd(t);return function(e,t){const n=new S;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await bu(e,t,!0),i=new ic(t,r.Qs),s=i.ru(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Fl(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await ih(e),t,n)),n.promise}(n,e._query).then(n=>new Vd(t,r,e,n))},t.getDocsFromServer=function(e){e=te(e,vh);const t=te(e.firestore,xh),n=Ah(t),r=new Bd(t);return ch(n,e._query,{source:"server"}).then(n=>new Vd(t,r,e,n))},t.getFirestore=function(e,t){const n="object"==typeof e?e:r.getApp(),i="string"==typeof e?e:t||Cn,s=r._getProvider(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const e=o.getDefaultEmulatorHostnameAndPort("firestore");e&&bh(s,...e)}return s},t.getPersistentCacheIndexManager=function(e){e=te(e,xh);const t=uf.get(e);if(t)return t;const n=Ah(e);if("persistent"!==n._uninitializedComponentsProvider?._offline.kind)return null;const r=new of(e);return uf.set(e,r),r},t.increment=function(e){return new td("increment",e)},t.initializeFirestore=function(e,t,n){n||(n=Cn);const i=r._getProvider(e,"firestore");if(i.isInitialized(n)){const e=i.getImmediate({identifier:n}),r=i.getOptions(n);if(o.deepEqual(r,t))return e;throw new N(I.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new N(I.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<ya)throw new N(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&o.isCloudWorkstation(t.host)&&o.pingServer(t.host),i.initialize({options:t,instanceIdentifier:n})},t.limit=function(e){return ne("limit",e),Id._create("limit",e,"F")},t.limitToLast=function(e){return ne("limitToLast",e),Id._create("limitToLast",e,"L")},t.loadBundle=Dh,t.memoryEagerGarbageCollector=function(){return new Kd},t.memoryLocalCache=function(e){return new Gd(e)},t.memoryLruGarbageCollector=function(e){return new Qd(e?.cacheSizeBytes)},t.namedQuery=Oh,t.onSnapshot=jd,t.onSnapshotResume=function(e,t,...n){const r=o.getModularInstance(e),i=function(e){const t={bundle:"",bundleName:"",bundleSource:""},n=["bundle","bundleName","bundleSource"];for(const r of n){if(!(r in e)){t.error=`snapshotJson missing required field: ${r}`;break}const n=e[r];if("string"!=typeof n){t.error=`snapshotJson field '${r}' must be a string.`;break}if(0===n.length){t.error=`snapshotJson field '${r}' cannot be an empty string.`;break}"bundle"===r?t.bundle=n:"bundleName"===r?t.bundleName=n:"bundleSource"===r&&(t.bundleSource=n)}return t}(t);if(i.error)throw new N(I.INVALID_ARGUMENT,i.error);let s,a=0;if("object"!=typeof n[a]||kh(n[a])||(s=n[a++]),"QuerySnapshot"===i.bundleSource){let e=null;if("object"==typeof n[a]&&kh(n[a])){const t=n[a++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:n[a++],error:n[a++],complete:n[a++]};return function(e,t,n,r,i){let s,o=!1;return Dh(e,t.bundle).then(()=>Oh(e,t.bundleName)).then(e=>{e&&!o&&(i&&e.withConverter(i),s=jd(e,n||{},r))}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{o||(o=!0,s&&s())}}(r,i,s,e,n[a])}if("DocumentSnapshot"===i.bundleSource){let e=null;if("object"==typeof n[a]&&kh(n[a])){const t=n[a++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:n[a++],error:n[a++],complete:n[a++]};return function(e,t,n,r,i){let s,o=!1;return Dh(e,t.bundle).then(()=>{if(!o){const o=new _h(e,i||null,K.fromPath(t.bundleName));s=jd(o,n||{},r)}}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{o||(o=!0,s&&s())}}(r,i,s,e,n[a])}throw new N(I.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)},t.onSnapshotsInSync=function(e,t){return function(e,t){const n=new Gc(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){E(e).Ca.add(t),t.next()}(await uh(e),n)),()=>{n.Nu(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){E(e).Ca.delete(t)}(await uh(e),n))}}(Ah(e=te(e,xh)),kh(t)?t:{next:t})},t.or=function(...e){return e.forEach(e=>Ad("or",e)),wd._create("or",e)},t.orderBy=function(e,t="asc"){const n=t,r=gd("orderBy",e);return Ed._create(r,n)},t.persistentLocalCache=function(e){return new Hd(e)},t.persistentMultipleTabManager=function(){return new Yd},t.persistentSingleTabManager=Xd,t.query=function(e,t,...n){let r=[];t instanceof bd&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof wd).length,n=e.filter(e=>e instanceof _d).length;if(t>1||t>0&&n>0)throw new N(I.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e},t.queryEqual=Ih,t.querySnapshotFromJSON=function(e,t,n){if(ie(t,Vd._jsonSchema)){if(t.bundle===Md)throw new N(I.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ju(e._databaseId),i=hh(t.bundle,r),s=i.Wu(),o=new ec(i.getMetadata(),r);for(const e of s)o.Ga(e);if(1!==o.queries.length)throw new N(I.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=ho(o.queries[0].bundledQuery),u=o.documents;let l=new Ul;u.map(e=>{const t=zs(r,e.document);l=l.add(t)});const c=zl.fromInitialDocuments(a,l,pi(),!1,!1),h=new vh(e,n||null,a);return new Vd(e,new Dd(e),h,c)}},t.refEqual=function(e,t){return e=o.getModularInstance(e),t=o.getModularInstance(t),(e instanceof _h||e instanceof wh)&&(t instanceof _h||t instanceof wh)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter},t.runTransaction=function(e,t,n){e=te(e,xh);const r={...Zd,...n};return function(e){if(e.maxAttempts<1)throw new N(I.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new S;return e.asyncQueue.enqueueAndForget(async()=>{const i=await ah(e);new Jc(e.asyncQueue,i,n,t,r).ju()}),r.promise}(Ah(e),n=>t(new rf(e,n)),r)},t.serverTimestamp=function(){return new Xh("serverTimestamp")},t.setDoc=function(e,t,n){e=te(e,_h);const r=te(e.firestore,xh),i=Rd(e.converter,t,n);return qd(r,[Qh(Kh(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Mi.none())])},t.setIndexConfiguration=function(e,t){const n=Ah(e=te(e,xh));if(!n._uninitializedComponentsProvider||"memory"===n._uninitializedComponentsProvider._offline.kind)return y("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new N(I.INVALID_ARGUMENT,"Failed to parse JSON: "+e?.message)}}(e):e,n=[];if(Array.isArray(t.indexes))for(const e of t.indexes){const t=sf(e,"collectionGroup"),r=[];if(Array.isArray(e.fields))for(const t of e.fields){const e=hd("setIndexConfiguration",sf(t,"fieldPath"));"CONTAINS"===t.arrayConfig?r.push(new me(e,2)):"ASCENDING"===t.order?r.push(new me(e,0)):"DESCENDING"===t.order&&r.push(new me(e,1))}n.push(new ce(ce.UNKNOWN_ID,t,r,ge.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=E(e),r=n.indexManager,i=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>function(e,t,n,r,i){e=[...e],t=[...t],e.sort(n),t.sort(n);const s=e.length,o=t.length;let a=0,u=0;for(;a<o&&u<s;){const s=n(e[u],t[a]);s<0?i(e[u++]):s>0?r(t[a++]):(a++,u++)}for(;a<o;)r(t[a++]);for(;u<s;)i(e[u++])}(n,t,fe,t=>{i.push(r.addFieldIndex(e,t))},t=>{i.push(r.deleteFieldIndex(e,t))})).next(()=>Ne.waitFor(i)))}(await ih(e),t))}(n,r)},t.setLogLevel=function(e){f.setLogLevel(e)},t.snapshotEqual=function(e,t){return e instanceof Fd&&t instanceof Fd?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Vd&&t instanceof Vd&&e._firestore===t._firestore&&Ih(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},t.startAfter=function(...e){return Nd._create("startAfter",e,!1)},t.startAt=function(...e){return Nd._create("startAt",e,!0)},t.sum=function(e){return new Mh("sum",ld("sum",e))},t.terminate=function(e){return r._removeServiceInstance(e.app,"firestore",e._databaseId.database),e._delete()},t.updateDoc=function(e,t,n,...r){e=te(e,_h);const i=te(e.firestore,xh),s=Kh(i);let a;return a="string"==typeof(t=o.getModularInstance(t))||t instanceof Uh?rd(s,"updateDoc",e._key,t,n,r):nd(s,"updateDoc",e._key,t),qd(i,[a.toMutation(e._key,Mi.exists(!0))])},t.vector=function(e){return new Bh(e)},t.waitForPendingWrites=function(e){return function(e){const t=new S;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=E(e);pl(n.remoteStore)||p(sc,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=E(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(e===ze)return void t.resolve();const r=n.mu.get(e)||[];r.push(t),n.mu.set(e,r)}catch(e){const n=Fl(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await oh(e),t)),t.promise}(Ah(e=te(e,xh)))},t.where=function(e,t,n){const r=t,i=gd("where",e);return _d._create(i,r,n)},t.writeBatch=function(e){return Ah(e=te(e,xh)),new ef(e,t=>qd(e,t))}},287:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var _=v.prototype=new b;_.constructor=v,p(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!N.hasOwnProperty(i)&&(s[i]=t[i]);var u=arguments.length-2;if(1===u)s.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===s[i]&&(s[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function x(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===s?"."+C(u,0):s,w(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),x(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(u=0,s=""===s?".":s+":",w(e))for(var l=0;l<e.length;l++){var c=s+C(a=e[l],l);u+=x(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)u+=x(a=a.value,t,i,c=s+C(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)E.call(t,l)&&!N.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},290:function(e,t,n){var r=n(994),i=r(n(540)),s=n(338),o=r(n(865)),a=document.getElementById("root");(0,s.createRoot)(a).render(i.default.createElement(o.default,{__self:this,__source:{fileName:"D:\\FootballManagerPro\\index.react.js",lineNumber:7,columnNumber:13}}))},291:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise(function(i,s){var o=e.apply(n,r);function a(e){t(o,i,s,a,u,"next",e)}function u(e){t(o,i,s,a,u,"throw",e)}a(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(o[u]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(336);const i="[DEFAULT]";class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=i){return this.instances.has(e)}getOptions(e=i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===i?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var r;return n||null}normalizeInstanceIdentifier(e=i){return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}t.Component=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},t.ComponentContainer=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},t.Provider=s},336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(873);const i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,u=a?e[t+2]:0,l=i>>2,c=(3&i)<<4|o>>4;let h=(15&o)<<2|u>>6,d=63&u;a||(d=64,s||(h=64)),r.push(n[l],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new l;const u=i<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){const t=a(e);return u.encodeByteArray(t,!0)},h=function(e){return c(e).replace(/\./g,"")},d=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function f(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&m(n)&&(e[n]=f(e[n],t[n]));return e}function m(e){return"__proto__"!==e}function p(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}const g=()=>{try{return r.getDefaultsFromPostinstall()||p().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},y=e=>g()?.emulatorHosts?.[e];class b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function v(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}const _={};let w=!1;function E(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function I(){const e=g()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function N(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(k,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new S(r,o,n)}}const k=/\{\$([^}]+)}/g;function C(e){return JSON.parse(e)}const x=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=C(d(s[0])||""),n=C(d(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};function A(e){return null!==e&&"object"==typeof e}class P{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=R),void 0===r.error&&(r.error=R),void 0===r.complete&&(r.complete=R);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R(){}function D(e,t){return`${e} failed: ${t} argument `}const O=144e5;t.CONSTANTS=i,t.DecodeBase64StringError=l,t.Deferred=b,t.ErrorFactory=T,t.FirebaseError=S,t.MAX_VALUE_MILLIS=O,t.RANDOM_FACTOR=.5,t.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],u=this.chain_[3],l=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=u^o&(a^u),i=1518500249):(r=o^a^u,i=1859775393):e<60?(r=o&a|u&(o|a),i=2400959708):(r=o^a^u,i=3395469782);const t=(s<<5|s>>>27)+r+l+i+n[e]&4294967295;l=u,u=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}},t.areCookiesEnabled=function(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)},t.assert=s,t.assertionError=o,t.async=function(e,t){return(...n)=>{Promise.resolve(!0).then(()=>{e(...n)}).catch(e=>{t&&t(e)})}},t.base64=u,t.base64Decode=d,t.base64Encode=c,t.base64urlEncodeWithoutPadding=h,t.calculateBackoffMillis=function(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(O,r+i)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(s)),""].join(".")},t.createSubscribe=function(e,t){const n=new P(e,t);return n.subscribe.bind(n)},t.decode=x,t.deepCopy=function(e){return f(void 0,e)},t.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),i=Object.keys(n);for(const s of r){if(!i.includes(s))return!1;const r=t[s],o=n[s];if(A(r)&&A(o)){if(!e(r,o))return!1}else if(r!==o)return!1}for(const e of i)if(!r.includes(e))return!1;return!0},t.deepExtend=f,t.errorPrefix=D,t.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)},t.getDefaultAppConfig=()=>g()?.config,t.getDefaultEmulatorHost=y,t.getDefaultEmulatorHostnameAndPort=e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t.getDefaults=g,t.getExperimentalSetting=e=>g()?.[`_${e}`],t.getGlobal=p,t.getModularInstance=function(e){return e&&e._delegate?e._delegate:e},t.getUA=E,t.isAdmin=function(e){const t=x(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"undefined"!=typeof window||N()},t.isBrowserExtension=function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isCloudWorkstation=v,t.isCloudflareWorker=function(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent},t.isElectron=function(){return E().indexOf("Electron/")>=0},t.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(e){return!1}},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())},t.isNode=I,t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!I()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isSafariOrWebkit=function(){return!I()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return E().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){const t=x(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){const t=x(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.isWebWorker=N,t.issuedAtTime=function(e){const t=x(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=C,t.map=function(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.ordinal=function(e){return Number.isFinite(e)?e+function(e){const t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";const n=e%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(e):`${e}`},t.pingServer=async function(e){return(await fetch(e,{credentials:"include"})).ok},t.promiseWithTimeout=function(e,t=2e3){const n=new b;return setTimeout(()=>n.reject("timeout!"),t),e.then(n.resolve,n.reject),n.promise},t.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,s(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.updateEmulatorBanner=function(e,t){if("undefined"==typeof window||"undefined"==typeof document||!v(window.location.host)||_[e]===t||_[e]||w)return;function n(e){return`__firebase__banner__${e}`}_[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(_))_[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),a=document.getElementById(o)||document.createElement("a"),u=n("preprendIcon"),l=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(a,o);const n=function(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{w=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(l,u),t.append(l,s,a,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",l.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(l.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()},t.validateArgCount=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(D(e,t)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(D(e,t)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(e){t(e)}})},t.validateNamespace=function(e,t,n){if((!n||t)&&"string"!=typeof t)throw new Error(D(e,"namespace")+"must be a valid firebase namespace.")}},338:(e,t,n)=>{"use strict";var r=n(961);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},398:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([e.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;\n  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);\n  color: white;\n  min-height: 100vh;\n}\n\n.app {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  background: rgba(0, 0, 0, 0.3);\n  padding: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  backdrop-filter: blur(10px);\n}\n\n.header h1 {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n\n.header-info {\n  display: flex;\n  gap: 1rem;\n  font-weight: bold;\n}\n\n.main-content {\n  flex: 1;\n  padding: 1rem;\n  overflow-y: auto;\n  margin-bottom: 100px;\n  min-height: calc(100vh - 160px);\n}\n\n.bottom-nav {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.9);\n  display: flex;\n  justify-content: space-around;\n  padding: 0.75rem 0.5rem;\n  backdrop-filter: blur(10px);\n  z-index: 1000;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.nav-btn {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.7);\n  padding: 0.5rem;\n  border-radius: 8px;\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-transform: capitalize;\n}\n\n.nav-btn.active {\n  background: rgba(74, 144, 226, 0.3);\n  color: white;\n}\n\n.nav-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n}\n\n.screen {\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.screen h2 {\n  margin-bottom: 1.5rem;\n  text-align: center;\n  font-size: 2rem;\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n\n.stat-card {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1.5rem;\n  border-radius: 12px;\n  text-align: center;\n  backdrop-filter: blur(5px);\n}\n\n.stat-card h3 {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.9rem;\n  margin-bottom: 0.5rem;\n}\n\n.stat-card p {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n\n.player-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.player-card {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1rem;\n  border-radius: 12px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  backdrop-filter: blur(5px);\n}\n\n.player-card.transfer {\n  border: 2px solid rgba(74, 144, 226, 0.5);\n}\n\n.player-info h4 {\n  margin-bottom: 0.5rem;\n  font-size: 1.1rem;\n}\n\n.player-info p {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.9rem;\n  margin-bottom: 0.25rem;\n}\n\n.sign-btn {\n  background: linear-gradient(45deg, #4a90e2, #5ba3f5);\n  border: none;\n  color: white;\n  padding: 0.7rem 1.5rem;\n  border-radius: 8px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.sign-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);\n}\n\n.formation-selector {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n\n.formation-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.8rem 1.5rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.formation-btn.active {\n  background: rgba(74, 144, 226, 0.3);\n  border-color: #4a90e2;\n}\n\n.pitch {\n  position: relative;\n  background:\n    radial-gradient(ellipse at center, #388e3c 20%, #2e7d32 40%, #1b5e20 100%),\n    linear-gradient(90deg, #2e7d32 0%, #388e3c 50%, #2e7d32 100%);\n  border: 4px solid #ffffff;\n  border-radius: 8px;\n  padding: 2rem;\n  width: 100%;\n  max-width: 400px;\n  height: 600px;\n  margin: 20px auto;\n  box-shadow:\n    0 0 0 2px #1b5e20,\n    0 8px 32px rgba(0, 0, 0, 0.4),\n    inset 0 0 60px rgba(255, 255, 255, 0.1);\n  overflow: hidden;\n}\n\n/* Center line */\n.pitch::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 0;\n  transform: translateY(-50%);\n  width: 100%;\n  height: 3px;\n  background: white;\n  opacity: 0.9;\n  box-shadow: 0 0 4px rgba(255, 255, 255, 0.5);\n}\n\n/* Center circle */\n.pitch::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 120px;\n  height: 120px;\n  border: 3px solid white;\n  border-radius: 50%;\n  opacity: 0.9;\n  box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);\n}\n\n/* Corner arcs */\n.pitch .corner-arc {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  border: 2px solid white;\n  border-radius: 50%;\n  opacity: 0.8;\n}\n\n.pitch .corner-arc.top-left {\n  top: -10px;\n  left: -10px;\n  border-right: none;\n  border-bottom: none;\n}\n\n.pitch .corner-arc.top-right {\n  top: -10px;\n  right: -10px;\n  border-left: none;\n  border-bottom: none;\n}\n\n.pitch .corner-arc.bottom-left {\n  bottom: -10px;\n  left: -10px;\n  border-right: none;\n  border-top: none;\n}\n\n.pitch .corner-arc.bottom-right {\n  bottom: -10px;\n  right: -10px;\n  border-left: none;\n  border-top: none;\n}\n\n/* Goal areas */\n.pitch .goal-area-top {\n  position: absolute;\n  top: 0;\n  left: 25%;\n  width: 50%;\n  height: 18%;\n  border: 3px solid white;\n  border-top: none;\n  opacity: 0.9;\n  border-radius: 0 0 8px 8px;\n  box-shadow: inset 0 -2px 6px rgba(255, 255, 255, 0.2);\n}\n\n.pitch .goal-area-bottom {\n  position: absolute;\n  bottom: 0;\n  left: 25%;\n  width: 50%;\n  height: 18%;\n  border: 3px solid white;\n  border-bottom: none;\n  opacity: 0.9;\n  border-radius: 8px 8px 0 0;\n  box-shadow: inset 0 2px 6px rgba(255, 255, 255, 0.2);\n}\n\n/* Small goal areas */\n.pitch .small-goal-area-top {\n  position: absolute;\n  top: 0;\n  left: 35%;\n  width: 30%;\n  height: 8%;\n  border: 2px solid white;\n  border-top: none;\n  opacity: 0.8;\n  border-radius: 0 0 4px 4px;\n}\n\n.pitch .small-goal-area-bottom {\n  position: absolute;\n  bottom: 0;\n  left: 35%;\n  width: 30%;\n  height: 8%;\n  border: 2px solid white;\n  border-bottom: none;\n  opacity: 0.8;\n  border-radius: 4px 4px 0 0;\n}\n\n/* Goal lines */\n.pitch .goal-line-top {\n  position: absolute;\n  top: -4px;\n  left: 40%;\n  width: 20%;\n  height: 8px;\n  background: white;\n  opacity: 0.9;\n  border-radius: 0 0 4px 4px;\n}\n\n.pitch .goal-line-bottom {\n  position: absolute;\n  bottom: -4px;\n  left: 40%;\n  width: 20%;\n  height: 8px;\n  background: white;\n  opacity: 0.9;\n  border-radius: 4px 4px 0 0;\n}\n\n.formation-display {\n  text-align: center;\n  color: white;\n}\n\n.transfer-filters {\n  margin-bottom: 1.5rem;\n  display: flex;\n  justify-content: center;\n}\n\n.transfer-filters select {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.7rem 1rem;\n  border-radius: 8px;\n  cursor: pointer;\n}\n\n.match-options {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 2rem;\n  max-width: 300px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.match-btn {\n  background: linear-gradient(45deg, #4a90e2, #5ba3f5);\n  border: none;\n  color: white;\n  padding: 1rem;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.match-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);\n}\n\n.recent-matches h3 {\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.match-result {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1rem;\n  border-radius: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n\n.win {\n  background: #4caf50;\n  padding: 0.3rem 0.8rem;\n  border-radius: 4px;\n  font-size: 0.8rem;\n  font-weight: bold;\n}\n\n.loss {\n  background: #f44336;\n  padding: 0.3rem 0.8rem;\n  border-radius: 4px;\n  font-size: 0.8rem;\n  font-weight: bold;\n}\n\n.leaderboard-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.rank-item {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1rem;\n  border-radius: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.rank-item.current {\n  border: 2px solid #4a90e2;\n  background: rgba(74, 144, 226, 0.2);\n}\n\n.rank {\n  font-weight: bold;\n  font-size: 1.2rem;\n  min-width: 30px;\n}\n\n.profile-info {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 2rem;\n  border-radius: 12px;\n  text-align: center;\n  backdrop-filter: blur(5px);\n}\n\n.profile-info h3 {\n  font-size: 1.8rem;\n  margin-bottom: 1rem;\n}\n\n.profile-info p {\n  margin-bottom: 0.5rem;\n  font-size: 1.1rem;\n}\n\n.friends-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-bottom: 2rem;\n}\n\n.friend-item {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1rem;\n  border-radius: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.status.online {\n  color: #4caf50;\n  font-weight: bold;\n}\n\n.status.offline {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n.add-friend-btn {\n  background: linear-gradient(45deg, #4a90e2, #5ba3f5);\n  border: none;\n  color: white;\n  padding: 1rem;\n  border-radius: 8px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  max-width: 200px;\n  margin: 0 auto;\n  display: block;\n}\n\n.add-friend-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);\n}\n\n/* Authentication Styles */\n.auth-container {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 2rem;\n}\n\n.auth-card {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  padding: 3rem;\n  text-align: center;\n  max-width: 400px;\n  width: 100%;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n}\n\n.auth-card h1 {\n  margin-bottom: 2rem;\n  font-size: 2.5rem;\n}\n\n.auth-tabs {\n  display: flex;\n  margin-bottom: 2rem;\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.auth-tab {\n  flex: 1;\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  color: rgba(255, 255, 255, 0.7);\n  padding: 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.auth-tab.active {\n  background: rgba(74, 144, 226, 0.3);\n  color: white;\n}\n\n.auth-input {\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: 2px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  color: white;\n  font-size: 1rem;\n}\n\n.auth-input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n.auth-input:focus {\n  outline: none;\n  border-color: #4a90e2;\n}\n\n.auth-button {\n  width: 100%;\n  background: linear-gradient(45deg, #4a90e2, #5ba3f5);\n  border: none;\n  color: white;\n  padding: 1rem;\n  border-radius: 10px;\n  font-size: 1.1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-bottom: 1rem;\n}\n\n.auth-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 20px rgba(74, 144, 226, 0.4);\n}\n\n.auth-demo {\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 0.9rem;\n}\n\n.logout-btn {\n  background: rgba(244, 67, 54, 0.8);\n  border: none;\n  color: white;\n  padding: 0.5rem 1rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n}\n\n.logout-btn:hover {\n  background: rgba(244, 67, 54, 1);\n  transform: translateY(-1px);\n}\n\n/* Enhanced Formation Styles */\n.position {\n  position: absolute;\n  width: 60px;\n  height: 60px;\n  background: rgba(255, 255, 255, 0.95);\n  border: 3px solid #2196f3;\n  border-radius: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  z-index: 10;\n  font-weight: bold;\n  text-align: center;\n}\n\n.position:hover {\n  transform: translate(-50%, -50%) scale(1.1);\n  box-shadow: 0 6px 12px rgba(74, 144, 226, 0.4);\n}\n\n.position.filled {\n  background: linear-gradient(45deg, #1e88e5, #42a5f5);\n  color: white;\n  border-color: #0d47a1;\n  box-shadow: 0 4px 16px rgba(30, 136, 229, 0.4);\n}\n\n.position-icon {\n  font-size: 20px;\n  color: #4a90e2;\n  font-weight: bold;\n}\n\n.position-label {\n  font-size: 8px;\n  color: #4a90e2;\n  font-weight: bold;\n  margin-top: 2px;\n}\n\n.player-number {\n  font-size: 16px;\n  font-weight: bold;\n  line-height: 1;\n}\n\n.player-short-name {\n  font-size: 8px;\n  font-weight: bold;\n  margin-top: 2px;\n  line-height: 1;\n}\n\n.bench-section {\n  margin-top: 2rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n}\n\n.bench-section h3 {\n  margin-bottom: 1rem;\n  color: white;\n}\n\n.bench-players {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 0.5rem;\n}\n\n.bench-player {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 0.8rem;\n  border-radius: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.player-name {\n  font-weight: bold;\n}\n\n.player-info {\n  font-size: 0.9rem;\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);\n  border-radius: 20px;\n  padding: 2rem;\n  max-width: 500px;\n  width: 90%;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.modal-content h3 {\n  margin-bottom: 1.5rem;\n  text-align: center;\n  color: white;\n}\n\n.player-selection {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.player-option {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.player-option:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateY(-2px);\n}\n\n.player-option.incompatible {\n  opacity: 0.6;\n  background: rgba(244, 67, 54, 0.2);\n}\n\n.player-option.already-assigned {\n  background: rgba(255, 193, 7, 0.2);\n  border: 1px solid rgba(255, 193, 7, 0.5);\n}\n\n.player-option .player-name {\n  font-weight: bold;\n  font-size: 1.1rem;\n  color: white;\n}\n\n.player-details {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.warning {\n  color: #ff6b6b;\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n\n.close-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  padding: 1rem;\n  border-radius: 10px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: all 0.3s ease;\n  width: 100%;\n}\n\n.close-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n@media (max-width: 768px) {\n  .bottom-nav {\n    overflow-x: auto;\n    justify-content: flex-start;\n  }\n\n  .nav-btn {\n    min-width: 80px;\n    font-size: 0.7rem;\n  }\n\n  .stats-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .formation-selector {\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .match-options {\n    max-width: 100%;\n  }\n\n  .auth-card {\n    padding: 2rem;\n    margin: 1rem;\n  }\n\n  .position {\n    width: 40px;\n    height: 40px;\n  }\n\n  .player-number {\n    font-size: 14px;\n  }\n\n  .player-short-name {\n    font-size: 7px;\n  }\n\n  .bench-players {\n    grid-template-columns: 1fr;\n  }\n}",""]);const a=o},486:(e,t,n)=>{"use strict";var r=n(199),i=n(336),s=n(844),o=n(319);const a=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},u=new i.ErrorFactory("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),l=new s.Logger("@firebase/auth");function c(e,...t){l.logLevel<=s.LogLevel.ERROR&&l.error(`Auth (${r.SDK_VERSION}): ${e}`,...t)}function h(e,...t){throw g(e,...t)}function d(e,...t){return g(e,...t)}function f(e,t,n){const r={...a(),[t]:n};return new i.ErrorFactory("auth","Firebase",r).create(t,{appName:e.name})}function m(e){return f(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&h(e,"argument-error"),f(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function g(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return u.create(e,...t)}function y(e,t,...n){if(!e)throw g(t,...n)}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw c(t),new Error(t)}function v(e,t){e||b(t)}function _(){return"undefined"!=typeof self&&self.location?.href||""}function w(){return"http:"===E()||"https:"===E()}function E(){return"undefined"!=typeof self&&self.location?.protocol||null}class I{constructor(e,t){this.shortDelay=e,this.longDelay=t,v(t>e,"Short delay should be less than long delay!"),this.isMobile=i.isMobileCordova()||i.isReactNative()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(w()||i.isBrowserExtension()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function N(e,t){v(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class S{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},k=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C=new I(3e4,6e4);function x(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function A(e,t,n,r,s={}){return P(e,s,async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=i.querystring({key:e.config.apiKey,...o}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:u,...s};return i.isCloudflareWorker()||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&i.isCloudWorkstation(e.emulatorConfig.host)&&(l.credentials="include"),S.fetch()(await D(e,e.config.apiHost,n,a),l)})}async function P(e,t,n){e._canInitEmulator=!1;const r={...T,...t};try{const t=new M(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw L(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw L(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw L(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw L(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw f(e,a,o);h(e,a)}}catch(t){if(t instanceof i.FirebaseError)throw t;h(e,"network-request-failed",{message:String(t)})}}async function R(e,t,n,r,i={}){const s=await A(e,t,n,r,i);return"mfaPendingCredential"in s&&h(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function D(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?N(e.config,i):`${e.config.apiScheme}://${i}`;return k.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())?s._getPersistence()._getFinalTarget(o).toString():o}function O(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(d(this.auth,"network-request-failed")),C.get())})}}function L(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=d(e,t,r);return i.customData._tokenResponse=n,i}function F(e){return void 0!==e&&void 0!==e.getResponse}function U(e){return void 0!==e&&void 0!==e.enterprise}class V{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return O(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z(e,t){return A(e,"GET","/v2/recaptchaConfig",x(e,t))}async function B(e,t){return A(e,"POST","/v1/accounts:lookup",t)}function j(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function q(e,t=!1){const n=i.getModularInstance(e),r=await n.getIdToken(t),s=W(r);y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=o?.sign_in_provider;return{claims:s,token:r,authTime:j($(s.auth_time)),issuedAtTime:j($(s.iat)),expirationTime:j($(s.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}function $(e){return 1e3*Number(e)}function W(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return c("JWT malformed, contained fewer than 3 sections"),null;try{const e=i.base64Decode(n);return e?JSON.parse(e):(c("Failed to decode base64 JWT payload"),null)}catch(e){return c("Caught error parsing JWT payload as JSON",e?.toString()),null}}function G(e){const t=W(e);return y(t,"internal-error"),y(void 0!==t.exp,"internal-error"),y(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function H(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof i.FirebaseError&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class K{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class Q{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=j(this.lastLoginAt),this.creationTime=j(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function J(e){const t=e.auth,n=await e.getIdToken(),r=await H(e,B(t,{idToken:n}));y(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=i.providerUserInfo?.length?X(i.providerUserInfo):[],o=(a=e.providerData,u=s,[...a.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var a,u;const l=e.isAnonymous,c=!(e.email&&i.passwordHash||o?.length),h=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Q(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,d)}async function Y(e){const t=i.getModularInstance(e);await J(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function X(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y(void 0!==e.idToken,"internal-error"),y(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):G(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=G(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await P(e,{},async()=>{const n=i.querystring({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await D(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:n};return e.emulatorConfig&&i.isCloudWorkstation(e.emulatorConfig.host)&&(u.credentials="include"),S.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Z;return n&&(y("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(y("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return b("not implemented")}}function ee(e,t){y("string"==typeof e||void 0===e,"internal-error",{appName:t})}class te{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new K(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Q(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await H(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return q(this,e)}reload(){return Y(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new te({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await J(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(r._isFirebaseServerApp(this.auth.app))return Promise.reject(m(this.auth));const e=await this.getIdToken();return await H(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,u=t.createdAt??void 0,l=t.lastLoginAt??void 0,{uid:c,emailVerified:h,isAnonymous:d,providerData:f,stsTokenManager:m}=t;y(c&&m,e,"internal-error");const p=Z.fromJSON(this.name,m);y("string"==typeof c,e,"internal-error"),ee(n,e.name),ee(r,e.name),y("boolean"==typeof h,e,"internal-error"),y("boolean"==typeof d,e,"internal-error"),ee(i,e.name),ee(s,e.name),ee(o,e.name),ee(a,e.name),ee(u,e.name),ee(l,e.name);const g=new te({uid:c,auth:e,email:r,emailVerified:h,displayName:n,isAnonymous:d,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:p,createdAt:u,lastLoginAt:l});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t,n=!1){const r=new Z;r.updateFromServerResponse(t);const i=new te({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await J(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?X(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||i?.length),o=new Z;o.updateFromIdToken(n);const a=new te({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Q(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||i?.length)};return Object.assign(a,u),a}}const ne=new Map;function re(e){v(e instanceof Function,"Expected a class definition");let t=ne.get(e);return t?(v(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ne.set(e,t),t)}class ie{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ie.type="NONE";const se=ie;function oe(e,t,n){return`firebase:${e}:${t}:${n}`}class ae{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=oe(this.userKey,r.apiKey,i),this.fullPersistenceKey=oe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await B(this.auth,{idToken:e}).catch(()=>{});return t?te._fromGetAccountInfoResponse(this.auth,t,e):null}return te._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ae(re(se),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||re(se);const s=oe(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){let r;if("string"==typeof t){const n=await B(e,{idToken:t}).catch(()=>{});if(!n)break;r=await te._fromGetAccountInfoResponse(e,n,t)}else r=te._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new ae(i,e,n)):new ae(i,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(de(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(le(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(me(t))return"Blackberry";if(pe(t))return"Webos";if(ce(t))return"Safari";if((t.includes("chrome/")||he(t))&&!t.includes("edge/"))return"Chrome";if(fe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function le(e=i.getUA()){return/firefox\//i.test(e)}function ce(e=i.getUA()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function he(e=i.getUA()){return/crios\//i.test(e)}function de(e=i.getUA()){return/iemobile/i.test(e)}function fe(e=i.getUA()){return/android/i.test(e)}function me(e=i.getUA()){return/blackberry/i.test(e)}function pe(e=i.getUA()){return/webos/i.test(e)}function ge(e=i.getUA()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ye(e=i.getUA()){return ge(e)||fe(e)||pe(e)||me(e)||/windows phone/i.test(e)||de(e)}function be(e,t=[]){let n;switch(e){case"Browser":n=ue(i.getUA());break;case"Worker":n=`${ue(i.getUA())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.SDK_VERSION}/${s}`}class ve{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}class _e{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class we{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ie(this),this.idTokenSubscription=new Ie(this),this.beforeStateQueue=new ve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=re(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ae.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await B(this,{idToken:e}),n=await te._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(r._isFirebaseServerApp(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,r=n?._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==r||!s?.user||(n=s.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await J(e)}catch(e){if("auth/network-request-failed"!==e?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(r._isFirebaseServerApp(this.app))return Promise.reject(m(this));const t=e?i.getModularInstance(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return r._isFirebaseServerApp(this.app)?Promise.reject(m(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return r._isFirebaseServerApp(this.app)?Promise.reject(m(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(re(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return A(e,"GET","/v2/passwordPolicy",x(e,t))}(this),t=new _e(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new i.ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",x(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&re(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await ae.create(this,[re(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=be(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(r._isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e,...t){l.logLevel<=s.LogLevel.WARN&&l.warn(`Auth (${r.SDK_VERSION}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ee(e){return i.getModularInstance(e)}class Ie{constructor(e){this.auth=e,this.observer=null,this.addObserver=i.createSubscribe(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ne={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Se(e){return Ne.loadJS(e)}function Te(e){return`__${e}${Math.floor(1e6*Math.random())}`}const ke=1e12;class Ce{constructor(e){this.auth=e,this.counter=ke,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Pe(e,this.auth.name,t||{})),this.counter++,n}reset(e){const t=e||ke;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||ke;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||ke;return this._widgets.get(t)?.execute(),""}}class xe{constructor(){this.enterprise=new Ae}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ae{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Pe{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;y(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<50;n++)e.push(t.charAt(Math.floor(62*Math.random())));return e.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Re="NO_RECAPTCHA";class De{constructor(e){this.type="recaptcha-enterprise",this.auth=Ee(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;U(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Re)})}):r(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?(new xe).execute("siteKey",{action:"verify"}):new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{z(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new V(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&U(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ne.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Se(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Oe(e,t,n,r=!1,i=!1){const s=new De(e);let o;if(i)o=Re;else try{o=await s.verify(n)}catch(e){o=await s.verify(n,!0)}const a={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Me(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Oe(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Oe(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await Oe(e,t,n);return r(e,i).catch(async i=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Oe(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Oe(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Le(e){const t=Ee(e),n=await z(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new V(n);null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new De(t).verify()}function Fe(e,t){const n=r._getProvider(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if(i.deepEqual(r,t??{}))return e;h(e,"already-initialized")}return n.initialize({options:t})}function Ue(e,t,n){const r=Ee(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!n?.disableWarnings,o=Ve(t),{host:a,port:u}=function(e){const t=Ve(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ze(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ze(t)}}}(t),l=null===u?"":`:${u}`,c={url:`${o}//${a}${l}/`},h=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y(i.deepEqual(c,r.config.emulator)&&i.deepEqual(h,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i.isCloudWorkstation(a)?(i.pingServer(`${o}//${a}${l}`),i.updateEmulatorBanner("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ve(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ze(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Be{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function je(e,t){return A(e,"POST","/v1/accounts:resetPassword",x(e,t))}async function qe(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function $e(e,t){return R(e,"POST","/v1/accounts:signInWithPassword",x(e,t))}async function We(e,t){return A(e,"POST","/v1/accounts:sendOobCode",x(e,t))}async function Ge(e,t){return We(e,t)}async function He(e,t){return We(e,t)}class Ke extends Be{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ke(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ke(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Me(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",$e,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",x(e,t))}(e,{email:this._email,oobCode:this._password});default:h(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Me(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",x(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:h(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qe(e,t){return R(e,"POST","/v1/accounts:signInWithIdp",x(e,t))}class Je extends Be{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Je(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):h("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new Je(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=i.querystring(t)}return e}}async function Ye(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",x(e,t))}const Xe={USER_NOT_FOUND:"user-not-found"};class Ze extends Be{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ze({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ze({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await R(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,t));if(n.temporaryProof)throw L(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,{...t,operation:"REAUTH"}),Xe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ze({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class et{constructor(e){const t=i.querystringDecode(i.extractQuerystring(e)),n=t.apiKey??null,r=t.oobCode??null,s=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);y(n&&r&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=i.querystringDecode(i.extractQuerystring(e)).link,n=t?i.querystringDecode(i.extractQuerystring(t)).deep_link_id:null,r=i.querystringDecode(i.extractQuerystring(e)).deep_link_id;return(r?i.querystringDecode(i.extractQuerystring(r)).link:null)||r||n||t||e}(e);try{return new et(t)}catch{return null}}}class tt{constructor(){this.providerId=tt.PROVIDER_ID}static credential(e,t){return Ke._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=et.parseLink(t);return y(n,"argument-error"),Ke._fromEmailAndCode(e,n.code,n.tenantId)}}tt.PROVIDER_ID="password",tt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",tt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rt extends nt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class it extends rt{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return y("providerId"in t&&"signInMethod"in t,"argument-error"),Je._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return y(e.idToken||e.accessToken,"argument-error"),Je._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return it.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return it.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new it(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}class st extends rt{constructor(){super("facebook.com")}static credential(e){return Je._fromParams({providerId:st.PROVIDER_ID,signInMethod:st.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return st.credentialFromTaggedObject(e)}static credentialFromError(e){return st.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return st.credential(e.oauthAccessToken)}catch{return null}}}st.FACEBOOK_SIGN_IN_METHOD="facebook.com",st.PROVIDER_ID="facebook.com";class ot extends rt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Je._fromParams({providerId:ot.PROVIDER_ID,signInMethod:ot.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ot.credentialFromTaggedObject(e)}static credentialFromError(e){return ot.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ot.credential(t,n)}catch{return null}}}ot.GOOGLE_SIGN_IN_METHOD="google.com",ot.PROVIDER_ID="google.com";class at extends rt{constructor(){super("github.com")}static credential(e){return Je._fromParams({providerId:at.PROVIDER_ID,signInMethod:at.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return at.credentialFromTaggedObject(e)}static credentialFromError(e){return at.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return at.credential(e.oauthAccessToken)}catch{return null}}}at.GITHUB_SIGN_IN_METHOD="github.com",at.PROVIDER_ID="github.com";class ut extends Be{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new ut(n,i):null}static _create(e,t){return new ut(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lt extends nt{constructor(e){y(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return lt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ut.fromJSON(e);return y(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return ut._create(n,t)}catch(e){return null}}}class ct extends rt{constructor(){super("twitter.com")}static credential(e,t){return Je._fromParams({providerId:ct.PROVIDER_ID,signInMethod:ct.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ct.credentialFromTaggedObject(e)}static credentialFromError(e){return ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ct.credential(t,n)}catch{return null}}}async function ht(e,t){return R(e,"POST","/v1/accounts:signUp",x(e,t))}ct.TWITTER_SIGN_IN_METHOD="twitter.com",ct.PROVIDER_ID="twitter.com";class dt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await te._fromIdTokenResponse(e,n,r),s=ft(n);return new dt({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ft(n);return new dt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ft(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class mt extends i.FirebaseError{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,mt.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new mt(e,t,n,r)}}function pt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw mt._fromErrorAndOperation(e,n,t,r);throw n})}function gt(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function yt(e,t,n=!1){const r=await H(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return dt._forOperation(e,"link",r)}async function bt(e,t,n){await J(t);const r=!1===e?"provider-already-linked":"no-such-provider";y(gt(t.providerData).has(n)===e,t.auth,r)}async function vt(e,t,n=!1){const{auth:i}=e;if(r._isFirebaseServerApp(i.app))return Promise.reject(m(i));const s="reauthenticate";try{const r=await H(e,pt(i,s,t,e),n);y(r.idToken,i,"internal-error");const o=W(r.idToken);y(o,i,"internal-error");const{sub:a}=o;return y(e.uid===a,i,"user-mismatch"),dt._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===e?.code&&h(i,"user-mismatch"),e}}async function _t(e,t,n=!1){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const i="signIn",s=await pt(e,i,t),o=await dt._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(o.user),o}async function wt(e,t){return _t(Ee(e),t)}async function Et(e,t){const n=i.getModularInstance(e);return await bt(!1,n,t.providerId),yt(n,t)}async function It(e,t){return vt(i.getModularInstance(e),t)}class Nt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?St._fromServerResponse(e,t):"totpInfo"in t?Tt._fromServerResponse(e,t):h(e,"internal-error")}}class St extends Nt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new St(t)}}class Tt extends Nt{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Tt(t)}}function kt(e,t,n){y(n.url?.length>0,e,"invalid-continue-uri"),y(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),y(void 0===n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(y(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(y(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ct(e){const t=Ee(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function xt(e,t){const n=i.getModularInstance(e),r=await je(n,{oobCode:t}),s=r.requestType;switch(y(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":y(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":y(r.mfaInfo,n,"internal-error");default:y(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Nt._fromServerResponse(Ee(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function At(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await H(e,async function(e,t){return A(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Pt{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Rt extends Pt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Dt extends Pt{constructor(e,t){super(e,"facebook.com",t)}}class Ot extends Rt{constructor(e,t){super(e,"github.com",t,"string"==typeof t?.login?t?.login:null)}}class Mt extends Pt{constructor(e,t){super(e,"google.com",t)}}class Lt extends Rt{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ft(e,t,n,r){return i.getModularInstance(e).onIdTokenChanged(t,n,r)}function Ut(e,t,n){return i.getModularInstance(e).beforeAuthStateChanged(t,n)}class Vt{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Vt("enroll",e,t)}static _fromMfaPendingCredential(e){return new Vt("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return Vt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return Vt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class zt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ee(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>Nt._fromServerResponse(n,e));y(r.mfaPendingCredential,n,"internal-error");const s=Vt._fromMfaPendingCredential(r.mfaPendingCredential);return new zt(s,i,async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o={...r,idToken:i.idToken,refreshToken:i.refreshToken};switch(t.operationType){case"signIn":const e=await dt._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return y(t.user,n,"internal-error"),dt._forOperation(t.user,t.operationType,o);default:h(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Bt(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",x(e,t))}class jt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Nt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new jt(e)}async getSession(){return Vt._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await H(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await H(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},A(r,"POST","/v2/accounts/mfaEnrollment:withdraw",x(r,i))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}var r,i}}const qt=new WeakMap,$t="__sak";class Wt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($t,"1"),this.storage.removeItem($t),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Gt extends Wt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ye(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);i.isIE()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gt.type="LOCAL";const Ht=Gt;function Kt(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Qt(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Jt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"==typeof isSecureContext&&!isSecureContext)&&"undefined"!=typeof navigator&&"undefined"!=typeof document&&(navigator.cookieEnabled??!0)}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Qt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return Kt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Qt(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Qt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Kt(n);const i=setInterval(()=>{const e=Kt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Jt.type="COOKIE";const Yt=Jt;class Xt extends Wt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xt.type="SESSION";const Zt=Xt;class en{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new en(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function tn(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}en.receivers=[];class nn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const u=tn("",20);r.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function rn(){return window}function sn(){return void 0!==rn().WorkerGlobalScope&&"function"==typeof rn().importScripts}const on="firebaseLocalStorageDb",an="firebaseLocalStorage",un="fbase_key";class ln{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cn(e,t){return e.transaction([an],t?"readwrite":"readonly").objectStore(an)}function hn(){const e=indexedDB.open(on,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(an,{keyPath:un})}catch(e){n(e)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(an)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(on);return new ln(e).toPromise()}(),t(await hn()))})})}async function dn(e,t,n){const r=cn(e,!0).put({[un]:t,value:n});return new ln(r).toPromise()}function fn(e,t){const n=cn(e,!0).delete(t);return new ln(n).toPromise()}class mn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await hn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=en._getInstance(sn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new nn(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hn();return await dn(e,$t,"1"),await fn(e,$t),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>dn(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=cn(e,!1).get(t),r=await new ln(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fn(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=cn(e,!1).getAll();return new ln(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}mn.type="LOCAL";const pn=mn;function gn(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",x(e,t))}const yn=Te("rcb"),bn=new I(3e4,6e4);class vn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rn().grecaptcha?.render}load(e,t=""){return y(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&F(rn().grecaptcha)?Promise.resolve(rn().grecaptcha):new Promise((n,r)=>{const s=rn().setTimeout(()=>{r(d(e,"network-request-failed"))},bn.get());rn()[yn]=()=>{rn().clearTimeout(s),delete rn()[yn];const i=rn().grecaptcha;if(!i||!F(i))return void r(d(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)},Se(`${Ne.recaptchaV2Script}?${i.querystring({onload:yn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(d(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!rn().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _n{async load(e){return new Ce(e)}clearedOneInstance(){}}const wn="recaptcha",En={theme:"light",type:"image"};class In{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ze._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Nn(e,t,n){if(!e._getRecaptchaConfig())try{await Le(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){y("enroll"===t.type,e,"internal-error");const i=Me(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},"mfaSmsEnrollment",async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Re?(y(n?.type===wn,e,"argument-error"),Bt(e,await Sn(e,t,n))):Bt(e,t),"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;y(i,e,"missing-multi-factor-info");const s=Me(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},"mfaSmsSignIn",async(e,t)=>t.phoneSignInInfo.captchaResponse===Re?(y(n?.type===wn,e,"argument-error"),gn(e,await Sn(e,t,n))):gn(e,t),"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t=Me(e,{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},"sendVerificationCode",async(e,t)=>t.captchaResponse===Re?(y(n?.type===wn,e,"argument-error"),Ye(e,await Sn(e,t,n))):Ye(e,t),"PHONE_PROVIDER");return(await t.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Sn(e,t,n){y(n.type===wn,e,"argument-error");const r=await n.verify();y("string"==typeof r,e,"argument-error");const i={...t};if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Tn{constructor(e){this.providerId=Tn.PROVIDER_ID,this.auth=Ee(e)}verifyPhoneNumber(e,t){return Nn(this.auth,e,i.getModularInstance(t))}static credential(e,t){return Ze._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Tn.credentialFromTaggedObject(t)}static credentialFromError(e){return Tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ze._fromTokenResponse(t,n):null}}function kn(e,t){return t?re(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Tn.PROVIDER_ID="phone",Tn.PHONE_SIGN_IN_METHOD="phone";class Cn extends Be{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xn(e){return _t(e.auth,new Cn(e),e.bypassAuthState)}function An(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),vt(n,new Cn(e),e.bypassAuthState)}async function Pn(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),yt(n,new Cn(e),e.bypassAuthState)}class Rn{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xn;case"linkViaPopup":case"linkViaRedirect":return Pn;case"reauthViaPopup":case"reauthViaRedirect":return An;default:h(this.auth,"internal-error")}}resolve(e){v(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){v(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dn=new I(2e3,1e4);class On extends Rn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,On.currentPopupAction&&On.currentPopupAction.cancel(),On.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){v(1===this.filter.length,"Popup operations only handle one event");const e=tn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(d(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(d(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,On.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(d(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Dn.get())};e()}}On.currentPopupAction=null;const Mn=new Map;class Ln extends Rn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Mn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=zn(t),r=Vn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Mn.set(this.auth._key(),e)}return this.bypassAuthState||Mn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Fn(e,t){return Vn(e)._set(zn(t),"true")}function Un(e,t){Mn.set(e._key(),t)}function Vn(e){return re(e._redirectPersistence)}function zn(e){return oe("pendingRedirect",e.config.apiKey,e.name)}async function Bn(e,t,n=!1){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const i=Ee(e),s=kn(i,t),o=new Ln(i,s,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}async function jn(e){const t=tn(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class qn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Wn(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(d(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($n(e))}saveEventToCache(e){this.cachedEventUids.add($n(e)),this.lastProcessedEventTime=Date.now()}}function $n(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Wn({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}async function Gn(e,t={}){return A(e,"GET","/v1/projects",t)}const Hn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kn=/^https?/;function Qn(e){const t=_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Kn.test(n))return!1;if(Hn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Jn=new I(3e4,6e4);function Yn(){const e=rn().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function Xn(e){return new Promise((t,n)=>{function r(){Yn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yn(),n(d(e,"network-request-failed"))},timeout:Jn.get()})}if(rn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!rn().gapi?.load){const t=Te("iframefcb");return rn()[t]=()=>{gapi.load?r():n(d(e,"network-request-failed"))},Se(`${Ne.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw Zn=null,e})}let Zn=null;const er=new I(5e3,15e3),tr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rr(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?N(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:r.SDK_VERSION},o=nr.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${i.querystring(s).slice(1)}`}const ir={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const or=encodeURIComponent("fac");async function ar(e,t,n,s,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.SDK_VERSION,eventId:o};if(t instanceof nt){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",i.isEmpty(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof rt){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const l=u;for(const e of Object.keys(l))void 0===l[e]&&delete l[e];const c=await e._getAppCheckToken(),h=c?`#${or}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?N(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${i.querystring(l).slice(1)}${h}`}const ur="webStorageSupport",lr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zt,this._completeRedirectFn=Bn,this._overrideRedirectResult=Un}async _openPopup(e,t,n,r){return v(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const l={...ir,width:r.toString(),height:s.toString(),top:o,left:a},c=i.getUA().toLowerCase();n&&(u=he(c)?"_blank":n),le(c)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=i.getUA()){return ge(e)&&!!window.navigator?.standalone}(c)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new sr(null);const d=window.open(t||"",u,h);y(d,e,"popup-blocked");try{d.focus()}catch(e){}return new sr(d)}(e,await ar(e,t,n,_(),r),tn())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await ar(e,t,n,_(),r),rn().location.href=i,new Promise(()=>{});var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(v(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return Zn=Zn||Xn(e),Zn}(e),n=rn().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:rr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=d(e,"network-request-failed"),s=rn().setTimeout(()=>{r(i)},er.get());function o(){rn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new qn(e);return t.register("authEvent",t=>(y(t?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ur,{type:ur},n=>{const r=n?.[0]?.[ur];void 0!==r&&t(!!r),h(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Gn(e);for(const e of t)try{if(Qn(e))return}catch{}h(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ye()||ce()||ge()}};class cr{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return b("unexpected MultiFactorSessionType")}}}class hr extends cr{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new hr(e)}_finalizeEnroll(e,t,n){return function(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:finalize",x(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:finalize",x(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class dr{constructor(){}static assertion(e){return hr._fromCredential(e)}}dr.FACTOR_ID="phone";class fr{static assertionForEnrollment(e,t){return mr._fromSecret(e,t)}static assertionForSignIn(e,t){return mr._fromEnrollmentId(e,t)}static async generateSecret(e){const t=e;y(void 0!==t.user?.auth,"internal-error");const n=await(r=t.user.auth,i={idToken:t.credential,totpEnrollmentInfo:{}},A(r,"POST","/v2/accounts/mfaEnrollment:start",x(r,i)));var r,i;return pr._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}}fr.FACTOR_ID="totp";class mr extends cr{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new mr(t,void 0,e)}static _fromEnrollmentId(e,t){return new mr(t,e)}async _finalizeEnroll(e,t,n){return y(void 0!==this.secret,e,"argument-error"),function(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:finalize",x(e,t))}(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){y(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return function(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:finalize",x(e,t))}(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class pr{constructor(e,t,n,r,i,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new pr(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(gr(e)||gr(t))&&(n=!0),n&&(gr(e)&&(e=this.auth.currentUser?.email||"unknownuser"),gr(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function gr(e){return void 0===e||0===e?.length}var yr="@firebase/auth",br="1.11.0";class vr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _r=i.getExperimentalSetting("authIdTokenMaxAge")||300;let wr=null;var Er;Ne={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=d("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Er="Browser",r._registerComponent(new o.Component("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;y(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Er,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:be(Er)},u=new we(n,r,i,a);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(re);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),r._registerComponent(new o.Component("auth-internal",e=>{return t=Ee(e.getProvider("auth").getImmediate()),new vr(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),r.registerVersion(yr,br,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Er)),r.registerVersion(yr,br,"cjs2020"),t.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"},t.ActionCodeOperation={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},t.ActionCodeURL=et,t.AuthCredential=Be,t.AuthEventManager=qn,t.AuthImpl=we,t.AuthPopup=sr,t.EmailAuthCredential=Ke,t.EmailAuthProvider=tt,t.FacebookAuthProvider=st,t.FactorId={PHONE:"phone",TOTP:"totp"},t.FetchProvider=S,t.GithubAuthProvider=at,t.GoogleAuthProvider=ot,t.OAuthCredential=Je,t.OAuthProvider=it,t.OperationType={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},t.PhoneAuthCredential=Ze,t.PhoneAuthProvider=Tn,t.PhoneMultiFactorGenerator=dr,t.ProviderId={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},t.RecaptchaVerifier=class{constructor(e,t,n={...En}){this.parameters=n,this.type=wn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ee(e),this.isInvisible="invisible"===this.parameters.size,y("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof t?document.getElementById(t):t;y(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _n:new vn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){y(!this.parameters.sitekey,this.auth,"argument-error"),y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),y("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=rn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){y(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){y(w()&&!sn(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await A(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);y(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}},t.SAMLAuthCredential=ut,t.SAMLAuthProvider=lt,t.SignInMethod={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},t.TotpMultiFactorGenerator=fr,t.TotpSecret=pr,t.TwitterAuthProvider=ct,t.UserImpl=te,t._assert=y,t._castAuth=Ee,t._clearRedirectOutcomes=function(){Mn.clear()},t._createError=d,t._fail=h,t._generateEventId=tn,t._getClientVersion=be,t._getInstance=re,t._getProjectConfig=Gn,t._getRedirectResult=Bn,t._getRedirectUrl=ar,t._isAndroid=fe,t._isIOS=ge,t._isIOS7Or8=function(e=i.getUA()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)},t._overrideRedirectResult=Un,t._persistenceKeyName=oe,t.applyActionCode=async function(e,t){await async function(e,t){return A(e,"POST","/v1/accounts:update",x(e,t))}(i.getModularInstance(e),{oobCode:t})},t.beforeAuthStateChanged=Ut,t.browserCookiePersistence=Yt,t.browserLocalPersistence=Ht,t.browserPopupRedirectResolver=lr,t.browserSessionPersistence=Zt,t.checkActionCode=xt,t.confirmPasswordReset=async function(e,t,n){await je(i.getModularInstance(e),{oobCode:t,newPassword:n}).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ct(e),t})},t.connectAuthEmulator=Ue,t.createUserWithEmailAndPassword=async function(e,t,n){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const i=Ee(e),s=Me(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ht,"EMAIL_PASSWORD_PROVIDER"),o=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ct(e),t}),a=await dt._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a},t.debugAssert=v,t.debugErrorMap=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},t.deleteUser=async function(e){return i.getModularInstance(e).delete()},t.fetchSignInMethodsForEmail=async function(e,t){const n={identifier:t,continueUri:w()?_():"http://localhost"},{signinMethods:r}=await async function(e,t){return A(e,"POST","/v1/accounts:createAuthUri",x(e,t))}(i.getModularInstance(e),n);return r||[]},t.getAdditionalUserInfo=function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){if(!e)return null;const{providerId:t}=e,n=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},r=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!t&&e?.idToken){const t=W(e.idToken)?.firebase?.sign_in_provider;if(t)return new Pt(r,"anonymous"!==t&&"custom"!==t?t:null)}if(!t)return null;switch(t){case"facebook.com":return new Dt(r,n);case"github.com":return new Ot(r,n);case"google.com":return new Mt(r,n);case"twitter.com":return new Lt(r,n,e.screenName||null);case"custom":case"anonymous":return new Pt(r,null);default:return new Pt(r,t,n)}}(n)},t.getAuth=function(e=r.getApp()){const t=r._getProvider(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Fe(e,{popupRedirectResolver:lr,persistence:[pn,Ht,Zt]}),s=i.getExperimentalSetting("authTokenSyncURL");if(s&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=(o=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>_r)return;const r=t?.token;wr!==r&&(wr=r,await fetch(o,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});Ut(n,t,()=>t(n.currentUser)),Ft(n,e=>t(e))}}var o;const a=i.getDefaultEmulatorHost("auth");return a&&Ue(n,`http://${a}`),n},t.getIdToken=function(e,t=!1){return i.getModularInstance(e).getIdToken(t)},t.getIdTokenResult=q,t.getMultiFactorResolver=function(e,t){const n=i.getModularInstance(e),r=t;return y(t.customData.operationType,n,"argument-error"),y(r.customData._serverResponse?.mfaPendingCredential,n,"argument-error"),zt._fromError(n,r)},t.getRedirectResult=async function(e,t){return await Ee(e)._initializationPromise,Bn(e,t,!1)},t.inMemoryPersistence=se,t.indexedDBLocalPersistence=pn,t.initializeAuth=Fe,t.initializeRecaptchaConfig=function(e){return Le(e)},t.isSignInWithEmailLink=function(e,t){const n=et.parseLink(t);return"EMAIL_SIGNIN"===n?.operation},t.linkWithCredential=Et,t.linkWithPhoneNumber=async function(e,t,n){const r=i.getModularInstance(e);await bt(!1,r,"phone");const s=await Nn(r.auth,t,i.getModularInstance(n));return new In(s,e=>Et(r,e))},t.linkWithPopup=async function(e,t,n){const r=i.getModularInstance(e);p(r.auth,t,nt);const s=kn(r.auth,n);return new On(r.auth,"linkViaPopup",t,s,r).executeNotNull()},t.linkWithRedirect=function(e,t,n){return async function(e,t,n){const r=i.getModularInstance(e);p(r.auth,t,nt),await r.auth._initializationPromise;const s=kn(r.auth,n);await bt(!1,r,t.providerId),await Fn(s,r.auth);const o=await jn(r);return s._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)},t.multiFactor=function(e){const t=i.getModularInstance(e);return qt.has(t)||qt.set(t,jt._fromUser(t)),qt.get(t)},t.onAuthStateChanged=function(e,t,n,r){return i.getModularInstance(e).onAuthStateChanged(t,n,r)},t.onIdTokenChanged=Ft,t.parseActionCodeURL=function(e){return et.parseLink(e)},t.prodErrorMap=a,t.reauthenticateWithCredential=It,t.reauthenticateWithPhoneNumber=async function(e,t,n){const s=i.getModularInstance(e);if(r._isFirebaseServerApp(s.auth.app))return Promise.reject(m(s.auth));const o=await Nn(s.auth,t,i.getModularInstance(n));return new In(o,e=>It(s,e))},t.reauthenticateWithPopup=async function(e,t,n){const s=i.getModularInstance(e);if(r._isFirebaseServerApp(s.auth.app))return Promise.reject(d(s.auth,"operation-not-supported-in-this-environment"));p(s.auth,t,nt);const o=kn(s.auth,n);return new On(s.auth,"reauthViaPopup",t,o,s).executeNotNull()},t.reauthenticateWithRedirect=function(e,t,n){return async function(e,t,n){const s=i.getModularInstance(e);if(p(s.auth,t,nt),r._isFirebaseServerApp(s.auth.app))return Promise.reject(m(s.auth));await s.auth._initializationPromise;const o=kn(s.auth,n);await Fn(o,s.auth);const a=await jn(s);return o._openRedirect(s.auth,t,"reauthViaRedirect",a)}(e,t,n)},t.reload=Y,t.revokeAccessToken=function(e,t){return Ee(e).revokeAccessToken(t)},t.sendEmailVerification=async function(e,t){const n=i.getModularInstance(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&kt(n.auth,r,t);const{email:s}=await async function(e,t){return We(e,t)}(n.auth,r);s!==e.email&&await e.reload()},t.sendPasswordResetEmail=async function(e,t,n){const r=Ee(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&kt(r,i,n),await Me(r,i,"getOobCode",Ge,"EMAIL_PASSWORD_PROVIDER")},t.sendSignInLinkToEmail=async function(e,t,n){const r=Ee(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){y(t.handleCodeInApp,r,"argument-error"),t&&kt(r,e,t)}(i,n),await Me(r,i,"getOobCode",He,"EMAIL_PASSWORD_PROVIDER")},t.setPersistence=function(e,t){return i.getModularInstance(e).setPersistence(t)},t.signInAnonymously=async function(e){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const t=Ee(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new dt({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await ht(t,{returnSecureToken:!0}),i=await dt._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i},t.signInWithCredential=wt,t.signInWithCustomToken=async function(e,t){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const n=Ee(e),i=await async function(e,t){return R(e,"POST","/v1/accounts:signInWithCustomToken",x(e,t))}(n,{token:t,returnSecureToken:!0}),s=await dt._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s},t.signInWithEmailAndPassword=function(e,t,n){return r._isFirebaseServerApp(e.app)?Promise.reject(m(e)):wt(i.getModularInstance(e),tt.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ct(e),t})},t.signInWithEmailLink=async function(e,t,n){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const s=i.getModularInstance(e),o=tt.credentialWithLink(t,n||_());return y(o._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),wt(s,o)},t.signInWithPhoneNumber=async function(e,t,n){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const s=Ee(e),o=await Nn(s,t,i.getModularInstance(n));return new In(o,e=>wt(s,e))},t.signInWithPopup=async function(e,t,n){if(r._isFirebaseServerApp(e.app))return Promise.reject(d(e,"operation-not-supported-in-this-environment"));const i=Ee(e);p(e,t,nt);const s=kn(i,n);return new On(i,"signInViaPopup",t,s).executeNotNull()},t.signInWithRedirect=function(e,t,n){return async function(e,t,n){if(r._isFirebaseServerApp(e.app))return Promise.reject(m(e));const i=Ee(e);p(e,t,nt),await i._initializationPromise;const s=kn(i,n);return await Fn(s,i),s._openRedirect(i,t,"signInViaRedirect")}(e,t,n)},t.signOut=function(e){return i.getModularInstance(e).signOut()},t.unlink=async function(e,t){const n=i.getModularInstance(e);await bt(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return A(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=gt(r||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n},t.updateCurrentUser=function(e,t){return i.getModularInstance(e).updateCurrentUser(t)},t.updateEmail=function(e,t){const n=i.getModularInstance(e);return r._isFirebaseServerApp(n.auth.app)?Promise.reject(m(n.auth)):At(n,t,null)},t.updatePassword=function(e,t){return At(i.getModularInstance(e),null,t)},t.updatePhoneNumber=async function(e,t){const n=i.getModularInstance(e);if(r._isFirebaseServerApp(n.auth.app))return Promise.reject(m(n.auth));await yt(n,t)},t.updateProfile=async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=i.getModularInstance(e),s={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await H(r,async function(e,t){return A(e,"POST","/v1/accounts:update",t)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)},t.useDeviceLanguage=function(e){i.getModularInstance(e).useDeviceLanguage()},t.validatePassword=async function(e,t){return Ee(e).validatePassword(t)},t.verifyBeforeUpdateEmail=async function(e,t,n){const r=i.getModularInstance(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&kt(r.auth,s,n);const{email:o}=await async function(e,t){return We(e,t)}(r.auth,s);o!==e.email&&await e.reload()},t.verifyPasswordResetCode=async function(e,t){const{data:n}=await xt(i.getModularInstance(e),t);return n.email}},540:(e,t,n)=>{"use strict";e.exports=n(287)},551:(e,t,n)=>{"use strict";var r=n(540),i=n(194);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(m,e)||!h.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return z(e.type,!1);case 11:return z(e.type.render,!1);case 1:return z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case S:return"Profiler";case N:return"StrictMode";case x:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return j(e(t))}catch(e){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Ne=null;function Se(e){if(e=vi(e)){if("function"!=typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Ee(e.stateNode,e.type,t))}}function Te(e){Ie?Ne?Ne.push(e):Ne=[e]:Ie=e}function ke(){if(Ie){var e=Ie,t=Ne;if(Ne=Ie=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function xe(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Ne)&&(xe(),ke())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){De=!1}function Me(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var Le=!1,Fe=null,Ue=!1,Ve=null,ze={onError:function(e){Le=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,u){Le=!1,Fe=null,Me.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function $e(e){if(je(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null,ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/ut|0)|0},at=Math.log,ut=Math.LN2,lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return!(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function _t(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wt,Et,It,Nt,St,Tt=!1,kt=[],Ct=null,xt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=vi(t))&&Et(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=bi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){It(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==xt&&Bt(xt,e),null!==At&&Bt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=_.ReactCurrentBatchConfig,$t=!0;function Wt(e,t,n,r){var i=vt,s=qt.transition;qt.transition=null;try{vt=1,Ht(e,t,n,r)}finally{vt=i,qt.transition=s}}function Gt(e,t,n,r){var i=vt,s=qt.transition;qt.transition=null;try{vt=4,Ht(e,t,n,r)}finally{vt=i,qt.transition=s}}function Ht(e,t,n,r){if($t){var i=Qt(e,t,n,r);if(null===i)$r(e,t,r,Kt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return xt=Lt(xt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=vi(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&$r(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=bi(e=we(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,an=e.screenY-un.screenY):an=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),mn=sn(fn),pn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=sn(bn),_n=sn(F({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Sn(){return Nn}var Tn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Tn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Dn=[9,13,27,32],On=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Mn,Fn=c&&(!On||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Kn(e){Ur(e,0)}function Qn(e){if(H(_i(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(Hn)){var t=[];Wn(t,Hn,e,we(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Hn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ur(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,vr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==K(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&ur(br,r)||(br=r,0<(r=Gr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Ir={},Nr={};function Sr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Ir[e]=n[t];return e}c&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Tr=Sr("animationend"),kr=Sr("animationiteration"),Cr=Sr("animationstart"),xr=Sr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),u(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(kr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(xr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,u,l){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=Fe;Le=!1,Fe=null,Ue||(Ue=!0,Ve=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=u}else for(o=0;o<r.length;o++){if(u=(a=r[o]).instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=u}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=bi(a)))return;if(5===(u=o.tag)||6===u){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=s,i=we(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=kn;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=xn;break;case Tr:case kr:case Cr:u=yn;break;case xr:u=An;break;case"scroll":u=dn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var c=!!(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==d&&null!=(p=Re(m,d))&&c.push(Wr(m,p,f))),h)break;m=m.return}0<c.length&&(a=new u(a,l,null,n,i),o.push({event:a,listeners:c}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!bi(l)&&!l[mi])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?bi(l):null)&&(l!==(h=je(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=mn,p="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,p="onPointerLeave",d="onPointerEnter",m="pointer"),h=null==u?a:_i(u),f=null==l?a:_i(l),(a=new c(p,m+"leave",u,n,i)).target=h,a.relatedTarget=f,p=null,bi(i)===r&&((c=new c(d,m+"enter",l,n,i)).target=f,c.relatedTarget=h,p=c),h=p,u&&l)e:{for(d=l,m=0,f=c=u;f;f=Hr(f))m++;for(f=0,p=d;p;p=Hr(p))f++;for(;0<m-f;)c=Hr(c),m--;for(;0<f-m;)d=Hr(d),f--;for(;m--;){if(c===d||null!==d&&c===d.alternate)break e;c=Hr(c),d=Hr(d)}c=null}else c=null;null!==u&&Kr(o,a,u,c,!1),null!==l&&null!==h&&Kr(o,h,l,c,!0)}if("select"===(u=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var g=Jn;else if($n(a))if(Yn)g=or;else{g=ir;var y=rr}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?_i(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,_r(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":_r(o,n,i)}var b;if(On)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else jn?zn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==v?"onCompositionEnd"===v&&jn&&(b=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,jn=!0)),0<(y=Gr(r,v)).length&&(v=new _n(v,e,null,n,i),o.push({event:v,listeners:y}),(b||null!==(b=Bn(n)))&&(v.data=b))),(b=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=Xt=Yt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Gr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=b)}Ur(o,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Re(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(u=Re(n,s))&&o.unshift(Wr(n,u,a)):i||null!=(u=Re(n,s))&&o.push(Wr(n,u,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,mi="__reactContainer$"+hi,pi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function bi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[di]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var Ei=[],Ii=-1;function Ni(e){return{current:e}}function Si(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function Ti(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var ki={},Ci=Ni(ki),xi=Ni(!1),Ai=ki;function Pi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!=e.childContextTypes}function Di(){Si(xi),Si(Ci)}function Oi(e,t,n){if(Ci.current!==ki)throw Error(s(168));Ti(Ci,t),Ti(xi,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ai=Ci.current,Ti(Ci,e),Ti(xi,xi.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(xi),Si(Ci),Ti(Ci,e)):Si(xi),Ti(xi,n)}var Ui=null,Vi=!1,zi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function ji(){if(!zi&&null!==Ui){zi=!0;var e=0,t=vt;try{var n=Ui;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,ji),t}finally{vt=t,zi=!1}}return null}var qi=[],$i=0,Wi=null,Gi=0,Hi=[],Ki=0,Qi=null,Ji=1,Yi="";function Xi(e,t){qi[$i++]=Gi,qi[$i++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Ki++]=Ji,Hi[Ki++]=Yi,Hi[Ki++]=Qi,Qi=e;var r=Ji;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Yi=s+e}else Ji=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--$i],qi[$i]=null,Gi=qi[--$i],qi[$i]=null;for(;e===Qi;)Qi=Hi[--Ki],Hi[Ki]=null,Yi=Hi[--Ki],Hi[Ki]=null,Ji=Hi[--Ki],Hi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function us(e){return!(!(1&e.mode)||128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(us(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(us(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var ps=_.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ni(null),bs=null,vs=null,_s=null;function ws(){_s=vs=bs=null}function Es(e){var t=ys.current;Si(ys),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){bs=e,_s=vs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Ss(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===vs){if(null===bs)throw Error(s(308));vs=e,bs.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var Ts=null;function ks(e){null===Ts?Ts=[e]:Ts.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ks(t)):(n.next=i.next,i.next=n),t.interleaved=n,xs(e,r)}function xs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&xu){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,xs(e,n)}return null===(i=r.interleaved)?(t.next=t,ks(r)):(t.next=i.next,i.next=t),r.interleaved=t,xs(e,n)}function Ms(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var u=a,l=u.next;u.next=null,null===o?s=l:o.next=l,o=u;var c=e.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u)}if(null!==s){var h=i.baseState;for(o=0,c=l=u=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,p=a;switch(d=t,f=n,p.tag){case 1:if("function"==typeof(m=p.payload)){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(d="function"==typeof(m=p.payload)?m.call(f,h,d):m))break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function zs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ds(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ms(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ds(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ms(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Ds(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rl(t,e,r,n),Ms(t,e,r))}};function js(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&ur(n,r)&&ur(i,s))}function qs(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"==typeof s&&null!==s?s=Ss(s):(i=Ri(t)?Ai:Ci.current,s=(r=null!=(r=t.contextTypes))?Pi(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function $s(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Ps(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Ss(s):(s=Ri(t)?Ai:Ci.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===R&&Ks(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Ml(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ml(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case E:return(t=Vl(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Ll(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function m(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function p(i,s,a,u){for(var l=null,c=null,h=s,p=s=0,g=null;null!==h&&p<a.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var y=f(i,h,a[p],u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,p),null===c?l=y:c.sibling=y,c=y,h=g}if(p===a.length)return n(i,h),is&&Xi(i,p),l;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],u))&&(s=o(h,s,p),null===c?l=h:c.sibling=h,c=h);return is&&Xi(i,p),l}for(h=r(i,h);p<a.length;p++)null!==(g=m(h,i,p,a[p],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),s=o(g,s,p),null===c?l=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),is&&Xi(i,p),l}function g(i,a,u,l){var c=M(u);if("function"!=typeof c)throw Error(s(150));if(null==(u=c.call(u)))throw Error(s(151));for(var h=c=null,p=a,g=a=0,y=null,b=u.next();null!==p&&!b.done;g++,b=u.next()){p.index>g?(y=p,p=null):y=p.sibling;var v=f(i,p,b.value,l);if(null===v){null===p&&(p=y);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v,p=y}if(b.done)return n(i,p),is&&Xi(i,g),c;if(null===p){for(;!b.done;g++,b=u.next())null!==(b=d(i,b.value,l))&&(a=o(b,a,g),null===h?c=b:h.sibling=b,h=b);return is&&Xi(i,g),c}for(p=r(i,p);!b.done;g++,b=u.next())null!==(b=m(p,i,g,b.value,l))&&(e&&null!==b.alternate&&p.delete(null===b.key?g:b.key),a=o(b,a,g),null===h?c=b:h.sibling=b,h=b);return e&&p.forEach(function(e){return t(i,e)}),is&&Xi(i,g),c}return function e(r,s,o,u){if("object"==typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=s;null!==c;){if(c.key===l){if((l=o.type)===I){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===R&&Ks(l)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Gs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===I?((s=Ll(o.props.children,r.mode,u,o.key)).return=r,r=s):((u=Ml(o.type,o.key,o.props,null,r.mode,u)).ref=Gs(r,s,o),u.return=r,r=u)}return a(r);case E:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vl(o,r.mode,u)).return=r,r=s}return a(r);case R:return e(r,s,(c=o._init)(o._payload),u)}if(te(o))return p(r,s,o,u);if(M(o))return g(r,s,o,u);Hs(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,u)).return=r,r=s),a(r)):n(r,s)}}var Js=Qs(!0),Ys=Qs(!1),Xs={},Zs=Ni(Xs),eo=Ni(Xs),to=Ni(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Zs),Ti(Zs,t)}function io(){Si(Zs),Si(eo),Si(to)}function so(e){no(to.current);var t=no(Zs.current),n=ue(t,e.type);t!==n&&(Ti(eo,e),Ti(Zs,n))}function oo(e){eo.current===e&&(Si(Zs),Si(eo))}var ao=Ni(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,mo=0,po=null,go=null,yo=null,bo=!1,vo=!1,_o=0,wo=0;function Eo(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function No(e,t,n,r,i,o){if(mo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ua,e=n(r,i),vo){o=0;do{if(vo=!1,_o=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(vo)}if(ho.current=oa,t=null!==go&&null!==go.next,mo=0,yo=go=po=null,bo=!1,t)throw Error(s(300));return e}function So(){var e=0!==_o;return _o=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?po.memoizedState=yo=e:yo=yo.next=e,yo}function ko(){if(null===go){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?po.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?po.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"==typeof t?t(e):t}function xo(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=a=null,l=null,c=o;do{var h=c.lane;if((mo&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,a=r):l=l.next=d,po.lanes|=h,Fu|=h}c=c.next}while(null!==c&&c!==o);null===l?a=r:l.next=u,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=po,r=ko(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,$o(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(s(349));30&mo||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Mo(e,t,n){return n(function(){Lo(t)&&Fo(e)})}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(e){return!0}}function Fo(e){var t=xs(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=To();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,po,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return ko().memoizedState}function Bo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=ko();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}po.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function $o(e,t){return jo(2048,8,e,t)}function Wo(e,t){return jo(4,2,e,t)}function Go(e,t){return jo(4,4,e,t)}function Ho(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!=n?n.concat([e]):null,jo(4,4,Ho.bind(null,t,e),n)}function Qo(){}function Jo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 21&mo?(ar(n,t)||(n=pt(),po.lanes|=n,Fu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n)}function Zo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{vt=n,fo.transition=r}}function ea(){return ko().memoizedState}function ta(e,t,n){var r=nl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e)?ia(t,n):null!==(n=Cs(e,t,n,r))&&(rl(n,e,r,tl()),sa(n,t,r))}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var u=t.interleaved;return null===u?(i.next=i,ks(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Cs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===po||null!==t&&t===po}function ia(e,t){vo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var oa={readContext:Ss,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ss,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ss,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Qo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Au)throw Error(s(349));30&mo||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Au.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ua={readContext:Ss,useCallback:Jo,useContext:Ss,useEffect:$o,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Yo,useReducer:xo,useRef:zo,useState:function(){return xo(Co)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(ko(),go.memoizedState,e)},useTransition:function(){return[xo(Co)[0],ko().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},la={readContext:Ss,useCallback:Jo,useContext:Ss,useEffect:$o,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Yo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Co)},useDebugValue:Qo,useDeferredValue:function(e){var t=ko();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],ko().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var fa="function"==typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Gu=r),da(0,t)},n}function pa(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!=typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tl.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ba(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e)}var va=_.ReactCurrentOwner,_a=!1;function wa(e,t,n,r){t.child=null===e?Ys(t,null,n,r):Js(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=No(e,t,n,r,s,i),n=So(),null===e||_a?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Dl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ml(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Na(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Ol(s,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);131072&e.flags&&(_a=!0)}}return ka(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ou,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ou,Du),Du|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ou,Du),Du|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ou,Du),Du|=r;return wa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Ri(n)?Ai:Ci.current;return s=Pi(t,s),Ns(t,i),n=No(e,t,n,r,s,i),r=So(),null===e||_a?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(Ri(n)){var s=!0;Li(t)}else s=!1;if(Ns(t,i),null===t.stateNode)$a(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;l="object"==typeof l&&null!==l?Ss(l):Pi(t,l=Ri(n)?Ai:Ci.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||u!==l)&&$s(t,o,r,l),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),u=t.memoizedState,a!==r||d!==u||xi.current||As?("function"==typeof c&&(zs(t,n,c,r),u=t.memoizedState),(a=As||js(t,n,a,r,d,u,l))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,u="object"==typeof(u=n.contextType)&&null!==u?Ss(u):Pi(t,u=Ri(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==u)&&$s(t,o,r,u),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var m=t.memoizedState;a!==h||d!==m||xi.current||As?("function"==typeof f&&(zs(t,n,f,r),m=t.memoizedState),(l=As||js(t,n,l,r,d,m,u)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,u)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=u,r=l):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){Ta(e,t);var o=!!(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Js(t,e.child,null,s),t.child=Js(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ms(i),t.flags|=256,wa(e,t,n,r),t.child}var Ra,Da,Oa,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,u=!!(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&!!(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=i.children,e=i.fallback,a?(i=t.mode,a=t.child,u={mode:"hidden",children:u},1&i||null===a?a=Fl(u,i,0,null):(a.childLanes=0,a.pendingProps=u),e=Ll(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):Va(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ll(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,1&t.mode&&Js(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(!(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(u=0!==(a&e.childLanes),_a||u){if(null!==(r=Au)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,xs(e,i),rl(r,e,i,-1))}return gl(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Ki++]=Ji,Hi[Ki++]=Yi,Hi[Ki++]=Qi,Ji=e.id,Yi=e.overflow,Qi=t),(t=Va(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(a){a=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&u||t.child===o?(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?a=Ol(r,a):(a=Ll(a,u,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=null===(u=e.child.memoizedState)?Fa(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Ol(a,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ms(r),Js(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),2&(r=ao.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function $a(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ha(t),null;case 3:return r=t.stateNode,io(),Si(xi),Si(Ci),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Da(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=!!(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var u in be(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"==typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(u=ve(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in be(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"==typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",e):null!=c&&v(e,o,c,u))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,!!(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Si(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&1&t.mode&&!(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ao.current?0===Mu&&(Mu=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Da(e,t),null===e&&jr(t.stateNode.containerInfo),Ha(t),null;case 10:return Es(t.type._context),Ha(t),null;case 19:if(Si(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=!!(128&t.flags),null===(u=o.rendering))if(r)Ga(o,!1);else{if(0!==Mu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qu&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!is)return Ha(t),null}else 2*Ye()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Du)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(xi),Si(Ci),co(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(c in be(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Vr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,Ya=!1,Xa="function"==typeof WeakSet?WeakSet:Set,Za=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Sl(e,t,n)}else n.current=null}function tu(e,t,n){try{n()}catch(n){Sl(e,t,n)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tu(t,n,s)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function su(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[pi],delete t[gi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var hu=null,du=!1;function fu(e,t,n){for(n=n.child;null!==n;)mu(e,t,n),n=n.sibling}function mu(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Ya||eu(n,t);case 6:var r=hu,i=du;hu=null,fu(e,t,n),du=i,null!==(hu=r)&&(du?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(du?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),jt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=du,hu=n.stateNode.containerInfo,du=!0,fu(e,t,n),hu=r,du=i;break;case 0:case 11:case 14:case 15:if(!Ya&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(2&s||4&s)&&tu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ya&&(eu(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Sl(n,t,e)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,fu(e,t,n),Ya=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach(function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,u=a;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,du=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===hu)throw Error(s(160));mu(o,a,i),hu=null,du=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(e){Sl(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),bu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(t){Sl(e,e.return,t)}try{ru(5,e,e.return)}catch(t){Sl(e,e.return,t)}}break;case 1:gu(t,e),bu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),bu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){Sl(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&Y(i,o),ve(u,a);var c=ve(u,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):v(i,h,d,c)}switch(u){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;null!=m?ne(i,!!o.multiple,m,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(t){Sl(e,e.return,t)}}break;case 6:if(gu(t,e),bu(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){Sl(e,e.return,t)}}break;case 3:if(gu(t,e),bu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(t){Sl(e,e.return,t)}break;case 4:default:gu(t,e),bu(e);break;case 13:gu(t,e),bu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Ye())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||h,gu(t,e),Ya=c):gu(t,e),bu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&1&e.mode)for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(m=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:eu(f,f.return);var p=f.stateNode;if("function"==typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(e){Sl(r,n,e)}}break;case 5:eu(f,f.return);break;case 22:if(null!==f.memoizedState){Eu(d);continue}}null!==m?(m.return=f,Za=m):Eu(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,u.style.display=pe("display",a))}catch(t){Sl(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(t){Sl(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gu(t,e),bu(e),4&r&&pu(e);case 21:}}function bu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lu(e,uu(e),o);break;default:throw Error(s(161))}}catch(t){Sl(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Za=e,_u(e,t,n)}function _u(e,t,n){for(var r=!!(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,u=null!==a&&null!==a.memoizedState||Ya;a=Ja;var l=Ya;if(Ja=o,(Ya=u)&&!l)for(Za=i;null!==Za;)u=(o=Za).child,22===o.tag&&null!==o.memoizedState?Iu(i):null!==u?(u.return=o,Za=u):Iu(i);for(;null!==s;)Za=s,_u(s,t,n),s=s.sibling;Za=i,Ja=a,Ya=l}wu(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Za=s):wu(e)}}function wu(e){for(;null!==Za;){var t=Za;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Ya||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&su(t)}catch(e){Sl(t,t.return,e)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Eu(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Iu(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(e){Sl(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Sl(t,i,e)}}var s=t.return;try{su(t)}catch(e){Sl(t,s,e)}break;case 5:var o=t.return;try{su(t)}catch(e){Sl(t,o,e)}}}catch(e){Sl(t,t.return,e)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Nu,Su=Math.ceil,Tu=_.ReactCurrentDispatcher,ku=_.ReactCurrentOwner,Cu=_.ReactCurrentBatchConfig,xu=0,Au=null,Pu=null,Ru=0,Du=0,Ou=Ni(0),Mu=0,Lu=null,Fu=0,Uu=0,Vu=0,zu=null,Bu=null,ju=0,qu=1/0,$u=null,Wu=!1,Gu=null,Hu=null,Ku=!1,Qu=null,Ju=0,Yu=0,Xu=null,Zu=-1,el=0;function tl(){return 6&xu?Ye():-1!==Zu?Zu:Zu=Ye()}function nl(e){return 1&e.mode?2&xu&&0!==Ru?Ru&-Ru:null!==ps.transition?(0===el&&(el=pt()),el):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Jt(e.type):1}function rl(e,t,n,r){if(50<Yu)throw Yu=0,Xu=null,Error(s(185));yt(e,n,r),2&xu&&e===Au||(e===Au&&(!(2&xu)&&(Uu|=n),4===Mu&&ul(e,Ru)),il(e,r),1===n&&0===xu&&!(1&t.mode)&&(qu=Ye()+500,Vi&&ji()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,u=i[o];-1===u?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Au?Ru:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(ll.bind(null,e)):Bi(ll.bind(null,e)),oi(function(){!(6&xu)&&ji()}),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zu=-1,el=0,6&xu)throw Error(s(327));var n=e.callbackNode;if(Il()&&e.callbackNode!==n)return null;var r=dt(e,e===Au?Ru:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=xu;xu|=2;var o=pl();for(Au===e&&Ru===t||($u=null,qu=Ye()+500,fl(e,t));;)try{vl();break}catch(t){ml(e,t)}ws(),Tu.current=o,xu=i,null!==Pu?t=0:(Au=null,Ru=0,t=Mu)}if(0!==t){if(2===t&&0!==(i=mt(e))&&(r=i,t=ol(e,i)),1===t)throw n=Lu,fl(e,0),ul(e,r),il(e,Ye()),n;if(6===t)ul(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=yl(e,r),2===t&&(o=mt(e),0!==o&&(r=o,t=ol(e,o))),1!==t)))throw n=Lu,fl(e,0),ul(e,r),il(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:El(e,Bu,$u);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=ju+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,Bu,$u),t);break}El(e,Bu,$u);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,Bu,$u),r);break}El(e,Bu,$u);break;default:throw Error(s(329))}}}return il(e,Ye()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=zu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=Bu,Bu=n,null!==t&&al(t)),e}function al(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function ul(e,t){for(t&=~Vu,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(6&xu)throw Error(s(327));Il();var t=dt(e,0);if(!(1&t))return il(e,Ye()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Lu,fl(e,0),ul(e,t),il(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,Bu,$u),il(e,Ye()),null}function cl(e,t){var n=xu;xu|=1;try{return e(t)}finally{0===(xu=n)&&(qu=Ye()+500,Vi&&ji())}}function hl(e){null!==Qu&&0===Qu.tag&&!(6&xu)&&Il();var t=xu;xu|=1;var n=Cu.transition,r=vt;try{if(Cu.transition=null,vt=1,e)return e()}finally{vt=r,Cu.transition=n,!(6&(xu=t))&&ji()}}function dl(){Du=Ou.current,Si(Ou)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Di();break;case 3:io(),Si(xi),Si(Ci),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Au=e,Pu=e=Ol(e.current,null),Ru=Du=t,Mu=0,Lu=null,Vu=Uu=Fu=0,Bu=zu=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function ml(e,t){for(;;){var n=Pu;try{if(ws(),ho.current=oa,bo){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bo=!1}if(mo=0,yo=go=po=null,vo=!1,_o=0,ku.current=null,null===n||null===n.return){Mu=1,Lu=t,Pu=null;break}e:{var o=e,a=n.return,u=n,l=t;if(t=Ru,u.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,h=u,d=h.tag;if(!(1&h.mode||0!==d&&11!==d&&15!==d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=ya(a);if(null!==m){m.flags&=-257,ba(m,a,u,0,t),1&m.mode&&ga(o,c,t),l=c;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}if(!(1&t)){ga(o,c,t),gl();break e}l=Error(s(426))}else if(is&&1&u.mode){var y=ya(a);if(null!==y){!(65536&y.flags)&&(y.flags|=256),ba(y,a,u,0,t),ms(ca(l,u));break e}}o=l=ca(l,u),4!==Mu&&(Mu=2),null===zu?zu=[o]:zu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ma(0,l,t));break e;case 1:u=l;var b=o.type,v=o.stateNode;if(!(128&o.flags||"function"!=typeof b.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Hu&&Hu.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(o,u,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(e){t=e,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function pl(){var e=Tu.current;return Tu.current=oa,null===e?oa:e}function gl(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Au||!(268435455&Fu)&&!(268435455&Uu)||ul(Au,Ru)}function yl(e,t){var n=xu;xu|=2;var r=pl();for(Au===e&&Ru===t||($u=null,fl(e,t));;)try{bl();break}catch(t){ml(e,t)}if(ws(),xu=n,Tu.current=r,null!==Pu)throw Error(s(261));return Au=null,Ru=0,Mu}function bl(){for(;null!==Pu;)_l(Pu)}function vl(){for(;null!==Pu&&!Qe();)_l(Pu)}function _l(e){var t=Nu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wl(e):Pu=t,ku.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Mu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Ka(n,t,Du)))return void(Pu=n);if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Mu&&(Mu=5)}function El(e,t,n){var r=vt,i=Cu.transition;try{Cu.transition=null,vt=1,function(e,t,n,r){do{Il()}while(null!==Qu);if(6&xu)throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Au&&(Pu=Au=null,Ru=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Ku||(Ku=!0,Al(tt,function(){return Il(),null})),o=!!(15990&n.flags),15990&n.subtreeFlags||o){o=Cu.transition,Cu.transition=null;var a=vt;vt=1;var u=xu;xu|=4,ku.current=null,function(e,t){if(ei=$t,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,u=-1,l=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var m;d!==n||0!==i&&3!==d.nodeType||(u=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(m=d.firstChild);)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++c===i&&(u=a),f===o&&++h===r&&(l=a),null!==(m=d.nextSibling))break;f=(d=f).parentNode}d=m}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,Za=t;null!==Za;)if(e=(t=Za).child,1028&t.subtreeFlags&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(e){Sl(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}p=nu,nu=!1}(e,n),yu(n,e),mr(ti),$t=!!ei,ti=ei=null,e.current=n,vu(n,e,i),Je(),xu=u,vt=a,Cu.transition=o}else e.current=n;if(Ku&&(Ku=!1,Qu=e,Ju=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),il(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Gu,Gu=null,e;!!(1&Ju)&&0!==e.tag&&Il(),1&(o=e.pendingLanes)?e===Xu?Yu++:(Yu=0,Xu=e):Yu=0,ji()}(e,t,n,r)}finally{Cu.transition=i,vt=r}return null}function Il(){if(null!==Qu){var e=_t(Ju),t=Cu.transition,n=vt;try{if(Cu.transition=null,vt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Ju=0,6&xu)throw Error(s(331));var i=xu;for(xu|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(16&Za.flags){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,m=h.return;if(ou(h),h===c){Za=null;break}if(null!==f){f.return=m,Za=f;break}Za=m}}}var p=o.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(2064&o.subtreeFlags&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(2048&(o=Za).flags)switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Za=b;break e}Za=o.return}}var v=e.current;for(Za=v;null!==Za;){var _=(a=Za).child;if(2064&a.subtreeFlags&&null!==_)_.return=a,Za=_;else e:for(a=v;null!==Za;){if(2048&(u=Za).flags)try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(e){Sl(u,u.return,e)}if(u===a){Za=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Za=w;break e}Za=u.return}}if(xu=i,ji(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{vt=n,Cu.transition=t}}return!1}function Nl(e,t,n){e=Os(e,t=ma(0,t=ca(n,t),1),1),t=tl(),null!==e&&(yt(e,1,t),il(e,t))}function Sl(e,t,n){if(3===e.tag)Nl(e,e,n);else for(;null!==t;){if(3===t.tag){Nl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Os(t,e=pa(t,e=ca(n,e),1),1),e=tl(),null!==t&&(yt(t,1,e),il(t,e));break}}t=t.return}}function Tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Ru&n)===n&&(4===Mu||3===Mu&&(130023424&Ru)===Ru&&500>Ye()-ju?fl(e,0):Vu|=n),il(e,t)}function kl(e,t){0===t&&(1&e.mode?(t=ct,!(130023424&(ct<<=1))&&(ct=4194304)):t=1);var n=tl();null!==(e=xs(e,t))&&(yt(e,t,n),il(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kl(e,n)}function xl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kl(e,n)}function Al(e,t){return He(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Pl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Dl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case I:return Ll(n.children,i,o,t);case N:a=8,i|=8;break;case S:return(e=Rl(12,n,t,2|i)).elementType=S,e.lanes=o,e;case x:return(e=Rl(13,n,t,i)).elementType=x,e.lanes=o,e;case A:return(e=Rl(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fl(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case k:a=9;break e;case C:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ll(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,i,s,o,a,u){return e=new zl(e,t,n,a,u),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function jl(e){if(!e)return ki;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,u){return(e=Bl(n,r,!0,e,0,s,0,a,u)).context=jl(null),n=e.current,(s=Ds(r=tl(),i=nl(n))).callback=null!=t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),il(e,r),e}function $l(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=jl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rl(e,i,o,s),Ms(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Nu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)_a=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ti(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Wa(e,t,n)}(e,t,n);_a=!!(131072&e.flags)}else _a=!1,is&&1048576&t.flags&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ns(t,n),i=No(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Dl(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=gs(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Ys(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Js(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!xi.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){a=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ds(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=Ss(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),$a(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Ns(t,n),qs(t,r,i),Ws(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Kl="function"==typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Wl(o);a.call(e)}}$l(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Wl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[mi]=o.current,jr(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Wl(u);a.call(e)}}var u=Bl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[mi]=u.current,jr(8===e.nodeType?e.parentNode:e),hl(function(){$l(t,u,n,r)}),u}(n,t,e,i,r);return Wl(o)}Jl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$l(e,t,null,null)},Jl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl(function(){$l(null,e,null,null)}),t[mi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),il(t,Ye()),!(6&xu)&&(qu=Ye()+500,ji()))}break;case 13:hl(function(){var t=xs(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}}),Hl(e,1)}},Et=function(e){if(13===e.tag){var t=xs(e,134217728);null!==t&&rl(t,e,134217728,tl()),Hl(e,134217728)}},It=function(e){if(13===e.tag){var t=nl(e),n=xs(e,t);null!==n&&rl(n,e,t,tl()),Hl(e,t)}},Nt=function(){return vt},St=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cl,xe=hl;var tc={usingClientEntryPoint:!1,Events:[vi,_i,wi,Te,ke,cl]},nc={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yl(e))throw Error(s(299));var n=!1,r="",i=Kl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kl;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[mi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl(function(){ec(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},577:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(199);r.registerVersion("firebase","12.3.0","app"),Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},601:e=>{"use strict";e.exports=function(e){return e[1]}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},715:(e,t,n)=>{var r=n(987),i=n(156),s=n(122),o=n(752);e.exports=function(e,t){return r(e)||i(e,t)||s(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},731:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,u=e[a],l=a+1,c=e[l];if(0>s(u,n))l<i&&0>s(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[a]=n,r=a);else{if(!(l<i&&0>s(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var l=[],c=[],h=1,d=null,f=3,m=!1,p=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(g=!1,_(e),!p)if(null!==r(l))p=!0,D(E);else{var t=r(c);null!==t&&O(w,t.startTime-e)}}function E(e,n){p=!1,g&&(g=!1,b(T),T=-1),m=!0;var s=f;try{for(_(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!x());){var o=d.callback;if("function"==typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?d.callback=a:d===r(l)&&i(l),_(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&O(w,h.startTime-n),u=!1}return u}finally{d=null,f=s,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,N=!1,S=null,T=-1,k=5,C=-1;function x(){return!(t.unstable_now()-C<k)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?I():(N=!1,S=null)}}else N=!1}if("function"==typeof v)I=function(){v(A)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,I=function(){R.postMessage(null)}}else I=function(){y(A,0)};function D(e){S=e,N||(N=!0,I())}function O(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(l)&&e===r(c)&&(g?(b(T),T=-1):g=!0,O(w,s-o))):(e.sortIndex=a,n(l,e),p||m||(p=!0,D(E))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241);Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},832:(e,t,n)=>{(function(){"use strict";var t,r=Object.defineProperty,i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=i;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in n))break e;n=n[o]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}s("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var o=o||{},a=this||self;function u(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){return(c=l).apply(null,arguments)}function h(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var f="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function m(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let t=1;t<arguments.length;t++){const r=arguments[t];var n=typeof r;if("array"==(n="object"!=n?n:r?Array.isArray(r)?"array":n:"null")||"object"==n&&"number"==typeof r.length){n=e.length||0;const t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}function g(e){a.setTimeout(()=>{throw e},0)}function y(){var e=E;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var b=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,w=!1,E=new class{constructor(){this.h=this.g=null}add(e,t){const n=b.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=Promise.resolve(void 0);_=()=>{e.then(N)}};function N(){for(var e;e=y();){try{e.h.call(e.g)}catch(e){g(e)}var t=b;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}w=!1}function S(){this.u=this.u,this.C=this.C}function T(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},T.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(e){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function x(e,t){T.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}d(x,T),x.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&x.Z.h.call(this)},x.prototype.h=function(){x.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var A="closure_listenable_"+(1e6*Math.random()|0),P=0;function R(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++P,this.da=this.fa=!1}function D(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function O(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function M(e){const t={};for(const n in e)t[n]=e[n];return t}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<L.length;t++)n=L[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U(e){this.src=e,this.g={},this.h=0}function V(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(D(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}U.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=z(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new R(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),j={};function q(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=X(n),e&&e[A]?e.J(t,n,u(r)?!!r.capture:!!r,i):$(e,t,n,!1,r,i)}function $(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=u(i)?!!i.capture:!!i;let a=J(e);if(a||(e[B]=a=new U(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=Q;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)k||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=X(n),e&&e[A]?e.K(t,n,u(r)?!!r.capture:!!r,i):$(e,t,n,!0,r,i)}function G(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);else r=u(r)?!!r.capture:!!r,n=X(n),e&&e[A]?(e=e.i,(s=String(t).toString())in e.g&&(n=z(t=e.g[s],n,r,i))>-1&&(D(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[A])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(V(n,e),0==n.h&&(n.src=null,t[B]=null)):D(e)}}}function K(e){return e in j?j[e]:j[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new x(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function J(e){return(e=e[B])instanceof U?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"==typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function Z(){S.call(this),this.i=new U(this),this.M=this,this.G=null}function ee(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new T(t,e);else if(t instanceof T)t.target=t.target||e;else{var i=t;F(t=new T(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=te(s,r,!0,t)&&i;if(s=t.g=e,i=te(s,r,!0,t)&&i,i=te(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=te(s,r,!1,t)&&i}function te(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&V(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ne(e){e.g=function(e,t){if("function"!=typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return Number(t)>2147483647?-1:a.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ne(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(Z,S),Z.prototype[A]=!0,Z.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},Z.prototype.N=function(){if(Z.Z.N.call(this),this.i){var e=this.i;let t=0;for(const n in e.g){const r=e.g[n];for(let e=0;e<r.length;e++)++t,D(r[e]);delete e.g[n],e.h--}}this.G=null},Z.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Z.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class re extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(e){S.call(this),this.h=e,this.g={}}d(ie,S);var se=[];function oe(e){O(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ie.prototype.N=function(){ie.Z.N.call(this),oe(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=a.JSON.stringify,ue=a.JSON.parse,le=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function ce(){}function he(){}var de={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fe(){T.call(this,"d")}function me(){T.call(this,"c")}d(fe,T),d(me,T);var pe={},ge=null;function ye(){return ge=ge||new Z}function be(e){T.call(this,pe.Ia,e)}function ve(e){const t=ye();ee(t,new be(t,e))}function _e(e,t){T.call(this,pe.STAT_EVENT,e),this.stat=t}function we(e){const t=ye();ee(t,new _e(t,e))}function Ee(e,t){T.call(this,pe.Ja,e),this.size=t}function Ie(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ae(s)}catch(e){return t}}(e,n)+(r?" "+r:"")})}pe.Ia="serverreachability",d(be,T),pe.STAT_EVENT="statevent",d(_e,T),pe.Ja="timingevent",d(Ee,T),Ne.prototype.ua=function(){this.g=!1},Ne.prototype.info=function(){};var Te,ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ce={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function xe(){}function Ae(e){return encodeURIComponent(String(e))}function Pe(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(xe,ce),xe.prototype.g=function(){return new XMLHttpRequest},Te=new xe;var Oe={},Me={};function Le(e,t,n){e.M=1,e.A=at(nt(t)),e.u=n,e.R=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),ze(e),e.B=nt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),wt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new De,e.g=un(e.j,n?t:null,!e.u),e.P>0&&(e.O=new re(c(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(se[0]=i.toString()),i=se);for(let e=0;e<i.length;e++){const s=q(n,i[e],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.J?M(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var u=a[e].split("=");if(u.length>1){const e=u[0];u=u[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+u+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ue(e){return!!e.g&&"GET"==e.v&&2!=e.M&&e.j.Aa}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Me:(n=Number(t.substring(n,r)),isNaN(n)?Oe:(r+=1)+n>t.length?Me:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.T=Date.now()+e.H,Be(e,e.H)}function Be(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Ie(c(e.aa,e),t)}function je(e){e.D&&(a.clearTimeout(e.D),e.D=null)}function qe(e){0==e.j.I||e.K||nn(e.j,e)}function $e(e){je(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,oe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Je(n.h,e)))if(!e.L&&Je(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;tn(n),Wt(n)}Xt(n),we(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Ie(c(n.Va,n),6e3));Qe(n.h)<=1&&n.ta&&(n.ta=void 0)}else sn(n,11)}else if((e.L||n.g==e)&&tn(n),!C(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const c=l[0];if(!(c<=n.K))if(n.K=c,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const c=l[5];null!=c&&"number"==typeof c&&c>0&&(r=1.5*c,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,ot(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=an(r,r.L?r.ba:null,r.W),o.L){Xe(r.h,o);var a=o,u=r.O;u&&(a.H=u),a.D&&(je(a),ze(a)),r.g=o}else Yt(r);n.i.length>0&&Ht(n)}else"stop"!=l[0]&&"close"!=l[0]||sn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?sn(n,7):$t(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve(4)}catch(e){}}Re.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==zt(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const u=zt(this.g),l=this.g.ya(),c=this.g.ca();if(!(u<3)&&(3!=u||this.g&&(this.h.h||this.g.la()||Bt(this.g)))){this.K||4!=u||7==l||ve(8==l||c<=0?3:2),je(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ue(e))return e.g.la();const t=Bt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==zt(e.g);if(!e.h.i){if("undefined"==typeof TextDecoder)return $e(e),qe(e),"";e.h.i=new a.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,u,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,we(12),$e(this),qe(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Ve(this,n),t==Me){4==u&&(this.m=4,we(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Oe){this.m=4,we(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),We(this,t)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=u||0!=n.length||this.h.h||(this.m=1,we(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zt(o),o.P=!0,we(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),$e(this),qe(this)}else Se(this.i,this.l,n,null),We(this,n);4==u&&$e(this),this.o&&!this.K&&(4==u?nn(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&zt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=Pe(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),$e(this),qe(this)}}}catch(e){}},Re.prototype.cancel=function(){this.K=!0,$e(this)},Re.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(3),we(17)),$e(this),this.m=2,qe(this)):Be(this,this.T-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,e=a.PerformanceNavigationTiming?(e=a.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ze(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return m(e.i)}He.prototype.cancel=function(){if(this.i=Ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof tt?(this.l=e.l,rt(this,e.j),this.o=e.o,this.g=e.g,it(this,e.u),this.h=e.h,st(this,Et(e.i)),this.m=e.m):e&&(t=String(e).match(et))?(this.l=!1,rt(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),it(this,t[4]),this.h=ut(t[5]||"",!0),st(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.l=!1,this.i=new gt(null,this.l))}function nt(e){return new tt(e)}function rt(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function it(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function st(e,t,n){t instanceof gt?(e.i=t,function(e,t){t&&!e.j&&(yt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(bt(this,t),wt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=lt(t,mt)),e.i=new gt(t,e.l))}function ot(e,t,n){e.i.set(t,n)}function at(e){return ot(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(lt(t,ht,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(lt(t,ht,!0),"@"),e.push(Ae(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(lt(n,"/"==n.charAt(0)?ft:dt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",lt(n,pt)),e.join("")},tt.prototype.resolve=function(e){const t=nt(this);let n=!!e.j;n?rt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)it(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?st(t,Et(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ht=/[#\/\?@]/g,dt=/[#\?:]/g,ft=/[#\?]/g,mt=/[#\?@]/g,pt=/#/g;function gt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function yt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function bt(e,t){yt(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return yt(e),t=It(e,t),e.g.has(t)}function _t(e,t){yt(e);let n=[];if("string"==typeof t)vt(e,t)&&(n=n.concat(e.g.get(It(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function wt(e,t,n){bt(e,t),n.length>0&&(e.i=null,e.g.set(It(e,t),m(n)),e.h+=n.length)}function Et(e){const t=new gt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(e){}}function St(){this.g=new le}function Tt(e){this.i=e.Sb||null,this.h=e.ab||!1}function kt(e,t){Z.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ct(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function xt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return O(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"==typeof e?(Ae(t),null!=n&&Ae(n)):ot(e,t,n))}function Dt(e){Z.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=gt.prototype).add=function(e,t){yt(this),this.i=null,e=It(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},t.forEach=function(e,t){yt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},t.set=function(e,t){return yt(this),this.i=null,vt(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=_t(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ae(n);n=_t(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ae(n[t])),e.push(r)}}return this.i=e.join("&")},d(Tt,ce),Tt.prototype.g=function(){return new kt(this.i,this.h)},d(kt,Z),(t=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,At(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||a).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,xt(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ct(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xt(this):At(this),3==this.readyState&&Ct(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,xt(this))},t.Na=function(e){this.g&&(this.response=e,xt(this))},t.ga=function(){this.g&&xt(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Dt,Z);var Ot=/^https?$/i,Mt=["POST","PUT"];function Lt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ft(e),Vt(e)}function Ft(e){e.A||(e.A=!0,ee(e,"complete"),ee(e,"error"))}function Ut(e){if(e.h&&void 0!==o)if(e.v&&4==zt(e))setTimeout(e.Ca.bind(e),0);else if(ee(e,"readystatechange"),4==zt(e)){e.h=!1;try{const s=e.ca();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){let t=String(e.D).match(et)[1]||null;!t&&a.self&&a.self.location&&(t=a.self.location.protocol.slice(0,-1)),r=!Ot.test(t?t.toLowerCase():"")}n=r}if(n)ee(e,"complete"),ee(e,"success");else{e.o=6;try{var i=zt(e)>2?e.g.statusText:""}catch(e){i=""}e.l=i+" ["+e.ca()+"]",Ft(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const n=e.g;e.g=null,t||ee(e,"ready");try{n.onreadystatechange=null}catch(e){}}}function zt(e){return e.g?e.g.readyState:0}function Bt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function jt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qt(e){this.za=0,this.i=[],this.j=new Ne,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jt("baseRetryDelayMs",5e3,e),this.Za=jt("retryDelaySeedMs",1e4,e),this.Ta=jt("forwardChannelMaxRetries",2,e),this.va=jt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function $t(e){if(Gt(e),3==e.I){var t=e.V++,n=nt(e.J);if(ot(n,"SID",e.M),ot(n,"RID",t),ot(n,"TYPE","terminate"),Qt(e,n),(t=new Re(e,e.j,t)).M=2,t.A=at(nt(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!n&&a.Image&&((new Image).src=t.A,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.A)),t.F=Date.now(),ze(t)}on(e)}function Wt(e){e.g&&(Zt(e),e.g.cancel(),e.g=null)}function Gt(e){Wt(e),e.v&&(a.clearTimeout(e.v),e.v=null),tn(e),e.h.cancel(),e.m&&("number"==typeof e.m&&a.clearTimeout(e.m),e.m=null)}function Ht(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;_||I(),w||(_(),w=!0),E.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=nt(e.J);ot(r,"SID",e.M),ot(r,"RID",n),ot(r,"AID",e.K),Qt(e,r),e.u&&e.o&&Rt(r,e.u,e.o),n=new Re(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Jt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Le(n,r,t)}function Qt(e,t){e.H&&O(e.H,function(e,n){ot(t,n,e)}),e.l&&O({},function(e,n){ot(t,n,e)})}function Jt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?c(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let l=0;l<n;l++){var s=i[l].g;const n=i[l].map;if((s-=t)<0)t=Math.max(0,i[l].g-100),a=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;u(n)&&(r=ae(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}catch(e){r&&r(n)}}if(a){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;_||I(),w||(_(),w=!0),E.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3||(e.Y++,e.v=Ie(c(e.Da,e),rn(e,e.A)),e.A++,0))}function Zt(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function en(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=nt(e.na);ot(t,"RID","rpc"),ot(t,"SID",e.M),ot(t,"AID",e.K),ot(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&ot(t,"TO",e.ia),ot(t,"TYPE","xmlhttp"),Qt(e,t),e.u&&e.o&&Rt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=at(nt(t)),n.u=null,n.R=!0,Fe(n,e)}function tn(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function nn(e,t){var n=null;if(e.g==t){tn(e),Zt(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ee(r=ye(),new Ee(r,n,t,i)),Ht(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.G.concat(e.i),0):1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta)||(e.m=Ie(c(e.Ea,e,t),rn(e,e.D)),e.D++,0)))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:sn(e,5);break;case 4:sn(e,10);break;case 3:sn(e,6);break;default:sn(e,2)}}function rn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function sn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.bb,e),r=e.Ua;const t=!r;r=new tt(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||rt(r,"https"),at(r),t?function(e,t){const n=new Ne;if(a.Image){const r=new Image;r.onload=h(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=h(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=h(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=h(Nt,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),Nt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Nt(0,0,!1,t)})}(r.toString(),n)}else we(2);e.I=0,e.l&&e.l.pa(t),on(e),Gt(e)}function on(e){if(e.I=0,e.ja=[],e.l){const t=Ze(e.h);0==t.length&&0==e.i.length||(p(e.ja,t),p(e.ja,e.i),e.h.i.length=0,m(e.i),e.i.length=0),e.l.oa()}}function an(e,t,n){var r=n instanceof tt?nt(n):new tt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),it(r,r.u);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new tt(null);r&&rt(e,r),t&&(e.g=t),i&&it(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&ot(r,n,t),ot(r,"VER",e.ka),Qt(e,r),r}function un(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Dt(new Tt({ab:n})):new Dt(e.ma)).Fa(e.L),t}function ln(){}function cn(){}function hn(e,t){Z.call(this),this.g=new qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!C(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new mn(this)}function dn(e){fe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fn(){me.call(this),this.status=1}function mn(e){this.g=e}(t=Dt.prototype).Fa=function(e){this.H=e},t.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Te.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Lt(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=a.FormData&&e instanceof a.FormData,!(Array.prototype.indexOf.call(Mt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(e){Lt(this,e)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ee(this,"complete"),ee(this,"abort"),Vt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ut(this):this.Xa())},t.Xa=function(){Ut(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return zt(this)>2?this.g.status:-1}catch(e){return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=qt.prototype).ka=8,t.I=1,t.connect=function(e,t,n,r){we(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=an(this,null,this.W),Ht(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Re(this,this.j,e);let s=this.o;if(this.U&&(s?(s=M(s),F(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,i,t),ot(n=nt(this.J),"RID",e),ot(n,"CVER",22),this.G&&ot(n,"X-HTTP-Session-Id",this.G),Qt(this,n),s&&(this.R?t="headers="+Ae(Pt(s))+"&"+t:this.u&&Rt(n,this.u,s)),Ye(this.h,i),this.Ra&&ot(n,"TYPE","init"),this.S?(ot(n,"$req",t),ot(n,"SID","null"),i.U=!0,Le(i,n,null)):Le(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},t.Da=function(){if(this.v=null,en(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Ie(c(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Wt(this),en(this))},t.Va=function(){null!=this.C&&(this.C=null,Wt(this),Xt(this),we(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=ln.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},cn.prototype.g=function(e,t){return new hn(e,t)},d(hn,Z),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){$t(this.g)},hn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ae(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.I&&Ht(t)},hn.prototype.N=function(){this.g.l=null,delete this.j,$t(this.g),delete this.g,hn.Z.N.call(this)},d(dn,fe),d(fn,me),d(mn,ln),mn.prototype.ra=function(){ee(this.g,"a")},mn.prototype.qa=function(e){ee(this.g,new dn(e))},mn.prototype.pa=function(e){ee(this.g,new fn(e))},mn.prototype.oa=function(){ee(this.g,"b")},cn.prototype.createWebChannel=cn.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,e.exports.createWebChannelTransport=function(){return new cn},e.exports.getStatEventTarget=function(){return ye()},e.exports.Event=pe,e.exports.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,e.exports.ErrorCode=ke,Ce.COMPLETE="complete",e.exports.EventType=Ce,he.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Z.prototype.listen=Z.prototype.J,e.exports.WebChannel=he,e.exports.FetchXmlHttpFactory=Tt,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,e.exports.XhrIo=Dt}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[];var r;t.LogLevel=void 0,(r=t.LogLevel||(t.LogLevel={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";const i={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},s=t.LogLevel.INFO,o={[t.LogLevel.DEBUG]:"log",[t.LogLevel.VERBOSE]:"log",[t.LogLevel.INFO]:"info",[t.LogLevel.WARN]:"warn",[t.LogLevel.ERROR]:"error"},a=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=o[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};t.Logger=class{constructor(e){this.name=e,this._logLevel=s,this._logHandler=a,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in t.LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.DEBUG,...e),this._logHandler(this,t.LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.VERBOSE,...e),this._logHandler(this,t.LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.INFO,...e),this._logHandler(this,t.LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.WARN,...e),this._logHandler(this,t.LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.ERROR,...e),this._logHandler(this,t.LogLevel.ERROR,...e)}},t.setLogLevel=function(e){n.forEach(t=>{t.setLogLevel(e)})},t.setUserLogHandler=function(e,r){for(const s of n){let n=null;r&&r.level&&(n=i[r.level]),s.userLogHandler=null===e?null:(r,i,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");i>=(n??r.logLevel)&&e({level:t.LogLevel[i].toLowerCase(),message:o,args:s,type:r.name})}}}},860:(e,t,n)=>{(function(){"use strict";var t;function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function r(e,t,n){n||(n=0);const r=Array(16);if("string"==typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function i(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(n,function(){this.blockSize=-1}),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},n.prototype.v=function(e,t){void 0===t&&(t=e.length);const n=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=n;)r(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){r(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){r(this,i),s=0;break}}this.h=s,this.o+=t},n.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var s={};function o(e){return-128<=e&&e<128?function(e){var t=s;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(e){return new i([0|e],e<0?-1:0)}(e)}(e):new i([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return u;if(e<0)return f(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var u=o(0),l=o(1),c=o(16777216);function h(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function f(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function m(e,t){return e.add(f(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function y(e,t){if(h(t))throw Error("division by zero");if(h(e))return new g(u,u);if(d(e))return t=y(f(e),t),new g(f(t.g),f(t.h));if(d(t))return t=y(e,f(t)),new g(f(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=b(n),r=b(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!h(r);){var o=s.add(r);o.l(e)<=0&&(i=i.add(n),s=o),r=v(r,1),n=v(n,1)}return t=m(e,i.j(t)),new g(i,t)}for(i=u;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),o=(s=a(n)).j(t);d(o)||o.l(e)>0;)o=(s=a(n-=r)).j(t);h(s)&&(s=l),i=i.add(s),e=m(e,o)}return new g(i,e)}function b(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function v(e,t){const n=t>>5;t%=32;const r=e.g.length-n,s=[];for(let i=0;i<r;i++)s[i]=t>0?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new i(s,e.h)}(t=i.prototype).m=function(){if(d(this))return-f(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},t.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(d(this))return"-"+f(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=y(n,t).g;let s=(((n=m(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(h(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},t.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},t.l=function(e){return d(e=m(this,e))?-1:h(e)?0:1},t.abs=function(){return d(this)?f(this):this},t.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),s=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,t&=65535,s&=65535,n[i]=s<<16|t}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(e){if(h(this)||h(e))return u;if(d(this))return d(e)?f(this).j(f(e)):f(f(this).j(e));if(d(e))return f(this.j(f(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,s=65535&this.i(r),o=e.i(t)>>>16,a=65535&e.i(t);n[2*r+2*t]+=s*a,p(n,2*r+2*t),n[2*r+2*t+1]+=i*a,p(n,2*r+2*t+1),n[2*r+2*t+1]+=s*o,p(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,p(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new i(n,0)},t.B=function(e){return y(this,e).h},t.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},t.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},t.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,e.exports.Md5=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=a,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=u;for(let e=0;e<t.length;e+=8){var s=Math.min(8,t.length-e);const o=parseInt(t.substring(e,e+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(o))):(i=i.j(r),i=i.add(a(o)))}return i},e.exports.Integer=i}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},865:function(e,t,n){var r=n(994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(132)),s=r(n(293)),o=r(n(715)),a=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t){if(n.has(e))return n.get(e);n.set(e,i)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,s))&&(r.get||r.set)?n(i,s,r):i[s]=e[s]);return i}(e)}(n(540));n(947);var u=n(50),l=n(125),c=this,h="D:\\FootballManagerPro\\App.web.react.js";t.default=function(){var e=(0,a.useState)(null),t=(0,o.default)(e,2),n=t[0],r=t[1],d=(0,a.useState)("auth"),f=(0,o.default)(d,2),m=f[0],p=f[1],g=(0,a.useState)(!0),y=(0,o.default)(g,2),b=y[0],v=y[1],_=(0,a.useState)("login"),w=(0,o.default)(_,2),E=w[0],I=w[1],N=(0,a.useState)([]),S=(0,o.default)(N,2),T=S[0],k=S[1],C=(0,a.useState)("4-3-3"),x=(0,o.default)(C,2),A=x[0],P=x[1],R=(0,a.useState)({}),D=(0,o.default)(R,2),O=D[0],M=D[1],L=(0,a.useState)(null),F=(0,o.default)(L,2),U=F[0],V=F[1],z=(0,a.useState)(!1),B=(0,o.default)(z,2),j=B[0],q=B[1],$=(0,a.useState)(!1),W=(0,o.default)($,2),G=W[0],H=W[1],K=(0,a.useState)(""),Q=(0,o.default)(K,2),J=Q[0],Y=Q[1],X=(0,a.useState)(""),Z=(0,o.default)(X,2),ee=Z[0],te=Z[1],ne=(0,a.useState)([]),re=(0,o.default)(ne,2),ie=re[0],se=re[1],oe=(0,a.useState)([]),ae=(0,o.default)(oe,2),ue=ae[0],le=ae[1],ce=(0,a.useState)({}),he=(0,o.default)(ce,2),de=he[0],fe=he[1],me=(0,a.useState)([]),pe=(0,o.default)(me,2),ge=(pe[0],pe[1],(0,a.useState)([])),ye=(0,o.default)(ge,2),be=ye[0],ve=ye[1],_e=(0,a.useState)(""),we=(0,o.default)(_e,2),Ee=we[0],Ie=we[1],Ne=(0,a.useState)(null),Se=(0,o.default)(Ne,2),Te=Se[0],ke=Se[1],Ce=(0,a.useState)([]),xe=(0,o.default)(Ce,2),Ae=xe[0],Pe=xe[1],Re=(0,a.useState)(0),De=(0,o.default)(Re,2),Oe=De[0],Me=De[1],Le=(0,a.useState)(!1),Fe=(0,o.default)(Le,2),Ue=Fe[0],Ve=Fe[1],ze=(0,a.useState)(null),Be=(0,o.default)(ze,2),je=Be[0],qe=Be[1],$e=(0,a.useState)(!1),We=(0,o.default)($e,2),Ge=We[0],He=We[1];(0,a.useEffect)(function(){var e,t=(0,u.onAuthStateChange)((e=(0,s.default)(function*(e){if(e){var t=yield(0,l.getUserProfile)(e.uid);if(t.success){var n=t.data;n.budget||(n.budget=15e7,yield(0,l.updateUserProfile)(e.uid,{budget:15e7})),r(Object.assign({},n,{uid:e.uid,email:e.email,name:e.displayName||n.name}))}else{var i={name:e.displayName||e.email.split("@")[0],clubName:"FC United",level:1,budget:15e7,trophies:0};yield(0,l.createUserProfile)(e.uid,i),r(Object.assign({},i,{uid:e.uid,email:e.email}))}var s=yield(0,l.getUserSquad)(e.uid);s.success&&k(s.data);var o=yield(0,l.getUserFriends)(e.uid);if(o.success){se(o.data);var a={};for(var u of o.data){var c=yield(0,l.getUserProfile)(u);c.success?a[u]=c.data.name:a[u]=u.substring(0,8)+"..."}fe(a)}var h=yield(0,l.getFriendRequests)(e.uid);h.success&&le(h.data),(0,l.listenToFriendRequests)(e.uid,function(e){le(e)}),(0,l.listenToMatches)(e.uid,function(e){ve(e)}),p("dashboard")}else r(null),p("auth");v(!1)}),function(t){return e.apply(this,arguments)}));return function(){return t()}},[]);var Ke,Qe,Je,Ye,Xe,Ze,et,tt,nt,rt,it,st,ot=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;t=e>=90?8e7:e>=88?6e7:e>=85?4e7:e>=82?25e6:e>=80?15e6:8e6;var r=n<=22?1.3:n<=25?1:n<=28?.8:.6;return Math.floor(t*r)},at=(0,a.useState)([{id:101,name:"Kylian Mbapp",position:"ST",rating:91,age:24,number:7,club:"PSG"},{id:102,name:"Erling Haaland",position:"ST",rating:90,age:23,number:9,club:"Man City"},{id:103,name:"Mohamed Salah",position:"RW",rating:89,age:31,number:11,club:"Liverpool"},{id:104,name:"Kevin De Bruyne",position:"CAM",rating:91,age:32,number:17,club:"Man City"},{id:105,name:"Virgil van Dijk",position:"CB",rating:88,age:32,number:4,club:"Liverpool"},{id:106,name:"Sadio Man",position:"LW",rating:86,age:31,number:10,club:"Bayern"},{id:107,name:"N'Golo Kant",position:"CDM",rating:87,age:32,number:7,club:"Chelsea"},{id:108,name:"Mason Mount",position:"CAM",rating:83,age:25,number:19,club:"Chelsea"},{id:109,name:"Phil Foden",position:"CAM",rating:84,age:23,number:47,club:"Man City"},{id:110,name:"Bukayo Saka",position:"RW",rating:84,age:22,number:7,club:"Arsenal"},{id:111,name:"Karim Benzema",position:"ST",rating:89,age:35,number:9,club:"Real Madrid"},{id:112,name:"Vincius Jr.",position:"LW",rating:86,age:23,number:20,club:"Real Madrid"},{id:113,name:"Luka Modri",position:"CM",rating:87,age:38,number:10,club:"Real Madrid"},{id:114,name:"Pedri",position:"CAM",rating:85,age:21,number:16,club:"Barcelona"},{id:115,name:"Gavi",position:"CM",rating:81,age:19,number:6,club:"Barcelona"},{id:116,name:"Robert Lewandowski",position:"ST",rating:89,age:35,number:9,club:"Barcelona"},{id:117,name:"Antoine Griezmann",position:"CAM",rating:85,age:32,number:8,club:"Atletico"},{id:118,name:"Joo Flix",position:"CAM",rating:84,age:24,number:7,club:"Atletico"},{id:119,name:"Ansu Fati",position:"LW",rating:81,age:21,number:10,club:"Barcelona"},{id:120,name:"Thibaut Courtois",position:"GK",rating:89,age:31,number:1,club:"Real Madrid"},{id:121,name:"Victor Osimhen",position:"ST",rating:86,age:25,number:9,club:"Napoli"},{id:122,name:"Rafael Leo",position:"LW",rating:84,age:24,number:17,club:"AC Milan"},{id:123,name:"Jamal Musiala",position:"CAM",rating:83,age:21,number:42,club:"Bayern"},{id:124,name:"Jude Bellingham",position:"CM",rating:84,age:20,number:22,club:"Dortmund"},{id:125,name:"Neymar Jr.",position:"LW",rating:89,age:31,number:10,club:"PSG"}].map(function(e){return Object.assign({},e,{value:ot(e.rating,e.age)})})),ut=(0,o.default)(at,1)[0],lt={"4-3-3":[{pos:"GK",x:50,y:90},{pos:"LB",x:15,y:75},{pos:"CB",x:35,y:75},{pos:"CB",x:65,y:75},{pos:"RB",x:85,y:75},{pos:"CM",x:25,y:50},{pos:"CM",x:50,y:50},{pos:"CM",x:75,y:50},{pos:"LW",x:15,y:25},{pos:"ST",x:50,y:25},{pos:"RW",x:85,y:25}],"4-4-2":[{pos:"GK",x:50,y:90},{pos:"LB",x:15,y:75},{pos:"CB",x:35,y:75},{pos:"CB",x:65,y:75},{pos:"RB",x:85,y:75},{pos:"LM",x:15,y:50},{pos:"CM",x:35,y:50},{pos:"CM",x:65,y:50},{pos:"RM",x:85,y:50},{pos:"ST",x:35,y:25},{pos:"ST",x:65,y:25}],"3-5-2":[{pos:"GK",x:50,y:90},{pos:"CB",x:25,y:75},{pos:"CB",x:50,y:75},{pos:"CB",x:75,y:75},{pos:"LM",x:10,y:50},{pos:"CM",x:30,y:50},{pos:"CM",x:50,y:50},{pos:"CM",x:70,y:50},{pos:"RM",x:90,y:50},{pos:"ST",x:35,y:25},{pos:"ST",x:65,y:25}]},ct=(Ke=(0,s.default)(function*(e){null!=n&&n.uid&&(yield(0,l.updateUserProfile)(n.uid,e)),r(Object.assign({},n,e))}),function(e){return Ke.apply(this,arguments)}),ht=(Qe=(0,s.default)(function*(e){null!=n&&n.uid&&(yield(0,l.saveUserSquad)(n.uid,e)),k(e)}),function(e){return Qe.apply(this,arguments)}),dt=(Je=(0,s.default)(function*(e,t){var n=yield(0,u.loginUser)(e,t);n.success||alert(`Login failed: ${n.error}`)}),function(e,t){return Je.apply(this,arguments)}),ft=(Ye=(0,s.default)(function*(e,t,n){var r=yield(0,u.registerUser)(e,t,n);r.success||alert(`Registration failed: ${r.error}`)}),function(e,t,n){return Ye.apply(this,arguments)}),mt=(Xe=(0,s.default)(function*(){var e=yield(0,u.logoutUser)();e.success||alert(`Logout failed: ${e.error}`)}),function(){return Xe.apply(this,arguments)}),pt=(Ze=(0,s.default)(function*(e){if(e.trim()){var t=yield(0,l.sendFriendRequest)(n.uid,e.trim(),n.name);t.success?alert("Friend request sent successfully!"):alert(`Failed to send friend request: ${t.error}`)}else alert("Please enter a valid user ID")}),function(e){return Ze.apply(this,arguments)}),gt=(et=(0,s.default)(function*(e,t){var r=yield(0,l.acceptFriendRequest)(e,n.uid,t);if(r.success){var i=yield(0,l.getUserFriends)(n.uid);i.success&&se(i.data),alert("Friend request accepted!")}else alert(`Failed to accept friend request: ${r.error}`)}),function(e,t){return et.apply(this,arguments)}),yt=(tt=(0,s.default)(function*(e){if(e.trim()){var t=yield(0,u.resetPassword)(e.trim());t.success?alert("Password reset email sent! Check your inbox and follow the instructions to reset your password."):alert(`Failed to send reset email: ${t.error}`)}else alert("Please enter your email address")}),function(e){return tt.apply(this,arguments)}),bt=(nt=(0,s.default)(function*(e,t){var r=yield(0,l.createMatch)(n.uid,e,n.name,t);r.success?alert(`Challenge sent to ${t}! They will receive a notification.`):alert(`Failed to send challenge: ${r.error}`)}),function(e,t){return nt.apply(this,arguments)}),vt=function(e){return 11===Object.values(e).filter(function(e){return e&&e.name}).length},_t=(rt=(0,s.default)(function*(e,t,r){try{var i=yield(0,l.getUserSquad)(t),s=yield(0,l.getUserSquad)(n.uid),o=s.success?s.data:O,a=i.success?i.data:{};if(!vt(o))return void alert("You need exactly 11 players in your formation to start a match! Please go to the Formation tab and complete your squad.");if(!vt(a))return void alert(`${r} doesn't have a complete squad (11 players). Match cannot start.`);var u=function(e,t,n,r){for(var i=[],s=Object.values(e).filter(function(e){return e}),o=Object.values(t).filter(function(e){return e}),a=s.reduce(function(e,t){return e+t.rating},0)/s.length,u=o.reduce(function(e,t){return e+t.rating},0)/o.length,l=0,c=0,h=1;h<=90;h+=Math.floor(15*Math.random())+5)if(Math.random()<.15){var d=Math.random()<a/(a+u),f=d?s[Math.floor(Math.random()*s.length)]:o[Math.floor(Math.random()*o.length)];d?(l++,i.push({minute:h,type:"goal",team:"home",player:f.name,text:` GOAL! ${f.name} scores for your team!`})):(c++,i.push({minute:h,type:"goal",team:"away",player:f.name,text:` Goal for ${r} by ${f.name}`}))}else if(Math.random()<.3){var m=Math.random()<.5,p=m?s[Math.floor(Math.random()*s.length)]:o[Math.floor(Math.random()*o.length)],g=["shot","pass","tackle","save"],y=g[Math.floor(Math.random()*g.length)];i.push({minute:h,type:y,team:m?"home":"away",player:p.name,text:`${h}' - ${p.name} ${"shot"===y?"takes a shot":"pass"===y?"makes a great pass":"tackle"===y?"makes a tackle":"makes a save"}`})}return{events:i,myGoals:l,oppGoals:c}}(o,a,0,r);ke({matchId:e,opponentId:t,opponentName:r,mySquad:o,opponentSquad:a,events:u.events,finalScore:{home:u.myGoals,away:u.oppGoals}}),Pe([]),Me(0),Ve(!1),p("match")}catch(e){alert(`Failed to start match: ${e.message}`)}}),function(e,t,n){return rt.apply(this,arguments)}),wt=(it=(0,s.default)(function*(e){try{yield(0,l.updateMatchResult)(e,{status:"declined"}),ve(function(t){return t.filter(function(t){return t.id!==e})}),alert("Match declined")}catch(e){alert(`Failed to decline match: ${e.message}`)}}),function(e){return it.apply(this,arguments)}),Et=function(){Ve(!0),Me(0),Pe([]);var e=setInterval(function(){Me(function(t){var n=t+1,r=Te.events.find(function(e){return e.minute===n});return r&&Pe(function(e){return[].concat((0,i.default)(e),[r])}),n>=90?(clearInterval(e),Ve(!1),setTimeout(function(){return It()},2e3),90):n})},100)},It=(st=(0,s.default)(function*(){try{var e={player1Goals:Te.finalScore.away,player2Goals:Te.finalScore.home,player1Rating:Math.round(Object.values(Te.opponentSquad).reduce(function(e,t){return e+t.rating},0)/11),player2Rating:Math.round(Object.values(Te.mySquad).reduce(function(e,t){return e+t.rating},0)/11),winner:Te.finalScore.home>Te.finalScore.away?"player2":Te.finalScore.away>Te.finalScore.home?"player1":"draw"};yield(0,l.updateMatchResult)(Te.matchId,e);var t="player1"===e.winner?Te.opponentName:"player2"===e.winner?"You":"Draw";alert(`Match completed!\n${Te.opponentName} ${Te.finalScore.away} - ${Te.finalScore.home} You\nWinner: ${t}`),ve(function(e){return e.filter(function(e){return e.id!==Te.matchId})}),ke(null),p("alerts")}catch(e){alert(`Failed to save match result: ${e.message}`)}}),function(){return st.apply(this,arguments)}),Nt=function(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(0)}K`:e.toString()},St=function(){var e={GK:["GK"],CB:["CB","LCB","RCB"],LB:["LB","LWB"],RB:["RB","RWB"],CDM:["CDM","DM"],CM:["CM"],CAM:["CAM","AM"],LM:["LM","LW"],RM:["RM","RW"],LW:["LW","LM"],RW:["RW","RM"],ST:["ST","CF"]},t={},n=new Set;lt[A].forEach(function(r,i){var s=function(t){var n=e[t]||[t];return T.filter(function(e){return n.some(function(t){return e.position.includes(t)||t.includes(e.position)})}).sort(function(e,t){return t.rating-e.rating})}(r.pos).filter(function(e){return!n.has(e.id)});if(s.length>0){var o=s[0];t[i]=o,n.add(o.id)}}),M(t)},Tt=function(e){var t=Object.assign({},e,{skills:e.skills||kt(e.position),potential:e.potential||Math.min(99,e.rating+Math.floor(10*Math.random())+5),age:e.age||Math.floor(15*Math.random())+18,experience:e.experience||Math.floor(Math.random()*e.rating/5)});qe(t),He(!0)},kt=function(e){var t={pace:Math.floor(40*Math.random())+60,shooting:Math.floor(40*Math.random())+60,passing:Math.floor(40*Math.random())+60,dribbling:Math.floor(40*Math.random())+60,defending:Math.floor(40*Math.random())+60,physical:Math.floor(40*Math.random())+60};switch(e){case"GK":t.shooting=Math.floor(20*Math.random())+30,t.dribbling=Math.floor(20*Math.random())+40,t.defending=Math.floor(30*Math.random())+70;break;case"CB":case"LCB":case"RCB":t.defending=Math.floor(20*Math.random())+80,t.physical=Math.floor(20*Math.random())+80,t.shooting=Math.floor(30*Math.random())+40;break;case"LB":case"RB":t.pace=Math.floor(20*Math.random())+80,t.defending=Math.floor(20*Math.random())+70;break;case"CDM":case"CM":t.passing=Math.floor(20*Math.random())+80,t.defending=Math.floor(20*Math.random())+70;break;case"CAM":t.passing=Math.floor(20*Math.random())+80,t.dribbling=Math.floor(20*Math.random())+80;break;case"LW":case"RW":t.pace=Math.floor(20*Math.random())+80,t.dribbling=Math.floor(20*Math.random())+80;break;case"ST":t.shooting=Math.floor(20*Math.random())+80,t.physical=Math.floor(20*Math.random())+75}return t},Ct=function(){H(!0),Y(n.name),te(n.clubName)},xt=function(){var e=Object.assign({},n,{name:J,clubName:ee});ct(e),H(!1),alert("Profile updated successfully!")},At=function(){H(!1),Y(""),te("")},Pt={auth:function(){return a.default.createElement("div",{className:"auth-container",__self:c,__source:{fileName:h,lineNumber:729,columnNumber:7}},a.default.createElement("div",{className:"auth-card",__self:c,__source:{fileName:h,lineNumber:730,columnNumber:9}},a.default.createElement("h1",{__self:c,__source:{fileName:h,lineNumber:731,columnNumber:11}},a.default.createElement("span",{className:"logo-icon",__self:c,__source:{fileName:h,lineNumber:732,columnNumber:11}},a.default.createElement("span",{className:"football-icon",__self:c,__source:{fileName:h,lineNumber:733,columnNumber:13}},""),a.default.createElement("span",{className:"crown-icon",__self:c,__source:{fileName:h,lineNumber:734,columnNumber:13}},"")),"Football Manager Pro"),a.default.createElement("div",{className:"auth-tabs",__self:c,__source:{fileName:h,lineNumber:738,columnNumber:11}},a.default.createElement("button",{className:"auth-tab "+("login"===E?"active":""),onClick:function(){return I("login")},__self:c,__source:{fileName:h,lineNumber:739,columnNumber:13}},"Login"),a.default.createElement("button",{className:"auth-tab "+("register"===E?"active":""),onClick:function(){return I("register")},__self:c,__source:{fileName:h,lineNumber:745,columnNumber:13}},"Register")),a.default.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n=t.get("email"),r=t.get("password");if("login"===E)dt(n,r);else{var i=t.get("displayName");ft(n,r,i)}},__self:c,__source:{fileName:h,lineNumber:752,columnNumber:11}},"register"===E&&a.default.createElement("input",{type:"text",name:"displayName",placeholder:"Display Name",required:!0,className:"auth-input",__self:c,__source:{fileName:h,lineNumber:766,columnNumber:15}}),a.default.createElement("input",{type:"email",name:"email",placeholder:"Email",required:!0,className:"auth-input",__self:c,__source:{fileName:h,lineNumber:774,columnNumber:13}}),a.default.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0,className:"auth-input",__self:c,__source:{fileName:h,lineNumber:781,columnNumber:13}}),a.default.createElement("button",{type:"submit",className:"auth-button",__self:c,__source:{fileName:h,lineNumber:788,columnNumber:13}},"login"===E?"Login":"Create Account")),"login"===E&&a.default.createElement("div",{style:{marginTop:"15px",textAlign:"center"},__self:c,__source:{fileName:h,lineNumber:794,columnNumber:13}},a.default.createElement("button",{type:"button",onClick:function(){var e=document.querySelector('input[name="email"]').value;if(e)yt(e);else{var t=prompt("Enter your email address:");t&&yt(t)}},style:{background:"none",border:"none",color:"#2196F3",textDecoration:"underline",cursor:"pointer",fontSize:"14px"},__self:c,__source:{fileName:h,lineNumber:795,columnNumber:15}},"Forgot Password?")),a.default.createElement("p",{className:"auth-info",__self:c,__source:{fileName:h,lineNumber:822,columnNumber:11}},"Join the ultimate football management experience")))},dashboard:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:827,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:828,columnNumber:9}},"Dashboard"),a.default.createElement("div",{className:"stats-grid",__self:c,__source:{fileName:h,lineNumber:829,columnNumber:9}},a.default.createElement("div",{className:"stat-card",__self:c,__source:{fileName:h,lineNumber:830,columnNumber:11}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:831,columnNumber:13}},"Club"),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:832,columnNumber:13}},n.clubName)),a.default.createElement("div",{className:"stat-card",__self:c,__source:{fileName:h,lineNumber:834,columnNumber:11}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:835,columnNumber:13}},"Level"),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:836,columnNumber:13}},n.level)),a.default.createElement("div",{className:"stat-card",__self:c,__source:{fileName:h,lineNumber:838,columnNumber:11}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:839,columnNumber:13}},"Budget (USD)"),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:840,columnNumber:13}},(n.budget||0).toLocaleString())),a.default.createElement("div",{className:"stat-card",__self:c,__source:{fileName:h,lineNumber:842,columnNumber:11}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:843,columnNumber:13}},"Trophies"),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:844,columnNumber:13}},n.trophies))))},squad:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:850,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:851,columnNumber:9}},"My Squad"),a.default.createElement("div",{className:"player-list",__self:c,__source:{fileName:h,lineNumber:852,columnNumber:9}},T.map(function(e){return a.default.createElement("div",{key:e.id,className:"player-card",__self:c,__source:{fileName:h,lineNumber:854,columnNumber:13}},a.default.createElement("div",{className:"player-info",__self:c,__source:{fileName:h,lineNumber:855,columnNumber:15}},a.default.createElement("h4",{style:{cursor:"pointer",color:"#007bff"},onClick:function(){return Tt(e)},__self:c,__source:{fileName:h,lineNumber:856,columnNumber:17}},e.name),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:862,columnNumber:17}},e.position,"  Rating: ",e.rating),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:863,columnNumber:17}},"Value: $",e.value.toLocaleString())))})))},formation:function(){var e;return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:871,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:872,columnNumber:9}},"Formation & Tactics"),a.default.createElement("div",{className:"formation-selector",__self:c,__source:{fileName:h,lineNumber:873,columnNumber:9}},Object.keys(lt).map(function(e){return a.default.createElement("button",{key:e,className:"formation-btn "+(A===e?"active":""),onClick:function(){P(e),M({})},__self:c,__source:{fileName:h,lineNumber:875,columnNumber:13}},e)})),a.default.createElement("div",{style:{textAlign:"center",marginBottom:"20px"},__self:c,__source:{fileName:h,lineNumber:887,columnNumber:9}},a.default.createElement("button",{onClick:St,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",marginRight:"10px"},__self:c,__source:{fileName:h,lineNumber:888,columnNumber:11}}," Auto-Fill Best XI"),a.default.createElement("button",{onClick:function(){return M({})},style:{padding:"10px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},__self:c,__source:{fileName:h,lineNumber:904,columnNumber:11}}," Clear Formation")),a.default.createElement("div",{className:"pitch",__self:c,__source:{fileName:h,lineNumber:920,columnNumber:9}},a.default.createElement("div",{className:"goal-area-top",__self:c,__source:{fileName:h,lineNumber:922,columnNumber:11}}),a.default.createElement("div",{className:"goal-area-bottom",__self:c,__source:{fileName:h,lineNumber:923,columnNumber:11}}),a.default.createElement("div",{className:"small-goal-area-top",__self:c,__source:{fileName:h,lineNumber:924,columnNumber:11}}),a.default.createElement("div",{className:"small-goal-area-bottom",__self:c,__source:{fileName:h,lineNumber:925,columnNumber:11}}),a.default.createElement("div",{className:"goal-line-top",__self:c,__source:{fileName:h,lineNumber:928,columnNumber:11}}),a.default.createElement("div",{className:"goal-line-bottom",__self:c,__source:{fileName:h,lineNumber:929,columnNumber:11}}),a.default.createElement("div",{className:"corner-arc top-left",__self:c,__source:{fileName:h,lineNumber:932,columnNumber:11}}),a.default.createElement("div",{className:"corner-arc top-right",__self:c,__source:{fileName:h,lineNumber:933,columnNumber:11}}),a.default.createElement("div",{className:"corner-arc bottom-left",__self:c,__source:{fileName:h,lineNumber:934,columnNumber:11}}),a.default.createElement("div",{className:"corner-arc bottom-right",__self:c,__source:{fileName:h,lineNumber:935,columnNumber:11}}),lt[A].map(function(e,t){var n=O[t];return a.default.createElement("div",{key:t,className:"position "+(n?"filled":""),style:{left:`${e.x}%`,top:`${e.y}%`,transform:"translate(-50%, -50%)"},onClick:function(){return function(e){V(e),q(!0)}(t)},__self:c,__source:{fileName:h,lineNumber:939,columnNumber:15}},n?a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{style:{fontSize:"12px",fontWeight:"bold",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.7)"},__self:c,__source:{fileName:h,lineNumber:951,columnNumber:21}},n.number),a.default.createElement("div",{style:{fontSize:"8px",fontWeight:"bold",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.7)",marginTop:"2px"},__self:c,__source:{fileName:h,lineNumber:952,columnNumber:21}},n.name.split(" ")[0])):a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"position-icon",__self:c,__source:{fileName:h,lineNumber:958,columnNumber:21}},"+"),a.default.createElement("div",{className:"position-label",__self:c,__source:{fileName:h,lineNumber:959,columnNumber:21}},e.pos)))})),a.default.createElement("div",{className:"bench-section",__self:c,__source:{fileName:h,lineNumber:966,columnNumber:9}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:967,columnNumber:11}},"Available Players"),a.default.createElement("div",{className:"bench-players",__self:c,__source:{fileName:h,lineNumber:968,columnNumber:11}},T.filter(function(e){return!Object.values(O).some(function(t){return t&&t.id===e.id})}).map(function(e){return a.default.createElement("div",{key:e.id,className:"bench-player",__self:c,__source:{fileName:h,lineNumber:975,columnNumber:15}},a.default.createElement("span",{className:"player-name",__self:c,__source:{fileName:h,lineNumber:976,columnNumber:17}},e.name),a.default.createElement("span",{className:"player-info",__self:c,__source:{fileName:h,lineNumber:977,columnNumber:17}},e.position,"  ",e.rating))}))),j&&a.default.createElement("div",{className:"modal-overlay",onClick:function(){return q(!1)},__self:c,__source:{fileName:h,lineNumber:983,columnNumber:11}},a.default.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},__self:c,__source:{fileName:h,lineNumber:984,columnNumber:13}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:985,columnNumber:15}},"Select Player for ",null==(e=lt[A][U])?void 0:e.pos),a.default.createElement("div",{className:"player-selection",__self:c,__source:{fileName:h,lineNumber:986,columnNumber:15}},T.map(function(e){var t,n,r,i,s=(n=e.position,r=null==(t=lt[A][U])?void 0:t.pos,(null==(i={GK:["GK"],CB:["CB","LB","RB"],LB:["LB","CB","LM"],RB:["RB","CB","RM"],CDM:["CDM","CM"],CM:["CM","CDM","CAM"],CAM:["CAM","CM"],LM:["LM","LB","LW"],RM:["RM","RB","RW"],LW:["LW","LM","ST"],RW:["RW","RM","ST"],ST:["ST","LW","RW"]}[n])?void 0:i.includes(r))||!1),o=Object.values(O).some(function(t){return t&&t.id===e.id});return a.default.createElement("div",{key:e.id,className:`player-option ${s?"":"incompatible"} ${o?"already-assigned":""}`,onClick:function(){return function(e){var t=Object.keys(O).find(function(t){return O[t]&&O[t].id===e.id}),n=Object.assign({},O);t&&t!==U.toString()&&(n[t]=null),n[U]=e,M(n),q(!1)}(e)},__self:c,__source:{fileName:h,lineNumber:996,columnNumber:21}},a.default.createElement("span",{className:"player-name",__self:c,__source:{fileName:h,lineNumber:1001,columnNumber:23}},e.name),a.default.createElement("span",{className:"player-details",__self:c,__source:{fileName:h,lineNumber:1002,columnNumber:23}},e.position,"  Rating: ",e.rating),!s&&a.default.createElement("span",{className:"warning",__self:c,__source:{fileName:h,lineNumber:1005,columnNumber:41}}," Position mismatch"),o&&a.default.createElement("span",{className:"warning",__self:c,__source:{fileName:h,lineNumber:1006,columnNumber:45}}," Already in formation"))})),a.default.createElement("button",{className:"close-btn",onClick:function(){return q(!1)},__self:c,__source:{fileName:h,lineNumber:1011,columnNumber:15}},"Cancel"))))},transfers:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:1021,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:1022,columnNumber:9}},"Transfer Market"),a.default.createElement("div",{className:"transfer-filters",__self:c,__source:{fileName:h,lineNumber:1023,columnNumber:9}},a.default.createElement("select",{__self:c,__source:{fileName:h,lineNumber:1024,columnNumber:11}},a.default.createElement("option",{__self:c,__source:{fileName:h,lineNumber:1025,columnNumber:13}},"All Positions"),a.default.createElement("option",{__self:c,__source:{fileName:h,lineNumber:1026,columnNumber:13}},"Forward"),a.default.createElement("option",{__self:c,__source:{fileName:h,lineNumber:1027,columnNumber:13}},"Midfielder"),a.default.createElement("option",{__self:c,__source:{fileName:h,lineNumber:1028,columnNumber:13}},"Defender"),a.default.createElement("option",{__self:c,__source:{fileName:h,lineNumber:1029,columnNumber:13}},"Goalkeeper"))),a.default.createElement("div",{className:"player-list",__self:c,__source:{fileName:h,lineNumber:1032,columnNumber:9}},ut.filter(function(e){return!T.some(function(t){return t.id===e.id})}).map(function(e){return a.default.createElement("div",{key:e.id,className:"player-card transfer",__self:c,__source:{fileName:h,lineNumber:1034,columnNumber:13}},a.default.createElement("div",{className:"player-info",__self:c,__source:{fileName:h,lineNumber:1035,columnNumber:15}},a.default.createElement("h4",{style:{cursor:"pointer",color:"#007bff"},onClick:function(){return Tt(e)},__self:c,__source:{fileName:h,lineNumber:1036,columnNumber:17}},e.name),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1042,columnNumber:17}},e.position,"  Rating: ",e.rating,"  ",e.club),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1043,columnNumber:17}},"Price: $",Nt(e.value))),a.default.createElement("button",{className:"sign-btn",onClick:function(){return function(e){if((n.budget||0)>=e.value){var t=[].concat((0,i.default)(T),[Object.assign({},e,{number:Math.floor(99*Math.random())+1})]),r=Object.assign({},n,{budget:n.budget-e.value});ht(t),ct(r),alert(`Successfully signed ${e.name} for $${e.value.toLocaleString()}!`)}else alert(`Not enough budget! You need $${e.value.toLocaleString()} but only have $${n.budget.toLocaleString()}.`)}(e)},disabled:(n.budget||0)<e.value,style:{opacity:(n.budget||0)<e.value?.5:1,cursor:(n.budget||0)<e.value?"not-allowed":"pointer"},__self:c,__source:{fileName:h,lineNumber:1045,columnNumber:15}},(n.budget||0)>=e.value?"Sign Player":"Not Enough Budget"))}),0===ut.filter(function(e){return!T.some(function(t){return t.id===e.id})}).length&&a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1059,columnNumber:13}},"All available players have been signed!")))},matches:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:1065,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:1066,columnNumber:9}},"Matches"),a.default.createElement("div",{className:"match-options",__self:c,__source:{fileName:h,lineNumber:1067,columnNumber:9}},a.default.createElement("button",{className:"match-btn",onClick:function(){return alert("Realistic AI matches coming soon! Full match simulation with tactics will be available in the next update.")},__self:c,__source:{fileName:h,lineNumber:1068,columnNumber:11}},"Quick Match (Coming Soon)"),a.default.createElement("button",{className:"match-btn",onClick:function(){return alert("Tournament mode coming soon!")},__self:c,__source:{fileName:h,lineNumber:1074,columnNumber:11}},"Tournament"),a.default.createElement("button",{className:"match-btn",onClick:function(){return alert("Career mode coming soon!")},__self:c,__source:{fileName:h,lineNumber:1080,columnNumber:11}},"Career Mode")),a.default.createElement("div",{className:"recent-matches",__self:c,__source:{fileName:h,lineNumber:1087,columnNumber:9}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:1088,columnNumber:11}},"Recent Results"),a.default.createElement("div",{className:"match-result",__self:c,__source:{fileName:h,lineNumber:1089,columnNumber:11}},a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1090,columnNumber:13}},"No matches played yet"),a.default.createElement("span",{__self:c,__source:{fileName:h,lineNumber:1091,columnNumber:13}},"Start playing to see your results here!"))))},leaderboard:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:1097,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:1098,columnNumber:9}},"Leaderboard"),a.default.createElement("div",{className:"leaderboard-list",__self:c,__source:{fileName:h,lineNumber:1099,columnNumber:9}},a.default.createElement("div",{className:"rank-item",__self:c,__source:{fileName:h,lineNumber:1100,columnNumber:11}},a.default.createElement("span",{className:"rank",__self:c,__source:{fileName:h,lineNumber:1101,columnNumber:13}},"1"),a.default.createElement("span",{className:"name",__self:c,__source:{fileName:h,lineNumber:1102,columnNumber:13}},"Pro Manager"),a.default.createElement("span",{className:"points",__self:c,__source:{fileName:h,lineNumber:1103,columnNumber:13}},"2500 pts")),a.default.createElement("div",{className:"rank-item current",__self:c,__source:{fileName:h,lineNumber:1105,columnNumber:11}},a.default.createElement("span",{className:"rank",__self:c,__source:{fileName:h,lineNumber:1106,columnNumber:13}},"5"),a.default.createElement("span",{className:"name",__self:c,__source:{fileName:h,lineNumber:1107,columnNumber:13}},n.name),a.default.createElement("span",{className:"points",__self:c,__source:{fileName:h,lineNumber:1108,columnNumber:13}},"1800 pts"))))},profile:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:1114,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:1115,columnNumber:9}},"Profile"),a.default.createElement("div",{className:"profile-info",__self:c,__source:{fileName:h,lineNumber:1116,columnNumber:9}},G?a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{style:{marginBottom:"15px"},__self:c,__source:{fileName:h,lineNumber:1119,columnNumber:15}},a.default.createElement("label",{style:{display:"block",marginBottom:"5px"},__self:c,__source:{fileName:h,lineNumber:1120,columnNumber:17}},"Manager Name:"),a.default.createElement("input",{type:"text",value:J,onChange:function(e){return Y(e.target.value)},style:{padding:"10px",width:"200px",border:"1px solid #ccc",borderRadius:"5px"},__self:c,__source:{fileName:h,lineNumber:1121,columnNumber:17}})),a.default.createElement("div",{style:{marginBottom:"15px"},__self:c,__source:{fileName:h,lineNumber:1128,columnNumber:15}},a.default.createElement("label",{style:{display:"block",marginBottom:"5px"},__self:c,__source:{fileName:h,lineNumber:1129,columnNumber:17}},"Club Name:"),a.default.createElement("input",{type:"text",value:ee,onChange:function(e){return te(e.target.value)},style:{padding:"10px",width:"200px",border:"1px solid #ccc",borderRadius:"5px"},__self:c,__source:{fileName:h,lineNumber:1130,columnNumber:17}})),a.default.createElement("div",{style:{marginTop:"20px"},__self:c,__source:{fileName:h,lineNumber:1137,columnNumber:15}},a.default.createElement("button",{onClick:xt,style:{padding:"10px 20px",marginRight:"10px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},__self:c,__source:{fileName:h,lineNumber:1138,columnNumber:17}},"Save Changes"),a.default.createElement("button",{onClick:At,style:{padding:"10px 20px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},__self:c,__source:{fileName:h,lineNumber:1144,columnNumber:17}},"Cancel"))):a.default.createElement(a.default.Fragment,null,a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:1154,columnNumber:15}},n.name),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1155,columnNumber:15}},"Club: ",n.clubName),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1156,columnNumber:15}},"Level: ",n.level),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1157,columnNumber:15}},"Budget: $",(n.budget||0).toLocaleString()),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1158,columnNumber:15}},"Trophies: ",n.trophies),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1159,columnNumber:15}},"Matches Played: ",n.matchesPlayed||0),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1160,columnNumber:15}},"Win Rate: ",n.matchesPlayed?Math.round((n.wins||0)/n.matchesPlayed*100):0,"%"),a.default.createElement("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f0f0f0",borderRadius:"5px"},__self:c,__source:{fileName:h,lineNumber:1161,columnNumber:15}},a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1162,columnNumber:17}},a.default.createElement("strong",{__self:c,__source:{fileName:h,lineNumber:1162,columnNumber:20}},"Your User ID:")),a.default.createElement("p",{style:{fontSize:"12px",fontFamily:"monospace",backgroundColor:"white",padding:"5px",borderRadius:"3px",wordBreak:"break-all",color:"#333",border:"1px solid #ddd"},__self:c,__source:{fileName:h,lineNumber:1163,columnNumber:17}},n.uid),a.default.createElement("p",{style:{fontSize:"12px",color:"#666"},__self:c,__source:{fileName:h,lineNumber:1164,columnNumber:17}},"Share this ID with friends so they can add you!")),a.default.createElement("button",{onClick:Ct,style:{padding:"10px 20px",marginTop:"20px",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},__self:c,__source:{fileName:h,lineNumber:1166,columnNumber:15}},"Edit Profile"))))},friends:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:1178,columnNumber:7}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:1179,columnNumber:9}},"Friends & Requests"),ue.length>0&&a.default.createElement("div",{style:{marginBottom:"20px"},__self:c,__source:{fileName:h,lineNumber:1183,columnNumber:11}},a.default.createElement("h3",{style:{color:"#333"},__self:c,__source:{fileName:h,lineNumber:1184,columnNumber:13}},"Pending Friend Requests (",ue.length,")"),a.default.createElement("div",{className:"friend-requests",__self:c,__source:{fileName:h,lineNumber:1185,columnNumber:13}},ue.map(function(e){return a.default.createElement("div",{key:e.id,className:"friend-request",style:{padding:"15px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",marginBottom:"10px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},__self:c,__source:{fileName:h,lineNumber:1187,columnNumber:17}},a.default.createElement("p",{style:{color:"#333",margin:"0 0 5px 0"},__self:c,__source:{fileName:h,lineNumber:1188,columnNumber:19}},a.default.createElement("strong",{__self:c,__source:{fileName:h,lineNumber:1188,columnNumber:67}},e.fromName)," wants to be your friend"),a.default.createElement("p",{style:{fontSize:"12px",color:"#666",margin:"0 0 10px 0"},__self:c,__source:{fileName:h,lineNumber:1189,columnNumber:19}},"From: ",e.from),a.default.createElement("button",{onClick:function(){return gt(e.id,e.from)},style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",marginRight:"10px",cursor:"pointer",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1190,columnNumber:19}},"Accept"),a.default.createElement("button",{onClick:function(){return alert("Decline functionality not implemented yet")},style:{padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1196,columnNumber:19}},"Decline"))}))),a.default.createElement("h3",{style:{color:"#333"},__self:c,__source:{fileName:h,lineNumber:1209,columnNumber:9}},"My Friends (",ie.length,")"),ie.length>0&&a.default.createElement("div",{style:{marginBottom:"15px"},__self:c,__source:{fileName:h,lineNumber:1213,columnNumber:11}},a.default.createElement("input",{type:"text",placeholder:" Search friends by name...",value:Ee,onChange:function(e){return Ie(e.target.value)},style:{padding:"10px",width:"100%",maxWidth:"400px",border:"1px solid #ced4da",borderRadius:"5px",fontSize:"14px"},__self:c,__source:{fileName:h,lineNumber:1214,columnNumber:13}})),a.default.createElement("div",{className:"friends-list",__self:c,__source:{fileName:h,lineNumber:1231,columnNumber:9}},ie.length>0?ie.filter(function(e){return(de[e]||e.substring(0,8)+"...").toLowerCase().includes(Ee.toLowerCase())||e.toLowerCase().includes(Ee.toLowerCase())}).map(function(e){var t=de[e]||e.substring(0,8)+"...";return a.default.createElement("div",{key:e,className:"friend-item",style:{padding:"15px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",marginBottom:"10px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},__self:c,__source:{fileName:h,lineNumber:1240,columnNumber:17}},a.default.createElement("div",{__self:c,__source:{fileName:h,lineNumber:1241,columnNumber:19}},a.default.createElement("span",{style:{color:"#333",fontWeight:"bold",fontSize:"16px"},__self:c,__source:{fileName:h,lineNumber:1242,columnNumber:21}},t),a.default.createElement("div",{style:{color:"#666",fontSize:"12px",marginTop:"2px"},__self:c,__source:{fileName:h,lineNumber:1243,columnNumber:21}},"ID: ",e.substring(0,12),"...")),a.default.createElement("button",{style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"bold"},onClick:function(){return bt(e,t)},__self:c,__source:{fileName:h,lineNumber:1245,columnNumber:19}}," Challenge"))}):a.default.createElement("p",{style:{color:"#666",fontStyle:"italic",textAlign:"center",padding:"20px"},__self:c,__source:{fileName:h,lineNumber:1255,columnNumber:13}},"No friends yet. Add some friends to start playing together!")),a.default.createElement("div",{style:{marginTop:"20px",padding:"20px",backgroundColor:"#e9ecef",border:"1px solid #ced4da",borderRadius:"8px"},__self:c,__source:{fileName:h,lineNumber:1260,columnNumber:9}},a.default.createElement("h4",{style:{color:"#333",marginBottom:"10px"},__self:c,__source:{fileName:h,lineNumber:1261,columnNumber:11}},"Add a Friend"),a.default.createElement("p",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"15px"},__self:c,__source:{fileName:h,lineNumber:1262,columnNumber:11}},"Enter your friend's User ID. They can find their ID in their Profile tab."),a.default.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"},__self:c,__source:{fileName:h,lineNumber:1265,columnNumber:11}},a.default.createElement("input",{type:"text",id:"friendIdInput",placeholder:"Enter friend's User ID",style:{padding:"10px",flex:"1",border:"1px solid #ced4da",borderRadius:"5px",fontSize:"14px"},__self:c,__source:{fileName:h,lineNumber:1266,columnNumber:13}}),a.default.createElement("button",{onClick:function(){var e=document.getElementById("friendIdInput").value;e&&(pt(e),document.getElementById("friendIdInput").value="")},style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"bold",whiteSpace:"nowrap"},__self:c,__source:{fileName:h,lineNumber:1272,columnNumber:13}},"Send Request"))))},alerts:function(){return a.default.createElement("div",{className:"screen",__self:c,__source:{fileName:h,lineNumber:1289,columnNumber:7}},a.default.createElement("h2",{style:{color:"#333"},__self:c,__source:{fileName:h,lineNumber:1290,columnNumber:9}},"Alerts & Notifications"),be.length>0&&a.default.createElement("div",{style:{marginBottom:"20px"},__self:c,__source:{fileName:h,lineNumber:1294,columnNumber:11}},a.default.createElement("h3",{style:{color:"#333"},__self:c,__source:{fileName:h,lineNumber:1295,columnNumber:13}},"Incoming Match Challenges (",be.length,")"),a.default.createElement("div",{className:"challenge-alerts",__self:c,__source:{fileName:h,lineNumber:1296,columnNumber:13}},be.map(function(e){return a.default.createElement("div",{key:e.id,className:"challenge-alert",style:{padding:"15px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",marginBottom:"10px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},__self:c,__source:{fileName:h,lineNumber:1298,columnNumber:17}},a.default.createElement("p",{style:{color:"#333",margin:"0 0 5px 0",fontSize:"16px"},__self:c,__source:{fileName:h,lineNumber:1299,columnNumber:19}},a.default.createElement("strong",{__self:c,__source:{fileName:h,lineNumber:1299,columnNumber:85}}," ",e.player1Name)," challenged you to a match!"),a.default.createElement("p",{style:{fontSize:"12px",color:"#666",margin:"0 0 10px 0"},__self:c,__source:{fileName:h,lineNumber:1300,columnNumber:19}},"Challenge ID: ",e.id),a.default.createElement("button",{onClick:function(){return _t(e.id,e.player1,e.player1Name)},style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",marginRight:"10px",cursor:"pointer",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1301,columnNumber:19}},"Accept Challenge"),a.default.createElement("button",{onClick:function(){return wt(e.id)},style:{padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1307,columnNumber:19}},"Decline"))}))),ue.length>0&&a.default.createElement("div",{style:{marginBottom:"20px"},__self:c,__source:{fileName:h,lineNumber:1321,columnNumber:11}},a.default.createElement("h3",{style:{color:"#333"},__self:c,__source:{fileName:h,lineNumber:1322,columnNumber:13}},"Friend Requests (",ue.length,")"),a.default.createElement("div",{className:"friend-request-alerts",__self:c,__source:{fileName:h,lineNumber:1323,columnNumber:13}},ue.map(function(e){return a.default.createElement("div",{key:e.id,className:"friend-request-alert",style:{padding:"15px",backgroundColor:"#d1ecf1",border:"1px solid #bee5eb",marginBottom:"10px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},__self:c,__source:{fileName:h,lineNumber:1325,columnNumber:17}},a.default.createElement("p",{style:{color:"#333",margin:"0 0 5px 0"},__self:c,__source:{fileName:h,lineNumber:1326,columnNumber:19}},a.default.createElement("strong",{__self:c,__source:{fileName:h,lineNumber:1326,columnNumber:67}}," ",e.fromName)," wants to be your friend"),a.default.createElement("p",{style:{fontSize:"12px",color:"#666",margin:"0 0 10px 0"},__self:c,__source:{fileName:h,lineNumber:1327,columnNumber:19}},"From: ",e.from),a.default.createElement("button",{onClick:function(){return gt(e.id,e.from)},style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",marginRight:"10px",cursor:"pointer",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1328,columnNumber:19}},"Accept"),a.default.createElement("button",{onClick:function(){return alert("Decline functionality not implemented yet")},style:{padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1334,columnNumber:19}},"Decline"))}))),0===be.length&&0===ue.length&&a.default.createElement("div",{style:{textAlign:"center",padding:"40px",color:"#666"},__self:c,__source:{fileName:h,lineNumber:1348,columnNumber:11}},a.default.createElement("p",{style:{fontSize:"18px",marginBottom:"10px"},__self:c,__source:{fileName:h,lineNumber:1349,columnNumber:13}}," No new notifications"),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1350,columnNumber:13}},"Friend requests and match challenges will appear here.")))},match:function(){return a.default.createElement("div",{className:"match-screen",__self:c,__source:{fileName:h,lineNumber:1357,columnNumber:7}},Te&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"match-header",style:{textAlign:"center",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"10px",marginBottom:"20px"},__self:c,__source:{fileName:h,lineNumber:1360,columnNumber:13}},a.default.createElement("h2",{style:{color:"#333",margin:"0 0 10px 0"},__self:c,__source:{fileName:h,lineNumber:1361,columnNumber:15}}," LIVE MATCH"),a.default.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"20px"},__self:c,__source:{fileName:h,lineNumber:1362,columnNumber:15}},a.default.createElement("div",{style:{textAlign:"center"},__self:c,__source:{fileName:h,lineNumber:1363,columnNumber:17}},a.default.createElement("h3",{style:{color:"#007bff",margin:"0"},__self:c,__source:{fileName:h,lineNumber:1364,columnNumber:19}},n.name),a.default.createElement("p",{style:{margin:"5px 0",color:"#666"},__self:c,__source:{fileName:h,lineNumber:1365,columnNumber:19}},"HOME")),a.default.createElement("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#333",padding:"10px 20px",backgroundColor:"white",borderRadius:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},__self:c,__source:{fileName:h,lineNumber:1367,columnNumber:17}},Ae.filter(function(e){return"goal"===e.type&&"home"===e.team}).length," - ",Ae.filter(function(e){return"goal"===e.type&&"away"===e.team}).length),a.default.createElement("div",{style:{textAlign:"center"},__self:c,__source:{fileName:h,lineNumber:1370,columnNumber:17}},a.default.createElement("h3",{style:{color:"#dc3545",margin:"0"},__self:c,__source:{fileName:h,lineNumber:1371,columnNumber:19}},Te.opponentName),a.default.createElement("p",{style:{margin:"5px 0",color:"#666"},__self:c,__source:{fileName:h,lineNumber:1372,columnNumber:19}},"AWAY"))),a.default.createElement("div",{style:{marginTop:"15px",fontSize:"18px",fontWeight:"bold",color:Ue?"#28a745":"#ffc107"},__self:c,__source:{fileName:h,lineNumber:1375,columnNumber:15}},Ue?`${Oe}'`:Oe>=90?"FULL TIME":"PRE-MATCH")),!Ue&&0===Oe&&a.default.createElement("div",{style:{textAlign:"center",marginBottom:"20px"},__self:c,__source:{fileName:h,lineNumber:1381,columnNumber:15}},a.default.createElement("button",{onClick:Et,style:{padding:"15px 30px",fontSize:"18px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"},__self:c,__source:{fileName:h,lineNumber:1382,columnNumber:17}}," START MATCH")),a.default.createElement("div",{className:"match-events",style:{backgroundColor:"white",borderRadius:"10px",padding:"20px",maxHeight:"400px",overflowY:"auto",border:"1px solid #e0e0e0"},__self:c,__source:{fileName:h,lineNumber:1401,columnNumber:13}},a.default.createElement("h3",{style:{color:"#333",marginTop:"0",textAlign:"center"},__self:c,__source:{fileName:h,lineNumber:1402,columnNumber:15}}," MATCH EVENTS"),0===Ae.length&&a.default.createElement("p",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},__self:c,__source:{fileName:h,lineNumber:1404,columnNumber:17}},"Match events will appear here..."),Ae.map(function(e,t){return a.default.createElement("div",{key:t,style:{padding:"10px",marginBottom:"10px",backgroundColor:"goal"===e.type?"home"===e.team?"#d4edda":"#f8d7da":"#f8f9fa",borderRadius:"8px",borderLeft:"4px solid "+("goal"===e.type?"home"===e.team?"#28a745":"#dc3545":"#6c757d"),animation:"slideIn 0.5s ease-in"},__self:c,__source:{fileName:h,lineNumber:1407,columnNumber:17}},a.default.createElement("div",{style:{fontWeight:"bold",color:"#333"},__self:c,__source:{fileName:h,lineNumber:1418,columnNumber:19}},e.text),a.default.createElement("div",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},__self:c,__source:{fileName:h,lineNumber:1419,columnNumber:19}},e.minute,"' - ",e.player))})),a.default.createElement("div",{style:{textAlign:"center",marginTop:"20px"},__self:c,__source:{fileName:h,lineNumber:1424,columnNumber:13}},a.default.createElement("button",{onClick:function(){ke(null),p("alerts")},style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},__self:c,__source:{fileName:h,lineNumber:1425,columnNumber:15}}," Back to Alerts"))))}};return b?a.default.createElement("div",{className:"app",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},__self:c,__source:{fileName:h,lineNumber:1450,columnNumber:7}},a.default.createElement("div",{style:{textAlign:"center"},__self:c,__source:{fileName:h,lineNumber:1451,columnNumber:9}},a.default.createElement("h2",{__self:c,__source:{fileName:h,lineNumber:1452,columnNumber:11}}," Loading Fury FM..."),a.default.createElement("p",{__self:c,__source:{fileName:h,lineNumber:1453,columnNumber:11}},"Connecting to Firebase..."))):n?a.default.createElement("div",{className:"app",__self:c,__source:{fileName:h,lineNumber:1468,columnNumber:5}},a.default.createElement("header",{className:"header",__self:c,__source:{fileName:h,lineNumber:1469,columnNumber:7}},a.default.createElement("h1",{__self:c,__source:{fileName:h,lineNumber:1470,columnNumber:9}},a.default.createElement("span",{className:"logo-icon",__self:c,__source:{fileName:h,lineNumber:1471,columnNumber:11}},a.default.createElement("span",{className:"football-icon",__self:c,__source:{fileName:h,lineNumber:1472,columnNumber:13}},""),a.default.createElement("span",{className:"crown-icon",__self:c,__source:{fileName:h,lineNumber:1473,columnNumber:13}},"")),"Football Manager Pro"),a.default.createElement("div",{className:"header-info",__self:c,__source:{fileName:h,lineNumber:1477,columnNumber:9}},a.default.createElement("span",{__self:c,__source:{fileName:h,lineNumber:1478,columnNumber:11}}," $",(n.budget||0).toLocaleString()),a.default.createElement("span",{__self:c,__source:{fileName:h,lineNumber:1479,columnNumber:11}}," ",n.trophies),a.default.createElement("button",{className:"logout-btn",onClick:mt,__self:c,__source:{fileName:h,lineNumber:1480,columnNumber:11}},"Logout"))),a.default.createElement("nav",{className:"bottom-nav",__self:c,__source:{fileName:h,lineNumber:1486,columnNumber:7}},Object.keys(Pt).filter(function(e){return"auth"!==e}).map(function(e){var t="alerts"===e?be.length+ue.length:0;return a.default.createElement("button",{key:e,className:"nav-btn "+(m===e?"active":""),onClick:function(){return p(e)},style:{position:"relative"},__self:c,__source:{fileName:h,lineNumber:1490,columnNumber:13}},e.charAt(0).toUpperCase()+e.slice(1),t>0&&a.default.createElement("span",{style:{position:"absolute",top:"-5px",right:"-5px",backgroundColor:"#ff4444",color:"white",borderRadius:"50%",width:"20px",height:"20px",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1498,columnNumber:17}},t))})),a.default.createElement("main",{className:"main-content",__self:c,__source:{fileName:h,lineNumber:1521,columnNumber:7}},Pt[m]()),Ge&&je&&a.default.createElement("div",{className:"modal-overlay",onClick:function(){return He(!1)},__self:c,__source:{fileName:h,lineNumber:1527,columnNumber:9}},a.default.createElement("div",{className:"modal-content player-detail-modal",onClick:function(e){return e.stopPropagation()},__self:c,__source:{fileName:h,lineNumber:1528,columnNumber:11}},a.default.createElement("h3",{__self:c,__source:{fileName:h,lineNumber:1529,columnNumber:13}},je.name),a.default.createElement("div",{className:"player-detail-grid",__self:c,__source:{fileName:h,lineNumber:1530,columnNumber:13}},a.default.createElement("div",{className:"player-basic-info",__self:c,__source:{fileName:h,lineNumber:1531,columnNumber:15}},a.default.createElement("div",{className:"info-item",__self:c,__source:{fileName:h,lineNumber:1532,columnNumber:17}},a.default.createElement("label",{__self:c,__source:{fileName:h,lineNumber:1533,columnNumber:19}},"Position:"),a.default.createElement("span",{__self:c,__source:{fileName:h,lineNumber:1534,columnNumber:19}},je.position)),a.default.createElement("div",{className:"info-item",__self:c,__source:{fileName:h,lineNumber:1536,columnNumber:17}},a.default.createElement("label",{__self:c,__source:{fileName:h,lineNumber:1537,columnNumber:19}},"Overall Rating:"),a.default.createElement("span",{style:{color:"#007bff",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1538,columnNumber:19}},je.rating)),a.default.createElement("div",{className:"info-item",__self:c,__source:{fileName:h,lineNumber:1540,columnNumber:17}},a.default.createElement("label",{__self:c,__source:{fileName:h,lineNumber:1541,columnNumber:19}},"Age:"),a.default.createElement("span",{__self:c,__source:{fileName:h,lineNumber:1542,columnNumber:19}},je.age)),a.default.createElement("div",{className:"info-item",__self:c,__source:{fileName:h,lineNumber:1544,columnNumber:17}},a.default.createElement("label",{__self:c,__source:{fileName:h,lineNumber:1545,columnNumber:19}},"Value:"),a.default.createElement("span",{__self:c,__source:{fileName:h,lineNumber:1546,columnNumber:19}},"$",Nt(je.value))),a.default.createElement("div",{className:"info-item",__self:c,__source:{fileName:h,lineNumber:1548,columnNumber:17}},a.default.createElement("label",{__self:c,__source:{fileName:h,lineNumber:1549,columnNumber:19}},"Potential:"),a.default.createElement("span",{style:{color:"#28a745",fontWeight:"bold"},__self:c,__source:{fileName:h,lineNumber:1550,columnNumber:19}},je.potential)),a.default.createElement("div",{className:"info-item",__self:c,__source:{fileName:h,lineNumber:1552,columnNumber:17}},a.default.createElement("label",{__self:c,__source:{fileName:h,lineNumber:1553,columnNumber:19}},"Experience:"),a.default.createElement("span",{__self:c,__source:{fileName:h,lineNumber:1554,columnNumber:19}},je.experience))),a.default.createElement("div",{className:"player-skills",__self:c,__source:{fileName:h,lineNumber:1558,columnNumber:15}},a.default.createElement("h4",{__self:c,__source:{fileName:h,lineNumber:1559,columnNumber:17}},"Skills & Development"),a.default.createElement("div",{className:"skills-grid",__self:c,__source:{fileName:h,lineNumber:1560,columnNumber:17}},Object.entries(je.skills||{}).map(function(e){var t=(0,o.default)(e,2),i=t[0],s=t[1];return a.default.createElement("div",{key:i,className:"skill-item",__self:c,__source:{fileName:h,lineNumber:1562,columnNumber:21}},a.default.createElement("div",{className:"skill-header",__self:c,__source:{fileName:h,lineNumber:1563,columnNumber:23}},a.default.createElement("label",{__self:c,__source:{fileName:h,lineNumber:1564,columnNumber:25}},i.charAt(0).toUpperCase()+i.slice(1),":"),a.default.createElement("span",{className:"skill-value",__self:c,__source:{fileName:h,lineNumber:1565,columnNumber:25}},s)),a.default.createElement("div",{className:"skill-progress",__self:c,__source:{fileName:h,lineNumber:1567,columnNumber:23}},a.default.createElement("div",{className:"skill-bar",style:{width:`${s}%`,backgroundColor:s>=80?"#28a745":s>=60?"#ffc107":"#dc3545"},__self:c,__source:{fileName:h,lineNumber:1568,columnNumber:25}})),T.some(function(e){return e.id===je.id})&&a.default.createElement("button",{className:"improve-btn",onClick:function(){return function(e){var t=1e5;if(n.budget>=t){var i=Object.assign({},je);i.skills[e]=Math.min(99,i.skills[e]+1),i.rating=Math.ceil(Object.values(i.skills).reduce(function(e,t){return e+t})/6);var s=T.map(function(e){return e.id===je.id?i:e});k(s),ht(s);var o=Object.assign({},n,{budget:n.budget-t});r(o),ct(o),qe(i),alert(`${e} improved to ${i.skills[e]}! Rating is now ${i.rating}.`)}else alert(`Not enough budget! Training costs $${t.toLocaleString()}.`)}(i)},disabled:s>=99,__self:c,__source:{fileName:h,lineNumber:1574,columnNumber:25}},s>=99?"Max":"Train (+1) - 100K"),!T.some(function(e){return e.id===je.id})&&a.default.createElement("span",{style:{color:"#888",fontSize:"12px"},__self:c,__source:{fileName:h,lineNumber:1583,columnNumber:25}},"Sign player to train"))})))),a.default.createElement("button",{className:"close-btn",onClick:function(){return He(!1)},__self:c,__source:{fileName:h,lineNumber:1592,columnNumber:13}},"Close")))):a.default.createElement("div",{className:"app",__self:c,__source:{fileName:h,lineNumber:1461,columnNumber:7}},Pt.auth())}},869:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},873:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultsFromPostinstall=()=>{}},901:(e,t,n)=>{var r=n(79);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},947:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var r=n(72),i=n.n(r),s=n(825),o=n.n(s),a=n(659),u=n.n(a),l=n(56),c=n.n(l),h=n(159),d=n.n(h),f=n(113),m=n.n(f),p=n(398),g={};g.styleTagTransform=m(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(p.A,g);const y=p.A&&p.A.locals?p.A.locals:void 0},961:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(551)},970:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(486);n(199),n(336),n(844),n(319),t.ActionCodeOperation=r.ActionCodeOperation,t.ActionCodeURL=r.ActionCodeURL,t.AuthCredential=r.AuthCredential,t.AuthErrorCodes=r.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY,t.EmailAuthCredential=r.EmailAuthCredential,t.EmailAuthProvider=r.EmailAuthProvider,t.FacebookAuthProvider=r.FacebookAuthProvider,t.FactorId=r.FactorId,t.GithubAuthProvider=r.GithubAuthProvider,t.GoogleAuthProvider=r.GoogleAuthProvider,t.OAuthCredential=r.OAuthCredential,t.OAuthProvider=r.OAuthProvider,t.OperationType=r.OperationType,t.PhoneAuthCredential=r.PhoneAuthCredential,t.PhoneAuthProvider=r.PhoneAuthProvider,t.PhoneMultiFactorGenerator=r.PhoneMultiFactorGenerator,t.ProviderId=r.ProviderId,t.RecaptchaVerifier=r.RecaptchaVerifier,t.SAMLAuthProvider=r.SAMLAuthProvider,t.SignInMethod=r.SignInMethod,t.TotpMultiFactorGenerator=r.TotpMultiFactorGenerator,t.TotpSecret=r.TotpSecret,t.TwitterAuthProvider=r.TwitterAuthProvider,t.applyActionCode=r.applyActionCode,t.beforeAuthStateChanged=r.beforeAuthStateChanged,t.browserCookiePersistence=r.browserCookiePersistence,t.browserLocalPersistence=r.browserLocalPersistence,t.browserPopupRedirectResolver=r.browserPopupRedirectResolver,t.browserSessionPersistence=r.browserSessionPersistence,t.checkActionCode=r.checkActionCode,t.confirmPasswordReset=r.confirmPasswordReset,t.connectAuthEmulator=r.connectAuthEmulator,t.createUserWithEmailAndPassword=r.createUserWithEmailAndPassword,t.debugErrorMap=r.debugErrorMap,t.deleteUser=r.deleteUser,t.fetchSignInMethodsForEmail=r.fetchSignInMethodsForEmail,t.getAdditionalUserInfo=r.getAdditionalUserInfo,t.getAuth=r.getAuth,t.getIdToken=r.getIdToken,t.getIdTokenResult=r.getIdTokenResult,t.getMultiFactorResolver=r.getMultiFactorResolver,t.getRedirectResult=r.getRedirectResult,t.inMemoryPersistence=r.inMemoryPersistence,t.indexedDBLocalPersistence=r.indexedDBLocalPersistence,t.initializeAuth=r.initializeAuth,t.initializeRecaptchaConfig=r.initializeRecaptchaConfig,t.isSignInWithEmailLink=r.isSignInWithEmailLink,t.linkWithCredential=r.linkWithCredential,t.linkWithPhoneNumber=r.linkWithPhoneNumber,t.linkWithPopup=r.linkWithPopup,t.linkWithRedirect=r.linkWithRedirect,t.multiFactor=r.multiFactor,t.onAuthStateChanged=r.onAuthStateChanged,t.onIdTokenChanged=r.onIdTokenChanged,t.parseActionCodeURL=r.parseActionCodeURL,t.prodErrorMap=r.prodErrorMap,t.reauthenticateWithCredential=r.reauthenticateWithCredential,t.reauthenticateWithPhoneNumber=r.reauthenticateWithPhoneNumber,t.reauthenticateWithPopup=r.reauthenticateWithPopup,t.reauthenticateWithRedirect=r.reauthenticateWithRedirect,t.reload=r.reload,t.revokeAccessToken=r.revokeAccessToken,t.sendEmailVerification=r.sendEmailVerification,t.sendPasswordResetEmail=r.sendPasswordResetEmail,t.sendSignInLinkToEmail=r.sendSignInLinkToEmail,t.setPersistence=r.setPersistence,t.signInAnonymously=r.signInAnonymously,t.signInWithCredential=r.signInWithCredential,t.signInWithCustomToken=r.signInWithCustomToken,t.signInWithEmailAndPassword=r.signInWithEmailAndPassword,t.signInWithEmailLink=r.signInWithEmailLink,t.signInWithPhoneNumber=r.signInWithPhoneNumber,t.signInWithPopup=r.signInWithPopup,t.signInWithRedirect=r.signInWithRedirect,t.signOut=r.signOut,t.unlink=r.unlink,t.updateCurrentUser=r.updateCurrentUser,t.updateEmail=r.updateEmail,t.updatePassword=r.updatePassword,t.updatePhoneNumber=r.updatePhoneNumber,t.updateProfile=r.updateProfile,t.useDeviceLanguage=r.useDeviceLanguage,t.validatePassword=r.validatePassword,t.verifyBeforeUpdateEmail=r.verifyBeforeUpdateEmail,t.verifyPasswordResetCode=r.verifyPasswordResetCode},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,n(290)})();